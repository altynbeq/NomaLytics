{"ast":null,"code":"import { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, createElement, closest, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, select } from '@syncfusion/ej2-base';\nimport { Download, GetDetails } from './../common/operations';\nimport { createDialog } from './dialog';\nimport { cutFiles, copyFiles, refresh, getPathObject, getLocaleText, updateLayout, getFullPath } from './../common/utility';\nimport { getCssClass, sortbyClickHandler, pasteHandler } from './../common/utility';\nimport { createDeniedDialog, createNewFolder, uploadItem, hasEditAccess, hasDownloadAccess } from './../common/utility';\nimport * as events from './../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * ContextMenu module\n */\n\nvar ContextMenu =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the ContextMenu module\n   *\n   * @param {IFileManager} parent - Specifies the parent element.\n   * @hidden\n   */\n  function ContextMenu(parent) {\n    this.currentItems = [];\n    this.currentElement = null;\n    this.disabledItems = [];\n    this.parent = parent;\n    this.render();\n  }\n\n  ContextMenu.prototype.render = function () {\n    this.keyConfigs = {\n      downarrow: 'downarrow',\n      uparrow: 'uparrown'\n    };\n    this.contextMenu = new Menu({\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      target: '#' + this.parent.element.id,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      beforeItemRender: this.onBeforeItemRender.bind(this),\n      select: this.onSelect.bind(this),\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this),\n      cssClass: getCssClass(this.parent, CLS.ROOT_POPUP)\n    });\n    this.contextMenu.isStringTemplate = true;\n    this.contextMenu.appendTo('#' + this.parent.element.id + CLS.CONTEXT_MENU_ID);\n    this.addEventListener();\n  };\n  /* istanbul ignore next */\n\n\n  ContextMenu.prototype.onBeforeItemRender = function (args) {\n    if (args.item.id === this.getMenuId('largeiconsview')) {\n      var iconSpan = createElement('span');\n      var element = args.element;\n      element.insertBefore(iconSpan, this.parent.view === 'LargeIcons' ? element.childNodes[1] : element.childNodes[0]);\n      iconSpan.setAttribute('class', CLS.ICON_LARGE + ' ' + CLS.MENU_ICON);\n    }\n\n    if (args.item.id === this.getMenuId('detailsview')) {\n      var iconSpan = createElement('span');\n      var element = args.element;\n      element.insertBefore(iconSpan, this.parent.view === 'Details' ? element.childNodes[1] : element.childNodes[0]);\n      iconSpan.setAttribute('class', CLS.ICON_GRID + ' ' + CLS.MENU_ICON);\n    }\n  };\n\n  ContextMenu.prototype.onBeforeClose = function () {\n    this.menuTarget = null;\n  };\n  /* istanbul ignore next */\n\n\n  ContextMenu.prototype.onBeforeOpen = function (args) {\n    var _this = this;\n\n    this.disabledItems = [];\n    var selected = false;\n    var uid; // eslint-disable-next-line\n\n    var data;\n    var treeFolder = false;\n    var target = args.event.target;\n    this.menuTarget = this.targetNodeElement = target;\n    this.currentElement = args.element;\n\n    if (target.classList.contains('e-spinner-pane')) {\n      target = this.parent.navigationpaneModule.activeNode.getElementsByClassName(CLS.FULLROW)[0];\n      this.menuTarget = this.targetNodeElement = target;\n    }\n\n    this.targetElement = this.parent.view === 'Details' ? closest(target, 'tr.e-row') : target;\n    var view = this.getTargetView(target);\n    this.updateActiveModule();\n    /* istanbul ignore next */\n\n    if (target.classList.contains(CLS.TREE_VIEW) || closest(target, 'th') || closest(target, '#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID) || closest(target, '#' + this.parent.element.id + CLS.TOOLBAR_ID)) {\n      args.cancel = true; // eslint:disable-next-line\n    } else if (!(this.parent.view === 'LargeIcons') && this.targetElement && this.targetElement.classList.contains('e-emptyrow')) {\n      this.setLayoutItem(target);\n      /* istanbul ignore next */\n    } else if (closest(target, '.' + CLS.EMPTY)) {\n      this.setLayoutItem(target); // eslint:disable-next-line\n    } else if (!target.classList.contains(CLS.MENU_ITEM) && !target.classList.contains(CLS.MENU_ICON) && !target.classList.contains(CLS.SUBMENU_ICON)) {\n      /* istanbul ignore next */\n      // eslint:disable-next-line\n      if (this.parent.view === 'LargeIcons' && !isNOU(closest(target, 'li')) && !closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n        var eveArgs = {\n          ctrlKey: true,\n          shiftKey: true\n        };\n\n        if (!closest(target, 'li').classList.contains('e-active')) {\n          this.parent.largeiconsviewModule.doSelection(target, eveArgs);\n        } // eslint-disable-next-line\n\n\n        data = this.parent.visitedData;\n        selected = true;\n      } else if (!isNOU(closest(target, 'tr.e-row'))) {\n        uid = this.targetElement.getAttribute('data-uid'); // eslint-disable-next-line\n\n        data = this.parent.detailsviewModule.gridObj.getRowObjectFromUID(uid).data;\n\n        if (isNOU(this.targetElement.getAttribute('aria-selected'))) {\n          /* istanbul ignore next */\n          this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute('aria-rowindex'), 10)]);\n        }\n\n        selected = true;\n        /* istanbul ignore next */\n      } else if (closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n        uid = closest(target, 'li').getAttribute('data-uid');\n        treeFolder = true;\n      }\n      /* istanbul ignore next */\n\n\n      if (selected) {\n        if (getValue('isFile', data) === true) {\n          this.setFileItem();\n        } else {\n          this.setFolderItem(false);\n        }\n        /* istanbul ignore next */\n\n      } else if (treeFolder) {\n        this.setFolderItem(true);\n\n        if (uid === this.parent.pathId[0]) {\n          this.disabledItems.push('Delete', 'Rename', 'Cut', 'Copy');\n        }\n        /* istanbul ignore next */\n        // eslint:disable-next-line\n\n      } else if (view === 'TreeView' || view === 'GridView' || view === 'LargeIcon') {\n        this.setLayoutItem(target);\n        /* istanbul ignore next */\n      } else {\n        args.cancel = true;\n      }\n    }\n\n    var pasteEle = select('#' + this.getMenuId('Paste'), this.contextMenu.element);\n\n    if (!args.cancel && !this.parent.enablePaste && pasteEle && !pasteEle.classList.contains('e-disabled')) {\n      this.disabledItems.push('Paste');\n    }\n\n    if (args.cancel) {\n      this.menuTarget = this.currentElement = null;\n      return;\n    }\n\n    this.contextMenu.dataBind();\n    var isSubMenu = false;\n\n    if (target.classList.contains(CLS.MENU_ITEM) || target.classList.contains(CLS.MENU_ICON) || target.classList.contains(CLS.SUBMENU_ICON)) {\n      isSubMenu = true;\n    }\n\n    this.menuItemData = isSubMenu ? this.menuItemData : this.getMenuItemData();\n    var eventArgs = {\n      fileDetails: [this.menuItemData],\n      element: args.element,\n      target: target,\n      items: isSubMenu ? args.items : this.contextMenu.items,\n      menuModule: this.contextMenu,\n      cancel: false,\n      menuType: this.menuType,\n      isSubMenu: isSubMenu\n    };\n    this.currentItems = eventArgs.items;\n    this.parent.trigger('menuOpen', eventArgs, function (menuOpenArgs) {\n      if (!isSubMenu) {\n        _this.contextMenu.dataBind();\n\n        _this.contextMenu.items = menuOpenArgs.items;\n\n        _this.contextMenu.dataBind();\n      }\n\n      _this.enableItems(_this.disabledItems, false, true);\n\n      args.cancel = menuOpenArgs.cancel;\n\n      if (menuOpenArgs.cancel) {\n        _this.menuTarget = _this.targetNodeElement = _this.currentElement = null;\n      }\n    });\n  };\n\n  ContextMenu.prototype.updateActiveModule = function () {\n    this.parent.activeModule = closest(this.menuTarget, '#' + this.parent.element.id + CLS.TREE_ID) ? 'navigationpane' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.GRID_ID) ? 'detailsview' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.LARGEICON_ID) ? 'largeiconsview' : this.parent.activeModule;\n  };\n  /* istanbul ignore next */\n\n  /**\n   *\n   * @param {Element} target - specifies the target element.\n   * @returns {string} -returns the target view.\n   * @hidden\n   */\n\n\n  ContextMenu.prototype.getTargetView = function (target) {\n    return target.classList.contains(CLS.TREE_VIEW) ? 'TreeView' : target.classList.contains(CLS.GRID_VIEW) ? 'GridView' : target.classList.contains(CLS.ICON_VIEW) ? 'LargeIcon' : target.classList.contains(CLS.LARGE_ICONS) ? 'LargeIcon' : '';\n  };\n\n  ContextMenu.prototype.getItemIndex = function (item) {\n    var itemId = this.getMenuId(item);\n\n    for (var i = 0; i < this.currentItems.length; i++) {\n      if (this.currentItems[i].id === itemId || this.currentItems[i].id === item) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  ContextMenu.prototype.disableItem = function (items) {\n    if (items.length !== 0) {\n      this.disabledItems = this.disabledItems.concat(items);\n    }\n  };\n\n  ContextMenu.prototype.enableItems = function (items, enable, isUniqueId) {\n    for (var i = 0; i < items.length; i++) {\n      if (this.checkValidItem(items[i]) === 1) {\n        this.contextMenu.enableItems([this.getMenuId(items[i])], enable, isUniqueId);\n      } else if (this.checkValidItem(items[i]) === 2) {\n        this.contextMenu.enableItems([items[i]], enable, isUniqueId);\n      }\n    }\n  };\n\n  ContextMenu.prototype.setFolderItem = function (isTree) {\n    this.menuType = 'folder';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.folder.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n\n    if (isTree) {\n      this.disabledItems.push('Open');\n    } else if (this.parent.selectedItems.length !== 1) {\n      this.disabledItems.push('Rename', 'Paste');\n    }\n  };\n\n  ContextMenu.prototype.setFileItem = function () {\n    this.menuType = 'file';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.file.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n\n    if (this.parent.selectedItems.length !== 1) {\n      this.disabledItems.push('Rename');\n    }\n  };\n\n  ContextMenu.prototype.setLayoutItem = function (target) {\n    this.menuType = 'layout';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.layout.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n\n    if (!this.parent.allowMultiSelection || this.parent.view === 'LargeIcons' && closest(target, '#' + this.parent.element.id + CLS.LARGEICON_ID).getElementsByClassName(CLS.EMPTY).length !== 0 || this.parent.view === 'Details' && closest(target, '#' + this.parent.element.id + CLS.GRID_ID).getElementsByClassName(CLS.EMPTY).length !== 0) {\n      this.disabledItems.push('SelectAll');\n    }\n\n    if (this.parent.selectedNodes.length === 0) {\n      this.disabledItems.push('Paste');\n    }\n\n    this.contextMenu.dataBind();\n  };\n\n  ContextMenu.prototype.checkValidItem = function (nameEle) {\n    if (!isNOU(select('#' + this.getMenuId(nameEle), this.currentElement))) {\n      return 1;\n    } else if (!isNOU(select('#' + nameEle, this.currentElement))) {\n      return 2;\n    } else {\n      return -1;\n    }\n  }; // eslint-disable-next-line\n\n\n  ContextMenu.prototype.getMenuItemData = function () {\n    if (this.menuType === 'layout') {\n      return getPathObject(this.parent);\n    } else {\n      // eslint-disable-next-line\n      var args = {\n        target: this.menuTarget\n      };\n      this.parent.notify(events.menuItemData, args);\n      return this.parent.itemData[0];\n    }\n  };\n  /* istanbul ignore next */\n\n\n  ContextMenu.prototype.onSelect = function (args) {\n    var _this = this;\n\n    if (isNOU(args.item) || !args.item.id) {\n      return;\n    }\n\n    var itemText = args.item.id.substr((this.parent.element.id + '_cm_').length); // eslint-disable-next-line\n\n    var details;\n\n    if (itemText === 'refresh' || itemText === 'newfolder' || itemText === 'upload') {\n      details = [getPathObject(this.parent)];\n      this.parent.itemData = details;\n    } else {\n      this.parent.notify(events.selectedData, {});\n\n      if (this.parent.activeModule === 'navigationpane' && itemText === 'open') {\n        details = [this.menuItemData];\n      } else {\n        details = this.parent.itemData;\n      }\n    }\n\n    var eventArgs = {\n      cancel: false,\n      element: args.element,\n      fileDetails: details,\n      item: args.item\n    };\n    this.parent.trigger('menuClick', eventArgs, function (menuClickArgs) {\n      var sItems;\n\n      if (!menuClickArgs.cancel) {\n        // eslint:disable-next-line\n        switch (itemText) {\n          case 'cut':\n            cutFiles(_this.parent);\n            break;\n\n          case 'copy':\n            copyFiles(_this.parent);\n            break;\n\n          case 'paste':\n            if (_this.menuType === 'folder') {\n              if (_this.parent.activeModule === 'largeiconsview' || _this.parent.activeModule === 'detailsview') {\n                _this.parent.folderPath = getFullPath(_this.parent, _this.menuItemData, _this.parent.path);\n              } else {\n                _this.parent.folderPath = '';\n              }\n            } else {\n              _this.parent.folderPath = '';\n            }\n\n            pasteHandler(_this.parent);\n            break;\n\n          case 'delete':\n            for (var j = 0; j < details.length; j++) {\n              if (!hasEditAccess(details[j])) {\n                createDeniedDialog(_this.parent, details[j], events.permissionEdit);\n                return;\n              }\n            }\n\n            createDialog(_this.parent, 'Delete');\n            break;\n\n          /* istanbul ignore next */\n\n          case 'download':\n            for (var i = 0; i < details.length; i++) {\n              if (!hasDownloadAccess(details[i])) {\n                createDeniedDialog(_this.parent, details[i], events.permissionDownload);\n                return;\n              }\n            }\n\n            if (_this.parent.activeModule === 'navigationpane') {\n              _this.parent.notify(events.downloadInit, {});\n            } else if (_this.parent.selectedItems.length > 0) {\n              Download(_this.parent, _this.parent.path, _this.parent.selectedItems);\n            }\n\n            break;\n\n          case 'rename':\n            if (!hasEditAccess(details[0])) {\n              createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n            } else {\n              _this.parent.notify(events.renameInit, {});\n\n              createDialog(_this.parent, 'Rename');\n            }\n\n            break;\n\n          case 'selectall':\n            /* istanbul ignore next */\n            _this.parent.notify(events.selectAllInit, {});\n\n            break;\n\n          case 'refresh':\n            refresh(_this.parent);\n            break;\n\n          case 'open':\n            if (_this.parent.visitedItem) {\n              _this.parent.notify(events.openInit, {\n                target: _this.parent.visitedItem\n              });\n            } else if (_this.parent.activeModule === 'navigationpane') {\n              _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n            }\n\n            break;\n\n          case 'details':\n            _this.parent.notify(events.detailsInit, {});\n\n            sItems = _this.parent.selectedItems;\n\n            if (_this.parent.activeModule === 'navigationpane') {\n              sItems = [];\n            }\n\n            GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n            break;\n\n          case 'newfolder':\n            createNewFolder(_this.parent);\n            break;\n\n          case 'upload':\n            uploadItem(_this.parent);\n            break;\n\n          /* istanbul ignore next */\n\n          case 'name':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n\n          case 'size':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n\n          case 'date':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n\n          case 'ascending':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n\n          case 'descending':\n            /* istanbul ignore next */\n            sortbyClickHandler(_this.parent, args);\n            break;\n\n          /* istanbul ignore next */\n\n          case 'none':\n            /* istanbul ignore next */\n            sortbyClickHandler(_this.parent, args);\n            break;\n\n          /* istanbul ignore next */\n          // eslint:disable-next-line\n\n          case 'largeiconsview':\n            updateLayout(_this.parent, 'LargeIcons');\n            break;\n\n          /* istanbul ignore next */\n          // eslint:disable-next-line\n\n          case 'detailsview':\n            updateLayout(_this.parent, 'Details');\n            break;\n        }\n      }\n    });\n  };\n\n  ContextMenu.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      /* istanbul ignore next */\n      return;\n    }\n\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'cssClass':\n          this.contextMenu.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n          break;\n      }\n    }\n  };\n\n  ContextMenu.prototype.addEventListener = function () {\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.keyboardModule = new KeyboardEvents(this.contextMenu.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n\n  ContextMenu.prototype.removeEventListener = function () {\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.keyboardModule.destroy();\n  };\n\n  ContextMenu.prototype.keyActionHandler = function (e) {\n    switch (e.action) {\n      case 'uparrow':\n      case 'downarrow':\n        e.preventDefault();\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the module name.\n   * @private\n   */\n\n\n  ContextMenu.prototype.getModuleName = function () {\n    return 'contextmenu';\n  };\n\n  ContextMenu.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeEventListener();\n    this.contextMenu.destroy();\n  };\n  /* istanbul ignore next */\n\n\n  ContextMenu.prototype.getItemData = function (data) {\n    var items = [];\n\n    for (var i = 0; i < data.length; i++) {\n      var item = void 0;\n      var itemId = this.getMenuId(data[i]);\n      var itemText = getLocaleText(this.parent, data[i]);\n\n      switch (data[i]) {\n        case '|':\n          item = {\n            separator: true\n          };\n          break;\n\n        case 'Open':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_OPEN\n          };\n          break;\n\n        case 'Upload':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_UPLOAD\n          };\n          break;\n\n        case 'Cut':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_CUT\n          };\n          break;\n\n        case 'Copy':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_COPY\n          };\n          break;\n\n        case 'Paste':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_PASTE\n          };\n          break;\n\n        case 'Delete':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DELETE\n          };\n          break;\n\n        case 'Rename':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_RENAME\n          };\n          break;\n\n        case 'NewFolder':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_NEWFOLDER\n          };\n          break;\n\n        case 'Details':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DETAILS\n          };\n          break;\n\n        case 'SortBy':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_SHORTBY,\n            items: [{\n              id: this.getMenuId('Name'),\n              text: getLocaleText(this.parent, 'Name'),\n              iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : null\n            }, {\n              id: this.getMenuId('Size'),\n              text: getLocaleText(this.parent, 'Size'),\n              iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : null\n            }, {\n              id: this.getMenuId('Date'),\n              text: getLocaleText(this.parent, 'DateModified'),\n              iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : null\n            }, {\n              separator: true\n            }, {\n              id: this.getMenuId('Ascending'),\n              text: getLocaleText(this.parent, 'Ascending'),\n              iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : null\n            }, {\n              id: this.getMenuId('Descending'),\n              text: getLocaleText(this.parent, 'Descending'),\n              iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : null\n            }, {\n              id: this.getMenuId('None'),\n              text: getLocaleText(this.parent, 'None'),\n              iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : null\n            }]\n          };\n          break;\n\n        /* istanbul ignore next */\n\n        case 'View':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n            items: [{\n              id: this.getMenuId('largeiconsview'),\n              text: getLocaleText(this.parent, 'View-LargeIcons'),\n              iconCss: this.parent.view === 'Details' ? null : CLS.TB_OPTION_TICK\n            }, {\n              id: this.getMenuId('detailsview'),\n              text: getLocaleText(this.parent, 'View-Details'),\n              iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : null\n            }]\n          };\n          break;\n\n        case 'Refresh':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_REFRESH\n          };\n          break;\n\n        case 'SelectAll':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_SELECTALL\n          };\n          break;\n\n        /* istanbul ignore next */\n\n        case 'Download':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DOWNLOAD\n          };\n          break;\n\n        /* istanbul ignore next */\n\n        default:\n          item = {\n            id: itemId,\n            text: itemText\n          };\n          break;\n      }\n\n      items.push(item);\n    }\n\n    return items;\n  };\n\n  ContextMenu.prototype.getMenuId = function (id) {\n    return this.parent.element.id + '_cm_' + id.toLowerCase();\n  };\n\n  return ContextMenu;\n}();\n\nexport { ContextMenu };","map":{"version":3,"sources":["/Users/altynbekkuat/Desktop/NomaLytics/node_modules/@syncfusion/ej2-react-richtexteditor/node_modules/@syncfusion/ej2-filemanager/src/file-manager/pop-up/context-menu.js"],"names":["ContextMenu","Menu","isNullOrUndefined","isNOU","createElement","closest","KeyboardEvents","getValue","select","Download","GetDetails","createDialog","cutFiles","copyFiles","refresh","getPathObject","getLocaleText","updateLayout","getFullPath","getCssClass","sortbyClickHandler","pasteHandler","createDeniedDialog","createNewFolder","uploadItem","hasEditAccess","hasDownloadAccess","events","CLS","parent","currentItems","currentElement","disabledItems","render","prototype","keyConfigs","downarrow","uparrow","contextMenu","enableRtl","locale","target","element","id","enableHtmlSanitizer","beforeItemRender","onBeforeItemRender","bind","onSelect","beforeOpen","onBeforeOpen","beforeClose","onBeforeClose","cssClass","ROOT_POPUP","isStringTemplate","appendTo","CONTEXT_MENU_ID","addEventListener","args","item","getMenuId","iconSpan","insertBefore","view","childNodes","setAttribute","ICON_LARGE","MENU_ICON","ICON_GRID","menuTarget","_this","selected","uid","data","treeFolder","event","targetNodeElement","classList","contains","navigationpaneModule","activeNode","getElementsByClassName","FULLROW","targetElement","getTargetView","updateActiveModule","TREE_VIEW","BREADCRUMBBAR_ID","TOOLBAR_ID","cancel","setLayoutItem","EMPTY","MENU_ITEM","SUBMENU_ICON","TREE_ID","eveArgs","ctrlKey","shiftKey","largeiconsviewModule","doSelection","visitedData","getAttribute","detailsviewModule","gridObj","getRowObjectFromUID","selectRows","parseInt","setFileItem","setFolderItem","pathId","push","pasteEle","enablePaste","dataBind","isSubMenu","menuItemData","getMenuItemData","eventArgs","fileDetails","items","menuModule","menuType","trigger","menuOpenArgs","enableItems","activeModule","GRID_ID","LARGEICON_ID","GRID_VIEW","ICON_VIEW","LARGE_ICONS","getItemIndex","itemId","i","length","disableItem","concat","enable","isUniqueId","checkValidItem","isTree","getItemData","contextMenuSettings","folder","map","trim","selectedItems","file","layout","allowMultiSelection","selectedNodes","nameEle","notify","itemData","itemText","substr","details","selectedData","menuClickArgs","sItems","folderPath","path","j","permissionEdit","permissionDownload","downloadInit","renameInit","selectAllInit","visitedItem","openInit","openFileOnContextMenuClick","detailsInit","onPropertyChanged","e","module","getModuleName","_i","_a","Object","keys","newProp","prop","on","destroy","modelChanged","keyboardModule","keyAction","keyActionHandler","eventName","removeEventListener","off","action","preventDefault","isDestroyed","separator","text","iconCss","ICON_OPEN","ICON_UPLOAD","ICON_CUT","ICON_COPY","ICON_PASTE","ICON_DELETE","ICON_RENAME","ICON_NEWFOLDER","ICON_DETAILS","ICON_SHORTBY","sortBy","TB_OPTION_DOT","sortOrder","TB_OPTION_TICK","ICON_REFRESH","ICON_SELECTALL","ICON_DOWNLOAD","toLowerCase"],"mappings":"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","sourcesContent":["import { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, createElement, closest, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, select } from '@syncfusion/ej2-base';\nimport { Download, GetDetails } from './../common/operations';\nimport { createDialog } from './dialog';\nimport { cutFiles, copyFiles, refresh, getPathObject, getLocaleText, updateLayout, getFullPath } from './../common/utility';\nimport { getCssClass, sortbyClickHandler, pasteHandler } from './../common/utility';\nimport { createDeniedDialog, createNewFolder, uploadItem, hasEditAccess, hasDownloadAccess } from './../common/utility';\nimport * as events from './../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * ContextMenu module\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * Constructor for the ContextMenu module\n     *\n     * @param {IFileManager} parent - Specifies the parent element.\n     * @hidden\n     */\n    function ContextMenu(parent) {\n        this.currentItems = [];\n        this.currentElement = null;\n        this.disabledItems = [];\n        this.parent = parent;\n        this.render();\n    }\n    ContextMenu.prototype.render = function () {\n        this.keyConfigs = {\n            downarrow: 'downarrow',\n            uparrow: 'uparrown'\n        };\n        this.contextMenu = new Menu({\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            target: '#' + this.parent.element.id,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            beforeItemRender: this.onBeforeItemRender.bind(this),\n            select: this.onSelect.bind(this),\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this),\n            cssClass: getCssClass(this.parent, CLS.ROOT_POPUP)\n        });\n        this.contextMenu.isStringTemplate = true;\n        this.contextMenu.appendTo('#' + this.parent.element.id + CLS.CONTEXT_MENU_ID);\n        this.addEventListener();\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onBeforeItemRender = function (args) {\n        if (args.item.id === this.getMenuId('largeiconsview')) {\n            var iconSpan = createElement('span');\n            var element = args.element;\n            element.insertBefore(iconSpan, this.parent.view === 'LargeIcons' ? element.childNodes[1] : element.childNodes[0]);\n            iconSpan.setAttribute('class', CLS.ICON_LARGE + ' ' + CLS.MENU_ICON);\n        }\n        if (args.item.id === this.getMenuId('detailsview')) {\n            var iconSpan = createElement('span');\n            var element = args.element;\n            element.insertBefore(iconSpan, this.parent.view === 'Details' ? element.childNodes[1] : element.childNodes[0]);\n            iconSpan.setAttribute('class', CLS.ICON_GRID + ' ' + CLS.MENU_ICON);\n        }\n    };\n    ContextMenu.prototype.onBeforeClose = function () {\n        this.menuTarget = null;\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        this.disabledItems = [];\n        var selected = false;\n        var uid;\n        // eslint-disable-next-line\n        var data;\n        var treeFolder = false;\n        var target = args.event.target;\n        this.menuTarget = this.targetNodeElement = target;\n        this.currentElement = args.element;\n        if (target.classList.contains('e-spinner-pane')) {\n            target = this.parent.navigationpaneModule.activeNode.getElementsByClassName(CLS.FULLROW)[0];\n            this.menuTarget = this.targetNodeElement = target;\n        }\n        this.targetElement = this.parent.view === 'Details' ? closest(target, 'tr.e-row') : target;\n        var view = this.getTargetView(target);\n        this.updateActiveModule();\n        /* istanbul ignore next */\n        if (target.classList.contains(CLS.TREE_VIEW) || closest(target, 'th') ||\n            (closest(target, '#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID)) ||\n            (closest(target, '#' + this.parent.element.id + CLS.TOOLBAR_ID))) {\n            args.cancel = true;\n            // eslint:disable-next-line\n        }\n        else if (!(this.parent.view === 'LargeIcons') && this.targetElement &&\n            this.targetElement.classList.contains('e-emptyrow')) {\n            this.setLayoutItem(target);\n            /* istanbul ignore next */\n        }\n        else if (closest(target, '.' + CLS.EMPTY)) {\n            this.setLayoutItem(target);\n            // eslint:disable-next-line\n        }\n        else if (!target.classList.contains(CLS.MENU_ITEM) &&\n            !target.classList.contains(CLS.MENU_ICON) && !target.classList.contains(CLS.SUBMENU_ICON)) {\n            /* istanbul ignore next */\n            // eslint:disable-next-line\n            if (this.parent.view === 'LargeIcons' && !isNOU(closest(target, 'li')) && !closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n                var eveArgs = { ctrlKey: true, shiftKey: true };\n                if (!closest(target, 'li').classList.contains('e-active')) {\n                    this.parent.largeiconsviewModule.doSelection(target, eveArgs);\n                }\n                // eslint-disable-next-line\n                data = this.parent.visitedData;\n                selected = true;\n            }\n            else if (!isNOU(closest(target, 'tr.e-row'))) {\n                uid = this.targetElement.getAttribute('data-uid');\n                // eslint-disable-next-line\n                data = this.parent.detailsviewModule.gridObj.getRowObjectFromUID(uid).data;\n                if (isNOU(this.targetElement.getAttribute('aria-selected'))) {\n                    /* istanbul ignore next */\n                    this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute('aria-rowindex'), 10)]);\n                }\n                selected = true;\n                /* istanbul ignore next */\n            }\n            else if (closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n                uid = closest(target, 'li').getAttribute('data-uid');\n                treeFolder = true;\n            }\n            /* istanbul ignore next */\n            if (selected) {\n                if (getValue('isFile', data) === true) {\n                    this.setFileItem();\n                }\n                else {\n                    this.setFolderItem(false);\n                }\n                /* istanbul ignore next */\n            }\n            else if (treeFolder) {\n                this.setFolderItem(true);\n                if (uid === this.parent.pathId[0]) {\n                    this.disabledItems.push('Delete', 'Rename', 'Cut', 'Copy');\n                }\n                /* istanbul ignore next */\n                // eslint:disable-next-line\n            }\n            else if (view === 'TreeView' || view === 'GridView' || view === 'LargeIcon') {\n                this.setLayoutItem(target);\n                /* istanbul ignore next */\n            }\n            else {\n                args.cancel = true;\n            }\n        }\n        var pasteEle = select('#' + this.getMenuId('Paste'), this.contextMenu.element);\n        if (!args.cancel && !this.parent.enablePaste &&\n            pasteEle && !pasteEle.classList.contains('e-disabled')) {\n            this.disabledItems.push('Paste');\n        }\n        if (args.cancel) {\n            this.menuTarget = this.currentElement = null;\n            return;\n        }\n        this.contextMenu.dataBind();\n        var isSubMenu = false;\n        if (target.classList.contains(CLS.MENU_ITEM) ||\n            target.classList.contains(CLS.MENU_ICON) || target.classList.contains(CLS.SUBMENU_ICON)) {\n            isSubMenu = true;\n        }\n        this.menuItemData = isSubMenu ? this.menuItemData : this.getMenuItemData();\n        var eventArgs = {\n            fileDetails: [this.menuItemData],\n            element: args.element,\n            target: target,\n            items: isSubMenu ? args.items : this.contextMenu.items,\n            menuModule: this.contextMenu,\n            cancel: false,\n            menuType: this.menuType,\n            isSubMenu: isSubMenu\n        };\n        this.currentItems = eventArgs.items;\n        this.parent.trigger('menuOpen', eventArgs, function (menuOpenArgs) {\n            if (!isSubMenu) {\n                _this.contextMenu.dataBind();\n                _this.contextMenu.items = menuOpenArgs.items;\n                _this.contextMenu.dataBind();\n            }\n            _this.enableItems(_this.disabledItems, false, true);\n            args.cancel = menuOpenArgs.cancel;\n            if (menuOpenArgs.cancel) {\n                _this.menuTarget = _this.targetNodeElement = _this.currentElement = null;\n            }\n        });\n    };\n    ContextMenu.prototype.updateActiveModule = function () {\n        this.parent.activeModule = closest(this.menuTarget, '#' + this.parent.element.id + CLS.TREE_ID) ?\n            'navigationpane' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.GRID_ID) ?\n            'detailsview' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.LARGEICON_ID) ?\n            'largeiconsview' : this.parent.activeModule;\n    };\n    /* istanbul ignore next */\n    /**\n     *\n     * @param {Element} target - specifies the target element.\n     * @returns {string} -returns the target view.\n     * @hidden\n     */\n    ContextMenu.prototype.getTargetView = function (target) {\n        return target.classList.contains(CLS.TREE_VIEW) ?\n            'TreeView' : target.classList.contains(CLS.GRID_VIEW) ?\n            'GridView' : target.classList.contains(CLS.ICON_VIEW) ?\n            'LargeIcon' : target.classList.contains(CLS.LARGE_ICONS) ?\n            'LargeIcon' : '';\n    };\n    ContextMenu.prototype.getItemIndex = function (item) {\n        var itemId = this.getMenuId(item);\n        for (var i = 0; i < this.currentItems.length; i++) {\n            if ((this.currentItems[i].id === itemId) || (this.currentItems[i].id === item)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    ContextMenu.prototype.disableItem = function (items) {\n        if (items.length !== 0) {\n            this.disabledItems = this.disabledItems.concat(items);\n        }\n    };\n    ContextMenu.prototype.enableItems = function (items, enable, isUniqueId) {\n        for (var i = 0; i < items.length; i++) {\n            if (this.checkValidItem(items[i]) === 1) {\n                this.contextMenu.enableItems([this.getMenuId(items[i])], enable, isUniqueId);\n            }\n            else if (this.checkValidItem(items[i]) === 2) {\n                this.contextMenu.enableItems([items[i]], enable, isUniqueId);\n            }\n        }\n    };\n    ContextMenu.prototype.setFolderItem = function (isTree) {\n        this.menuType = 'folder';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.folder.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (isTree) {\n            this.disabledItems.push('Open');\n        }\n        else if (this.parent.selectedItems.length !== 1) {\n            this.disabledItems.push('Rename', 'Paste');\n        }\n    };\n    ContextMenu.prototype.setFileItem = function () {\n        this.menuType = 'file';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.file.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (this.parent.selectedItems.length !== 1) {\n            this.disabledItems.push('Rename');\n        }\n    };\n    ContextMenu.prototype.setLayoutItem = function (target) {\n        this.menuType = 'layout';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.layout.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (!this.parent.allowMultiSelection || ((this.parent.view === 'LargeIcons' &&\n            (closest(target, '#' + this.parent.element.id + CLS.LARGEICON_ID).getElementsByClassName(CLS.EMPTY).length !== 0))\n            || (this.parent.view === 'Details' &&\n                (closest(target, '#' + this.parent.element.id + CLS.GRID_ID).getElementsByClassName(CLS.EMPTY).length !== 0)))) {\n            this.disabledItems.push('SelectAll');\n        }\n        if (this.parent.selectedNodes.length === 0) {\n            this.disabledItems.push('Paste');\n        }\n        this.contextMenu.dataBind();\n    };\n    ContextMenu.prototype.checkValidItem = function (nameEle) {\n        if (!isNOU(select('#' + this.getMenuId(nameEle), this.currentElement))) {\n            return 1;\n        }\n        else if (!isNOU(select('#' + nameEle, this.currentElement))) {\n            return 2;\n        }\n        else {\n            return -1;\n        }\n    };\n    // eslint-disable-next-line\n    ContextMenu.prototype.getMenuItemData = function () {\n        if (this.menuType === 'layout') {\n            return getPathObject(this.parent);\n        }\n        else {\n            // eslint-disable-next-line\n            var args = { target: this.menuTarget };\n            this.parent.notify(events.menuItemData, args);\n            return this.parent.itemData[0];\n        }\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onSelect = function (args) {\n        var _this = this;\n        if (isNOU(args.item) || !args.item.id) {\n            return;\n        }\n        var itemText = args.item.id.substr((this.parent.element.id + '_cm_').length);\n        // eslint-disable-next-line\n        var details;\n        if (itemText === 'refresh' || itemText === 'newfolder' || itemText === 'upload') {\n            details = [getPathObject(this.parent)];\n            this.parent.itemData = details;\n        }\n        else {\n            this.parent.notify(events.selectedData, {});\n            if (this.parent.activeModule === 'navigationpane' && itemText === 'open') {\n                details = [this.menuItemData];\n            }\n            else {\n                details = this.parent.itemData;\n            }\n        }\n        var eventArgs = {\n            cancel: false,\n            element: args.element,\n            fileDetails: details,\n            item: args.item\n        };\n        this.parent.trigger('menuClick', eventArgs, function (menuClickArgs) {\n            var sItems;\n            if (!menuClickArgs.cancel) {\n                // eslint:disable-next-line\n                switch (itemText) {\n                    case 'cut':\n                        cutFiles(_this.parent);\n                        break;\n                    case 'copy':\n                        copyFiles(_this.parent);\n                        break;\n                    case 'paste':\n                        if (_this.menuType === 'folder') {\n                            if ((_this.parent.activeModule === 'largeiconsview') || (_this.parent.activeModule === 'detailsview')) {\n                                _this.parent.folderPath = getFullPath(_this.parent, _this.menuItemData, _this.parent.path);\n                            }\n                            else {\n                                _this.parent.folderPath = '';\n                            }\n                        }\n                        else {\n                            _this.parent.folderPath = '';\n                        }\n                        pasteHandler(_this.parent);\n                        break;\n                    case 'delete':\n                        for (var j = 0; j < details.length; j++) {\n                            if (!hasEditAccess(details[j])) {\n                                createDeniedDialog(_this.parent, details[j], events.permissionEdit);\n                                return;\n                            }\n                        }\n                        createDialog(_this.parent, 'Delete');\n                        break;\n                    /* istanbul ignore next */\n                    case 'download':\n                        for (var i = 0; i < details.length; i++) {\n                            if (!hasDownloadAccess(details[i])) {\n                                createDeniedDialog(_this.parent, details[i], events.permissionDownload);\n                                return;\n                            }\n                        }\n                        if (_this.parent.activeModule === 'navigationpane') {\n                            _this.parent.notify(events.downloadInit, {});\n                        }\n                        else if (_this.parent.selectedItems.length > 0) {\n                            Download(_this.parent, _this.parent.path, _this.parent.selectedItems);\n                        }\n                        break;\n                    case 'rename':\n                        if (!hasEditAccess(details[0])) {\n                            createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n                        }\n                        else {\n                            _this.parent.notify(events.renameInit, {});\n                            createDialog(_this.parent, 'Rename');\n                        }\n                        break;\n                    case 'selectall':\n                        /* istanbul ignore next */\n                        _this.parent.notify(events.selectAllInit, {});\n                        break;\n                    case 'refresh':\n                        refresh(_this.parent);\n                        break;\n                    case 'open':\n                        if (_this.parent.visitedItem) {\n                            _this.parent.notify(events.openInit, { target: _this.parent.visitedItem });\n                        }\n                        else if (_this.parent.activeModule === 'navigationpane') {\n                            _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n                        }\n                        break;\n                    case 'details':\n                        _this.parent.notify(events.detailsInit, {});\n                        sItems = _this.parent.selectedItems;\n                        if (_this.parent.activeModule === 'navigationpane') {\n                            sItems = [];\n                        }\n                        GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n                        break;\n                    case 'newfolder':\n                        createNewFolder(_this.parent);\n                        break;\n                    case 'upload':\n                        uploadItem(_this.parent);\n                        break;\n                    /* istanbul ignore next */\n                    case 'name':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'size':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'date':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'ascending':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'descending':\n                        /* istanbul ignore next */\n                        sortbyClickHandler(_this.parent, args);\n                        break;\n                    /* istanbul ignore next */\n                    case 'none':\n                        /* istanbul ignore next */\n                        sortbyClickHandler(_this.parent, args);\n                        break;\n                    /* istanbul ignore next */\n                    // eslint:disable-next-line\n                    case 'largeiconsview':\n                        updateLayout(_this.parent, 'LargeIcons');\n                        break;\n                    /* istanbul ignore next */\n                    // eslint:disable-next-line\n                    case 'detailsview':\n                        updateLayout(_this.parent, 'Details');\n                        break;\n                }\n            }\n        });\n    };\n    ContextMenu.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            /* istanbul ignore next */\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    this.contextMenu.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n                    break;\n            }\n        }\n    };\n    ContextMenu.prototype.addEventListener = function () {\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.keyboardModule = new KeyboardEvents(this.contextMenu.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    ContextMenu.prototype.removeEventListener = function () {\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.keyboardModule.destroy();\n    };\n    ContextMenu.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'uparrow':\n            case 'downarrow':\n                e.preventDefault();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the module name.\n     * @private\n     */\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextmenu';\n    };\n    ContextMenu.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.contextMenu.destroy();\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.getItemData = function (data) {\n        var items = [];\n        for (var i = 0; i < data.length; i++) {\n            var item = void 0;\n            var itemId = this.getMenuId(data[i]);\n            var itemText = getLocaleText(this.parent, data[i]);\n            switch (data[i]) {\n                case '|':\n                    item = { separator: true };\n                    break;\n                case 'Open':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_OPEN };\n                    break;\n                case 'Upload':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_UPLOAD };\n                    break;\n                case 'Cut':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_CUT };\n                    break;\n                case 'Copy':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_COPY };\n                    break;\n                case 'Paste':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_PASTE };\n                    break;\n                case 'Delete':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DELETE };\n                    break;\n                case 'Rename':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_RENAME };\n                    break;\n                case 'NewFolder':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_NEWFOLDER };\n                    break;\n                case 'Details':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DETAILS };\n                    break;\n                case 'SortBy':\n                    item = {\n                        id: itemId, text: itemText, iconCss: CLS.ICON_SHORTBY,\n                        items: [\n                            {\n                                id: this.getMenuId('Name'), text: getLocaleText(this.parent, 'Name'),\n                                iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : null\n                            },\n                            {\n                                id: this.getMenuId('Size'), text: getLocaleText(this.parent, 'Size'),\n                                iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : null\n                            },\n                            {\n                                id: this.getMenuId('Date'), text: getLocaleText(this.parent, 'DateModified'),\n                                iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : null\n                            },\n                            { separator: true },\n                            {\n                                id: this.getMenuId('Ascending'), text: getLocaleText(this.parent, 'Ascending'),\n                                iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : null\n                            },\n                            {\n                                id: this.getMenuId('Descending'), text: getLocaleText(this.parent, 'Descending'),\n                                iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : null\n                            },\n                            {\n                                id: this.getMenuId('None'), text: getLocaleText(this.parent, 'None'),\n                                iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : null\n                            }\n                        ]\n                    };\n                    break;\n                /* istanbul ignore next */\n                case 'View':\n                    item = {\n                        id: itemId, text: itemText, iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n                        items: [\n                            {\n                                id: this.getMenuId('largeiconsview'), text: getLocaleText(this.parent, 'View-LargeIcons'),\n                                iconCss: this.parent.view === 'Details' ? null : CLS.TB_OPTION_TICK\n                            },\n                            {\n                                id: this.getMenuId('detailsview'), text: getLocaleText(this.parent, 'View-Details'),\n                                iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : null\n                            }\n                        ]\n                    };\n                    break;\n                case 'Refresh':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_REFRESH };\n                    break;\n                case 'SelectAll':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_SELECTALL };\n                    break;\n                /* istanbul ignore next */\n                case 'Download':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DOWNLOAD };\n                    break;\n                /* istanbul ignore next */\n                default:\n                    item = { id: itemId, text: itemText };\n                    break;\n            }\n            items.push(item);\n        }\n        return items;\n    };\n    ContextMenu.prototype.getMenuId = function (id) {\n        return this.parent.element.id + '_cm_' + id.toLowerCase();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n"]},"metadata":{},"sourceType":"module"}