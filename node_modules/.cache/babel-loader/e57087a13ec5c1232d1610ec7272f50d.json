{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, remove, isNullOrUndefined, closest, extend } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { FormValidator, NumericTextBox, TextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Dialog module is used to perform card actions.\n */\n\nvar KanbanDialog =\n/** @class */\nfunction () {\n  /**\n   * Constructor for dialog module\n   *\n   * @param {Kanban} parent Accepts the kanban instance\n   */\n  function KanbanDialog(parent) {\n    this.preventUpdate = false;\n    this.parent = parent;\n  }\n\n  KanbanDialog.prototype.openDialog = function (action, data) {\n    this.action = action;\n    this.parent.activeCardData.data = data;\n    this.renderDialog(data, action);\n    this.dialogObj.show();\n  };\n\n  KanbanDialog.prototype.closeDialog = function () {\n    this.dialogObj.hide();\n  };\n\n  KanbanDialog.prototype.renderDialog = function (args, action) {\n    this.element = createElement('div', {\n      id: this.parent.element.id + '_dialog_wrapper'\n    });\n    this.parent.element.appendChild(this.element);\n    var dialogModel = {\n      buttons: this.getDialogButtons(action),\n      content: this.getDialogContent(args, action),\n      cssClass: cls.DIALOG_CLASS,\n      enableRtl: this.parent.enableRtl,\n      header: this.parent.localeObj.getConstant(action === 'Add' ? 'addTitle' : action === 'Edit' ? 'editTitle' : 'deleteTitle'),\n      height: 'auto',\n      isModal: true,\n      showCloseIcon: true,\n      width: action === 'Delete' ? 400 : 350,\n      visible: false,\n      beforeOpen: this.onBeforeDialogOpen.bind(this),\n      beforeClose: this.onBeforeDialogClose.bind(this)\n    };\n    this.dialogObj = new Dialog(extend(dialogModel, action !== 'Delete' ? this.parent.dialogSettings.model || {} : {}), this.element);\n\n    if (action !== 'Delete') {\n      this.applyFormValidation();\n    }\n\n    this.dialogObj.element.querySelector('.e-dlg-closeicon-btn').title = this.parent.localeObj.getConstant('close');\n  };\n\n  KanbanDialog.prototype.getDialogContent = function (args, action) {\n    if (action === 'Delete') {\n      return this.parent.localeObj.getConstant('deleteContent');\n    } else {\n      var container = createElement('div', {\n        className: cls.FORM_WRAPPER_CLASS\n      });\n      var form = createElement('form', {\n        id: this.parent.element.id + 'EditForm',\n        className: cls.FORM_CLASS,\n        attrs: {\n          onsubmit: 'return false;'\n        }\n      });\n\n      if (this.parent.dialogSettings.template) {\n        if (args) {\n          this.destroyComponents();\n          [].slice.call(form.childNodes).forEach(function (node) {\n            return remove(node);\n          });\n        }\n\n        var templateId = this.parent.element.id + '_dialogTemplate';\n        var dialogTemplate = this.parent.templateParser(this.parent.dialogSettings.template)(args, this.parent, 'dialogTemplate', templateId, false);\n        append(dialogTemplate, form);\n        this.parent.renderTemplates();\n      } else {\n        var dialogWrapper = createElement('div', {\n          className: cls.DIALOG_CONTENT_CONTAINER\n        });\n        form.appendChild(dialogWrapper);\n        var table = createElement('table');\n        dialogWrapper.appendChild(table);\n        var dialogFields = this.getDialogFields();\n\n        for (var _i = 0, dialogFields_1 = dialogFields; _i < dialogFields_1.length; _i++) {\n          var field = dialogFields_1[_i];\n          var tr = createElement('tr');\n          table.appendChild(tr);\n          tr.appendChild(createElement('td', {\n            className: 'e-label',\n            innerHTML: field.text ? field.text : field.key\n          }));\n          var td = createElement('td');\n          tr.appendChild(td);\n          td.appendChild(this.renderComponents(field));\n        }\n      }\n\n      container.appendChild(form);\n      return container;\n    }\n  };\n\n  KanbanDialog.prototype.getDialogFields = function () {\n    var fields = this.parent.dialogSettings.fields;\n\n    if (fields.length === 0) {\n      fields = [{\n        text: 'ID',\n        key: this.parent.cardSettings.headerField,\n        type: 'TextBox'\n      }, {\n        key: this.parent.keyField,\n        type: 'DropDown'\n      }, {\n        key: this.parent.cardSettings.contentField,\n        type: 'TextArea'\n      }];\n\n      if (this.parent.sortSettings.field) {\n        fields.splice(fields.length - 1, 0, {\n          key: this.parent.sortSettings.field,\n          type: 'TextBox'\n        });\n      }\n\n      if (this.parent.swimlaneSettings.keyField) {\n        fields.splice(fields.length - 1, 0, {\n          key: this.parent.swimlaneSettings.keyField,\n          type: 'DropDown'\n        });\n      }\n    }\n\n    return fields;\n  };\n\n  KanbanDialog.prototype.getDialogButtons = function (action) {\n    var primaryButtonClass = action === 'Delete' ? 'e-dialog-yes' : action === 'Add' ? 'e-dialog-add' : 'e-dialog-edit';\n    var flatButtonClass = action === 'Delete' ? 'e-dialog-no' : 'e-dialog-cancel';\n    var dialogButtons = [{\n      buttonModel: {\n        cssClass: 'e-flat ' + primaryButtonClass,\n        isPrimary: true,\n        content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'save' : 'yes')\n      },\n      click: this.dialogButtonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-flat ' + flatButtonClass,\n        isPrimary: false,\n        content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'cancel' : 'no')\n      },\n      click: this.dialogButtonClick.bind(this)\n    }];\n\n    if (action === 'Edit') {\n      var deleteButton = {\n        buttonModel: {\n          cssClass: 'e-flat e-dialog-delete',\n          isPrimary: false,\n          content: this.parent.localeObj.getConstant('delete')\n        },\n        click: this.dialogButtonClick.bind(this)\n      };\n      dialogButtons.splice(0, 0, deleteButton);\n    }\n\n    return dialogButtons;\n  };\n\n  KanbanDialog.prototype.renderComponents = function (field) {\n    var wrapper = createElement('div', {\n      className: field.key + '_wrapper'\n    });\n    var element = createElement('input', {\n      className: cls.FIELD_CLASS,\n      attrs: {\n        'name': field.key\n      }\n    });\n    wrapper.appendChild(element);\n    var divElement;\n    var dropDownOptions;\n    var controlObj;\n    var fieldValue = this.parent.activeCardData.data ? this.parent.activeCardData.data[field.key] : null;\n\n    switch (field.type) {\n      case 'DropDown':\n        if (field.key === this.parent.keyField) {\n          var currentKeys = this.parent.layoutModule.columnKeys;\n\n          if (this.parent.actionModule.hideColumnKeys.length > 0) {\n            currentKeys = [];\n\n            for (var i = 0; i < this.parent.columns.length; i++) {\n              if (this.parent.layoutModule.isColumnVisible(this.parent.columns[i])) {\n                var isNumeric = typeof this.parent.columns[i].keyField === 'number';\n\n                if (isNumeric) {\n                  currentKeys = currentKeys.concat(this.parent.columns[i].keyField.toString());\n                } else {\n                  currentKeys = currentKeys.concat(this.parent.columns[i].keyField.split(',').map(function (e) {\n                    return e.trim();\n                  }));\n                }\n              }\n            }\n          }\n\n          dropDownOptions = {\n            dataSource: currentKeys,\n            value: fieldValue ? fieldValue.toString() : fieldValue\n          };\n        } else if (field.key === this.parent.swimlaneSettings.keyField) {\n          dropDownOptions = {\n            dataSource: [].slice.call(this.parent.layoutModule.kanbanRows),\n            fields: {\n              text: 'textField',\n              value: 'keyField'\n            },\n            value: fieldValue\n          };\n        }\n\n        controlObj = new DropDownList(dropDownOptions);\n        break;\n\n      case 'Numeric':\n        controlObj = new NumericTextBox({\n          value: fieldValue\n        });\n        break;\n\n      case 'TextBox':\n        controlObj = new TextBox({\n          value: fieldValue\n        });\n\n        if (fieldValue && this.parent.cardSettings.headerField === field.key) {\n          controlObj.enabled = false;\n        }\n\n        break;\n\n      case 'TextArea':\n        remove(element);\n        divElement = createElement('div');\n        element = createElement('textarea', {\n          className: cls.FIELD_CLASS,\n          attrs: {\n            'name': field.key,\n            'rows': '3'\n          },\n          innerHTML: fieldValue\n        });\n        wrapper.appendChild(divElement).appendChild(element);\n        break;\n\n      default:\n        break;\n    }\n\n    if (controlObj) {\n      controlObj.appendTo(element);\n    }\n\n    return wrapper;\n  };\n\n  KanbanDialog.prototype.onBeforeDialogOpen = function (args) {\n    var _this = this;\n\n    var eventProp = {\n      data: this.parent.activeCardData.data,\n      cancel: false,\n      element: this.element,\n      target: this.parent.activeCardData.element,\n      requestType: this.action\n    };\n    this.storeElement = document.activeElement;\n\n    if (parseInt(args.maxHeight, 10) <= 250) {\n      args.maxHeight = '250px';\n    }\n\n    this.parent.trigger(events.dialogOpen, eventProp, function (openArgs) {\n      args.cancel = openArgs.cancel;\n\n      if (openArgs.cancel) {\n        _this.destroy();\n      }\n    });\n  };\n\n  KanbanDialog.prototype.onBeforeDialogClose = function (args) {\n    var _this = this;\n\n    var formInputs = this.getFormElements();\n    var cardObj = {};\n\n    if (args.isInteracted) {\n      /* close icon preventing data update */\n      this.preventUpdate = true;\n    }\n\n    if (!this.preventUpdate) {\n      for (var _i = 0, formInputs_1 = formInputs; _i < formInputs_1.length; _i++) {\n        var input = formInputs_1[_i];\n        var columnName = input.name || this.getColumnName(input);\n\n        if (!isNullOrUndefined(columnName) && columnName !== '') {\n          var value = this.getValueFromElement(input);\n\n          if (columnName === this.parent.cardSettings.headerField) {\n            value = this.getIDType() === 'string' ? value : parseInt(value, 10);\n          }\n\n          cardObj[columnName] = value;\n        }\n      }\n    }\n\n    this.preventUpdate = false;\n    cardObj = extend(this.parent.activeCardData.data, cardObj);\n    var eventProp = {\n      data: cardObj,\n      cancel: false,\n      element: this.element,\n      requestType: this.action\n    };\n    this.parent.trigger(events.dialogClose, eventProp, function (closeArgs) {\n      args.cancel = closeArgs.cancel;\n\n      if (!closeArgs.cancel) {\n        _this.cardData = eventProp.data;\n\n        _this.destroy();\n\n        _this.parent.actionModule.SingleCardSelection(_this.cardData);\n      }\n    });\n  };\n\n  KanbanDialog.prototype.getIDType = function () {\n    if (this.parent.kanbanData.length !== 0) {\n      return typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField];\n    }\n\n    return 'string';\n  };\n\n  KanbanDialog.prototype.applyFormValidation = function () {\n    var _this = this;\n\n    var form = this.element.querySelector('.' + cls.FORM_CLASS);\n    var rules = {};\n\n    for (var _i = 0, _a = this.parent.dialogSettings.fields; _i < _a.length; _i++) {\n      var field = _a[_i];\n      rules[field.key] = field.validationRules && Object.keys(field.validationRules).length > 0 ? field.validationRules : null;\n    }\n\n    this.formObj = new FormValidator(form, {\n      rules: rules,\n      customPlacement: function (inputElement, error) {\n        var id = error.getAttribute('for');\n\n        var elem = _this.element.querySelector('#' + id + '_Error');\n\n        if (!elem) {\n          _this.createTooltip(inputElement, error, id, '');\n        }\n      },\n      validationComplete: function (args) {\n        var elem = _this.element.querySelector('#' + args.inputName + '_Error');\n\n        if (elem) {\n          elem.style.display = args.status === 'failure' ? '' : 'none';\n        }\n      }\n    });\n  };\n\n  KanbanDialog.prototype.createTooltip = function (element, error, name, display) {\n    var dlgContent;\n    var client;\n    var inputClient = element.parentElement.getBoundingClientRect();\n\n    if (this.element.classList.contains(cls.DIALOG_CLASS)) {\n      dlgContent = this.element;\n      client = this.element.getBoundingClientRect();\n    } else {\n      dlgContent = this.element.querySelector('.e-kanban-dialog .e-dlg-content');\n      client = dlgContent.getBoundingClientRect();\n    }\n\n    var div = createElement('div', {\n      className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n      id: name + '_Error',\n      styles: 'display:' + display + ';top:' + (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' + (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n    });\n    var content = createElement('div', {\n      className: 'e-tip-content'\n    });\n    content.appendChild(error);\n    var arrow = createElement('div', {\n      className: 'e-arrow-tip e-tip-top'\n    });\n    arrow.appendChild(createElement('div', {\n      className: 'e-arrow-tip-outer e-tip-top'\n    }));\n    arrow.appendChild(createElement('div', {\n      className: 'e-arrow-tip-inner e-tip-top'\n    }));\n    div.appendChild(content);\n    div.appendChild(arrow);\n    dlgContent.appendChild(div);\n    div.style.left = parseInt(div.style.left, 10) - div.offsetWidth / 2 + 'px';\n  };\n\n  KanbanDialog.prototype.destroyToolTip = function () {\n    if (this.element) {\n      this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS).forEach(function (node) {\n        return remove(node);\n      });\n    }\n\n    if (this.formObj && this.formObj.element) {\n      this.formObj.reset();\n    }\n  };\n\n  KanbanDialog.prototype.dialogButtonClick = function (event) {\n    var target = event.target.cloneNode(true);\n    var id = this.formObj.element.id;\n\n    if (document.getElementById(id) && this.formObj.validate() && (target.classList.contains('e-dialog-edit') || target.classList.contains('e-dialog-add'))) {\n      this.dialogObj.hide();\n\n      if (target.classList.contains('e-dialog-edit')) {\n        var activeCard = this.parent.activeCardData;\n        var updateIndex = void 0;\n\n        if (activeCard.data[this.parent.keyField] === this.cardData[this.parent.keyField] && activeCard.element) {\n          updateIndex = [].slice.call(activeCard.element.parentElement.children).indexOf(activeCard.element);\n        }\n\n        this.parent.crudModule.updateCard(this.cardData, updateIndex);\n      }\n\n      if (target.classList.contains('e-dialog-add')) {\n        this.parent.crudModule.addCard(this.cardData);\n      }\n\n      this.parent.actionModule.SingleCardSelection(this.cardData);\n      this.cardData = null;\n    }\n\n    if (!target.classList.contains('e-dialog-edit') && !target.classList.contains('e-dialog-add')) {\n      if (target.classList.contains('e-dialog-cancel')) {\n        this.preventUpdate = true;\n      }\n\n      this.dialogObj.hide();\n\n      if (target.classList.contains('e-dialog-yes')) {\n        this.parent.crudModule.deleteCard(this.parent.activeCardData.data);\n      } else if (target.classList.contains('e-dialog-no')) {\n        this.openDialog('Edit', this.parent.activeCardData.data);\n      } else if (target.classList.contains('e-dialog-delete')) {\n        this.openDialog('Delete', this.parent.activeCardData.data);\n      }\n    }\n  };\n\n  KanbanDialog.prototype.getFormElements = function () {\n    var elements = [].slice.call(this.element.querySelectorAll('.' + cls.FIELD_CLASS));\n    var validElements = [];\n\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n      var element = elements_1[_i];\n\n      if (element.classList.contains('e-control')) {\n        validElements.push(element);\n      } else if (element.querySelector('.e-control')) {\n        validElements.push(element.querySelector('.e-control'));\n      } else {\n        validElements.push(element);\n      }\n    }\n\n    return validElements;\n  };\n\n  KanbanDialog.prototype.getColumnName = function (element) {\n    var attrName = element.getAttribute('data-name') || '';\n\n    if (attrName === '') {\n      var isDropDowns = false;\n      var fieldSelector = '';\n\n      if (element.classList.contains('e-dropdownlist') || element.classList.contains('e-multiselect')) {\n        fieldSelector = element.classList.contains('e-dropdownlist') ? 'e-ddl' : 'e-multiselect';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-numerictextbox')) {\n        fieldSelector = 'e-numeric';\n      }\n\n      var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n      var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n\n      if (control) {\n        var attrEle = control.querySelector('[name]');\n\n        if (attrEle) {\n          attrName = attrEle.name;\n        }\n      }\n    }\n\n    return attrName;\n  };\n\n  KanbanDialog.prototype.getValueFromElement = function (element) {\n    var value;\n\n    if (element.classList.contains('e-dropdownlist')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-multiselect')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-checkbox')) {\n      value = element.ej2_instances[0].checked;\n    } else {\n      if (element.type === 'checkbox') {\n        value = element.checked;\n      } else {\n        value = element.value;\n      }\n    }\n\n    return value;\n  };\n\n  KanbanDialog.prototype.destroyComponents = function () {\n    var formelement = this.getFormElements();\n\n    for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n      var element = formelement_1[_i];\n      var instance = element.ej2_instances;\n\n      if (instance && instance.length > 0) {\n        instance.forEach(function (node) {\n          return node.destroy();\n        });\n      }\n    }\n  };\n\n  KanbanDialog.prototype.destroy = function () {\n    this.destroyToolTip();\n    this.destroyComponents();\n\n    if (this.dialogObj) {\n      this.dialogObj.destroy();\n      this.storeElement.focus();\n      this.dialogObj = null;\n      remove(this.element);\n      this.element = null;\n    }\n  };\n\n  return KanbanDialog;\n}();\n\nexport { KanbanDialog };","map":{"version":3,"sources":["/Users/altynbekkuat/Desktop/reactAnalyt/node_modules/@syncfusion/ej2-kanban/src/kanban/actions/dialog.js"],"names":["append","createElement","remove","isNullOrUndefined","closest","extend","DropDownList","FormValidator","NumericTextBox","TextBox","Dialog","events","cls","KanbanDialog","parent","preventUpdate","prototype","openDialog","action","data","activeCardData","renderDialog","dialogObj","show","closeDialog","hide","args","element","id","appendChild","dialogModel","buttons","getDialogButtons","content","getDialogContent","cssClass","DIALOG_CLASS","enableRtl","header","localeObj","getConstant","height","isModal","showCloseIcon","width","visible","beforeOpen","onBeforeDialogOpen","bind","beforeClose","onBeforeDialogClose","dialogSettings","model","applyFormValidation","querySelector","title","container","className","FORM_WRAPPER_CLASS","form","FORM_CLASS","attrs","onsubmit","template","destroyComponents","slice","call","childNodes","forEach","node","templateId","dialogTemplate","templateParser","renderTemplates","dialogWrapper","DIALOG_CONTENT_CONTAINER","table","dialogFields","getDialogFields","_i","dialogFields_1","length","field","tr","innerHTML","text","key","td","renderComponents","fields","cardSettings","headerField","type","keyField","contentField","sortSettings","splice","swimlaneSettings","primaryButtonClass","flatButtonClass","dialogButtons","buttonModel","isPrimary","click","dialogButtonClick","deleteButton","wrapper","FIELD_CLASS","divElement","dropDownOptions","controlObj","fieldValue","currentKeys","layoutModule","columnKeys","actionModule","hideColumnKeys","i","columns","isColumnVisible","isNumeric","concat","toString","split","map","e","trim","dataSource","value","kanbanRows","enabled","appendTo","_this","eventProp","cancel","target","requestType","storeElement","document","activeElement","parseInt","maxHeight","trigger","dialogOpen","openArgs","destroy","formInputs","getFormElements","cardObj","isInteracted","formInputs_1","input","columnName","name","getColumnName","getValueFromElement","getIDType","dialogClose","closeArgs","cardData","SingleCardSelection","kanbanData","rules","_a","validationRules","Object","keys","formObj","customPlacement","inputElement","error","getAttribute","elem","createTooltip","validationComplete","inputName","style","display","status","dlgContent","client","inputClient","parentElement","getBoundingClientRect","classList","contains","div","ERROR_VALIDATION_CLASS","styles","bottom","top","scrollTop","left","scrollLeft","arrow","offsetWidth","destroyToolTip","querySelectorAll","reset","event","cloneNode","getElementById","validate","activeCard","updateIndex","children","indexOf","crudModule","updateCard","addCard","deleteCard","elements","validElements","elements_1","push","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","ej2_instances","checked","formelement","formelement_1","instance","focus"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, remove, isNullOrUndefined, closest, extend } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { FormValidator, NumericTextBox, TextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Dialog module is used to perform card actions.\n */\nvar KanbanDialog = /** @class */ (function () {\n    /**\n     * Constructor for dialog module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function KanbanDialog(parent) {\n        this.preventUpdate = false;\n        this.parent = parent;\n    }\n    KanbanDialog.prototype.openDialog = function (action, data) {\n        this.action = action;\n        this.parent.activeCardData.data = data;\n        this.renderDialog(data, action);\n        this.dialogObj.show();\n    };\n    KanbanDialog.prototype.closeDialog = function () {\n        this.dialogObj.hide();\n    };\n    KanbanDialog.prototype.renderDialog = function (args, action) {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            buttons: this.getDialogButtons(action),\n            content: this.getDialogContent(args, action),\n            cssClass: cls.DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            header: this.parent.localeObj.getConstant(action === 'Add' ? 'addTitle' : action === 'Edit' ? 'editTitle' : 'deleteTitle'),\n            height: 'auto',\n            isModal: true,\n            showCloseIcon: true,\n            width: (action === 'Delete') ? 400 : 350,\n            visible: false,\n            beforeOpen: this.onBeforeDialogOpen.bind(this),\n            beforeClose: this.onBeforeDialogClose.bind(this)\n        };\n        this.dialogObj = new Dialog(extend(dialogModel, action !== 'Delete' ? (this.parent.dialogSettings.model || {}) : {}), this.element);\n        if (action !== 'Delete') {\n            this.applyFormValidation();\n        }\n        this.dialogObj.element.querySelector('.e-dlg-closeicon-btn').title = this.parent.localeObj.getConstant('close');\n    };\n    KanbanDialog.prototype.getDialogContent = function (args, action) {\n        if (action === 'Delete') {\n            return this.parent.localeObj.getConstant('deleteContent');\n        }\n        else {\n            var container = createElement('div', { className: cls.FORM_WRAPPER_CLASS });\n            var form = createElement('form', {\n                id: this.parent.element.id + 'EditForm',\n                className: cls.FORM_CLASS, attrs: { onsubmit: 'return false;' }\n            });\n            if (this.parent.dialogSettings.template) {\n                if (args) {\n                    this.destroyComponents();\n                    [].slice.call(form.childNodes).forEach(function (node) { return remove(node); });\n                }\n                var templateId = this.parent.element.id + '_dialogTemplate';\n                var dialogTemplate = this.parent.templateParser(this.parent.dialogSettings.template)(args, this.parent, 'dialogTemplate', templateId, false);\n                append(dialogTemplate, form);\n                this.parent.renderTemplates();\n            }\n            else {\n                var dialogWrapper = createElement('div', { className: cls.DIALOG_CONTENT_CONTAINER });\n                form.appendChild(dialogWrapper);\n                var table = createElement('table');\n                dialogWrapper.appendChild(table);\n                var dialogFields = this.getDialogFields();\n                for (var _i = 0, dialogFields_1 = dialogFields; _i < dialogFields_1.length; _i++) {\n                    var field = dialogFields_1[_i];\n                    var tr = createElement('tr');\n                    table.appendChild(tr);\n                    tr.appendChild(createElement('td', { className: 'e-label', innerHTML: field.text ? field.text : field.key }));\n                    var td = createElement('td');\n                    tr.appendChild(td);\n                    td.appendChild(this.renderComponents(field));\n                }\n            }\n            container.appendChild(form);\n            return container;\n        }\n    };\n    KanbanDialog.prototype.getDialogFields = function () {\n        var fields = this.parent.dialogSettings.fields;\n        if (fields.length === 0) {\n            fields = [\n                { text: 'ID', key: this.parent.cardSettings.headerField, type: 'TextBox' },\n                { key: this.parent.keyField, type: 'DropDown' },\n                { key: this.parent.cardSettings.contentField, type: 'TextArea' }\n            ];\n            if (this.parent.sortSettings.field) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.sortSettings.field, type: 'TextBox' });\n            }\n            if (this.parent.swimlaneSettings.keyField) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.swimlaneSettings.keyField, type: 'DropDown' });\n            }\n        }\n        return fields;\n    };\n    KanbanDialog.prototype.getDialogButtons = function (action) {\n        var primaryButtonClass = action === 'Delete' ? 'e-dialog-yes' : action === 'Add' ? 'e-dialog-add' : 'e-dialog-edit';\n        var flatButtonClass = action === 'Delete' ? 'e-dialog-no' : 'e-dialog-cancel';\n        var dialogButtons = [\n            {\n                buttonModel: {\n                    cssClass: 'e-flat ' + primaryButtonClass, isPrimary: true,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'save' : 'yes')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }, {\n                buttonModel: {\n                    cssClass: 'e-flat ' + flatButtonClass, isPrimary: false,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'cancel' : 'no')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (action === 'Edit') {\n            var deleteButton = {\n                buttonModel: { cssClass: 'e-flat e-dialog-delete', isPrimary: false, content: this.parent.localeObj.getConstant('delete') },\n                click: this.dialogButtonClick.bind(this)\n            };\n            dialogButtons.splice(0, 0, deleteButton);\n        }\n        return dialogButtons;\n    };\n    KanbanDialog.prototype.renderComponents = function (field) {\n        var wrapper = createElement('div', { className: field.key + '_wrapper' });\n        var element = createElement('input', { className: cls.FIELD_CLASS, attrs: { 'name': field.key } });\n        wrapper.appendChild(element);\n        var divElement;\n        var dropDownOptions;\n        var controlObj;\n        var fieldValue = this.parent.activeCardData.data ?\n            this.parent.activeCardData.data[field.key] : null;\n        switch (field.type) {\n            case 'DropDown':\n                if (field.key === this.parent.keyField) {\n                    var currentKeys = this.parent.layoutModule.columnKeys;\n                    if (this.parent.actionModule.hideColumnKeys.length > 0) {\n                        currentKeys = [];\n                        for (var i = 0; i < this.parent.columns.length; i++) {\n                            if (this.parent.layoutModule.isColumnVisible(this.parent.columns[i])) {\n                                var isNumeric = typeof this.parent.columns[i].keyField === 'number';\n                                if (isNumeric) {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.toString());\n                                }\n                                else {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.split(',').map(function (e) { return e.trim(); }));\n                                }\n                            }\n                        }\n                    }\n                    dropDownOptions = { dataSource: currentKeys, value: fieldValue ? fieldValue.toString() : fieldValue };\n                }\n                else if (field.key === this.parent.swimlaneSettings.keyField) {\n                    dropDownOptions = {\n                        dataSource: [].slice.call(this.parent.layoutModule.kanbanRows),\n                        fields: { text: 'textField', value: 'keyField' }, value: fieldValue\n                    };\n                }\n                controlObj = new DropDownList(dropDownOptions);\n                break;\n            case 'Numeric':\n                controlObj = new NumericTextBox({ value: fieldValue });\n                break;\n            case 'TextBox':\n                controlObj = new TextBox({ value: fieldValue });\n                if (fieldValue && this.parent.cardSettings.headerField === field.key) {\n                    controlObj.enabled = false;\n                }\n                break;\n            case 'TextArea':\n                remove(element);\n                divElement = createElement('div');\n                element = createElement('textarea', {\n                    className: cls.FIELD_CLASS, attrs: { 'name': field.key, 'rows': '3' },\n                    innerHTML: fieldValue\n                });\n                wrapper.appendChild(divElement).appendChild(element);\n                break;\n            default:\n                break;\n        }\n        if (controlObj) {\n            controlObj.appendTo(element);\n        }\n        return wrapper;\n    };\n    KanbanDialog.prototype.onBeforeDialogOpen = function (args) {\n        var _this = this;\n        var eventProp = {\n            data: this.parent.activeCardData.data,\n            cancel: false, element: this.element,\n            target: this.parent.activeCardData.element,\n            requestType: this.action\n        };\n        this.storeElement = document.activeElement;\n        if (parseInt(args.maxHeight, 10) <= 250) {\n            args.maxHeight = '250px';\n        }\n        this.parent.trigger(events.dialogOpen, eventProp, function (openArgs) {\n            args.cancel = openArgs.cancel;\n            if (openArgs.cancel) {\n                _this.destroy();\n            }\n        });\n    };\n    KanbanDialog.prototype.onBeforeDialogClose = function (args) {\n        var _this = this;\n        var formInputs = this.getFormElements();\n        var cardObj = {};\n        if (args.isInteracted) {\n            /* close icon preventing data update */\n            this.preventUpdate = true;\n        }\n        if (!this.preventUpdate) {\n            for (var _i = 0, formInputs_1 = formInputs; _i < formInputs_1.length; _i++) {\n                var input = formInputs_1[_i];\n                var columnName = input.name || this.getColumnName(input);\n                if (!isNullOrUndefined(columnName) && columnName !== '') {\n                    var value = this.getValueFromElement(input);\n                    if (columnName === this.parent.cardSettings.headerField) {\n                        value = this.getIDType() === 'string' ? value : parseInt(value, 10);\n                    }\n                    cardObj[columnName] = value;\n                }\n            }\n        }\n        this.preventUpdate = false;\n        cardObj = extend(this.parent.activeCardData.data, cardObj);\n        var eventProp = { data: cardObj, cancel: false, element: this.element, requestType: this.action };\n        this.parent.trigger(events.dialogClose, eventProp, function (closeArgs) {\n            args.cancel = closeArgs.cancel;\n            if (!closeArgs.cancel) {\n                _this.cardData = eventProp.data;\n                _this.destroy();\n                _this.parent.actionModule.SingleCardSelection(_this.cardData);\n            }\n        });\n    };\n    KanbanDialog.prototype.getIDType = function () {\n        if (this.parent.kanbanData.length !== 0) {\n            return typeof (this.parent.kanbanData[0][this.parent.cardSettings.headerField]);\n        }\n        return 'string';\n    };\n    KanbanDialog.prototype.applyFormValidation = function () {\n        var _this = this;\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        for (var _i = 0, _a = this.parent.dialogSettings.fields; _i < _a.length; _i++) {\n            var field = _a[_i];\n            rules[field.key] = (field.validationRules && Object.keys(field.validationRules).length > 0) ? field.validationRules : null;\n        }\n        this.formObj = new FormValidator(form, {\n            rules: rules,\n            customPlacement: function (inputElement, error) {\n                var id = error.getAttribute('for');\n                var elem = _this.element.querySelector('#' + id + '_Error');\n                if (!elem) {\n                    _this.createTooltip(inputElement, error, id, '');\n                }\n            },\n            validationComplete: function (args) {\n                var elem = _this.element.querySelector('#' + args.inputName + '_Error');\n                if (elem) {\n                    elem.style.display = (args.status === 'failure') ? '' : 'none';\n                }\n            }\n        });\n    };\n    KanbanDialog.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.parentElement.getBoundingClientRect();\n        if (this.element.classList.contains(cls.DIALOG_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-kanban-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    KanbanDialog.prototype.destroyToolTip = function () {\n        if (this.element) {\n            this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS).forEach(function (node) { return remove(node); });\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    KanbanDialog.prototype.dialogButtonClick = function (event) {\n        var target = event.target.cloneNode(true);\n        var id = this.formObj.element.id;\n        if (document.getElementById(id) && this.formObj.validate() &&\n            (target.classList.contains('e-dialog-edit') || target.classList.contains('e-dialog-add'))) {\n            this.dialogObj.hide();\n            if (target.classList.contains('e-dialog-edit')) {\n                var activeCard = this.parent.activeCardData;\n                var updateIndex = void 0;\n                if (activeCard.data[this.parent.keyField] === this.cardData[this.parent.keyField]\n                    && activeCard.element) {\n                    updateIndex = [].slice.call(activeCard.element.parentElement.children).indexOf(activeCard.element);\n                }\n                this.parent.crudModule.updateCard(this.cardData, updateIndex);\n            }\n            if (target.classList.contains('e-dialog-add')) {\n                this.parent.crudModule.addCard(this.cardData);\n            }\n            this.parent.actionModule.SingleCardSelection(this.cardData);\n            this.cardData = null;\n        }\n        if (!target.classList.contains('e-dialog-edit') && !target.classList.contains('e-dialog-add')) {\n            if (target.classList.contains('e-dialog-cancel')) {\n                this.preventUpdate = true;\n            }\n            this.dialogObj.hide();\n            if (target.classList.contains('e-dialog-yes')) {\n                this.parent.crudModule.deleteCard(this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-no')) {\n                this.openDialog('Edit', this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-delete')) {\n                this.openDialog('Delete', this.parent.activeCardData.data);\n            }\n        }\n    };\n    KanbanDialog.prototype.getFormElements = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + cls.FIELD_CLASS));\n        var validElements = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            if (element.classList.contains('e-control')) {\n                validElements.push(element);\n            }\n            else if (element.querySelector('.e-control')) {\n                validElements.push(element.querySelector('.e-control'));\n            }\n            else {\n                validElements.push(element);\n            }\n        }\n        return validElements;\n    };\n    KanbanDialog.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist') || element.classList.contains('e-multiselect')) {\n                fieldSelector = element.classList.contains('e-dropdownlist') ? 'e-ddl' : 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                fieldSelector = 'e-numeric';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    KanbanDialog.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = element.value;\n            }\n        }\n        return value;\n    };\n    KanbanDialog.prototype.destroyComponents = function () {\n        var formelement = this.getFormElements();\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances;\n            if (instance && instance.length > 0) {\n                instance.forEach(function (node) { return node.destroy(); });\n            }\n        }\n    };\n    KanbanDialog.prototype.destroy = function () {\n        this.destroyToolTip();\n        this.destroyComponents();\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            this.storeElement.focus();\n            this.dialogObj = null;\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return KanbanDialog;\n}());\nexport { KanbanDialog };\n"]},"metadata":{},"sourceType":"module"}