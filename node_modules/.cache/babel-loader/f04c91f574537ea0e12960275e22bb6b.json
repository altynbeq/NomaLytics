{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { KeyboardEvents, addClass, removeClass, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban keyboard module\n */\n\nvar Keyboard =\n/** @class */\nfunction () {\n  /**\n   * Constructor for keyboard module\n   *\n   * @param {Kanban} parent Accepts the kanban instance\n   */\n  function Keyboard(parent) {\n    this.keyConfigs = {\n      firstCardSelection: '36',\n      lastCardSelection: '35',\n      upArrow: '38',\n      downArrow: '40',\n      rightArrow: '39',\n      leftArrow: '37',\n      multiSelectionEnter: 'ctrl+13',\n      multiSelectionSpace: 'ctrl+32',\n      multiSelectionByUpArrow: 'shift+38',\n      multiSelectionByDownArrow: 'shift+40',\n      shiftTab: 'shift+tab',\n      enter: '13',\n      tab: 'tab',\n      delete: '46',\n      escape: '27',\n      space: '32'\n    };\n    this.parent = parent;\n    this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n    this.keyboardModule = new KeyboardEvents(this.parent.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n    this.multiSelection = false;\n  }\n\n  Keyboard.prototype.keyActionHandler = function (e) {\n    var _this = this;\n\n    var selectedCard = this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS).item(0);\n\n    if (!selectedCard && !closest(document.activeElement, \".\" + cls.ROOT_CLASS)) {\n      return;\n    }\n\n    var contentCell;\n    var selectedCards;\n    var selectedCardsData = [];\n\n    switch (e.action) {\n      case 'upArrow':\n      case 'downArrow':\n      case 'multiSelectionByUpArrow':\n      case 'multiSelectionByDownArrow':\n        e.preventDefault();\n        this.processUpDownArrow(e.action, selectedCard);\n        break;\n\n      case 'rightArrow':\n      case 'leftArrow':\n        this.processLeftRightArrow(e);\n        break;\n\n      case 'firstCardSelection':\n      case 'lastCardSelection':\n        this.processCardSelection(e.action, selectedCard);\n        break;\n\n      case 'multiSelectionEnter':\n      case 'multiSelectionSpace':\n        if (document.activeElement) {\n          this.parent.actionModule.cardSelection(document.activeElement, true, false);\n        }\n\n        break;\n\n      case 'space':\n      case 'enter':\n        this.processEnter(e, selectedCard);\n        break;\n\n      case 'escape':\n        if (document.activeElement.classList.contains(cls.CARD_CLASS) || document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n          if (document.activeElement.classList.contains(cls.CARD_SELECTION_CLASS)) {\n            removeClass([document.activeElement], cls.CARD_SELECTION_CLASS);\n            document.activeElement.focus();\n          } else {\n            var ele = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n            var cards = [].slice.call(ele.querySelectorAll('.' + cls.CARD_CLASS));\n            removeClass(cards, cls.CARD_SELECTION_CLASS);\n            ele.focus();\n            this.cardTabIndexRemove();\n            this.addRemoveTabIndex('Add');\n          }\n        }\n\n        break;\n\n      case 'tab':\n      case 'shiftTab':\n        contentCell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n\n        if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n          if (!document.activeElement.nextElementSibling && e.action === 'tab') {\n            e.preventDefault();\n          }\n\n          if (!document.activeElement.previousElementSibling && contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON) && e.action === 'tab') {\n            addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.SHOW_ADD_FOCUS);\n          }\n        }\n\n        if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n          if (!contentCell.querySelector('.' + cls.CARD_CLASS) && e.action === 'tab' || e.action === 'shiftTab') {\n            e.preventDefault();\n          }\n        }\n\n        if (document.activeElement.classList.contains(cls.ROOT_CLASS)) {\n          this.cardTabIndexRemove();\n          this.parent.keyboardModule.addRemoveTabIndex('Add');\n        }\n\n        break;\n\n      case 'delete':\n        selectedCards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        selectedCards.forEach(function (selected) {\n          selectedCardsData.push(_this.parent.getCardDetails(selected));\n        });\n        this.parent.crudModule.deleteCard(selectedCardsData);\n        break;\n    }\n  };\n\n  Keyboard.prototype.processCardSelection = function (action, selectedCard) {\n    if (selectedCard) {\n      removeClass([selectedCard], cls.CARD_SELECTION_CLASS);\n      this.parent.layoutModule.disableAttributeSelection(selectedCard);\n      var selection = this.parent.actionModule.selectionArray;\n      selection.splice(selection.indexOf(selectedCard.getAttribute('data-id')), 1);\n    }\n\n    this.cardTabIndexRemove();\n    var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n    var element = action === 'firstCardSelection' ? cards[0] : cards[cards.length - 1];\n    this.parent.actionModule.cardSelection(element, false, false);\n    this.addRemoveTabIndex('Remove');\n    element.focus();\n    var card = [].slice.call(closest(element, '.' + cls.CONTENT_CELLS_CLASS).querySelectorAll('.' + cls.CARD_CLASS));\n    card.forEach(function (element) {\n      element.setAttribute('tabindex', '0');\n    });\n  };\n\n  Keyboard.prototype.processLeftRightArrow = function (e) {\n    if (document.activeElement.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n      if (e.action === 'rightArrow' && document.activeElement.nextElementSibling) {\n        document.activeElement.nextElementSibling.focus();\n      } else if (e.action === 'leftArrow' && document.activeElement.previousElementSibling) {\n        document.activeElement.previousElementSibling.focus();\n      }\n    }\n  };\n\n  Keyboard.prototype.processUpDownArrow = function (action, selectedCard) {\n    if (action === 'upArrow' && document.activeElement) {\n      if (document.activeElement.classList.contains(cls.CARD_CLASS) && document.activeElement.previousElementSibling) {\n        document.activeElement.previousElementSibling.focus();\n      } else if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n        document.activeElement.setAttribute('tabindex', '-1');\n        removeClass([document.activeElement], cls.SHOW_ADD_FOCUS);\n        var cell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n\n        if (cell.querySelectorAll('.' + cls.CARD_CLASS).length > 0) {\n          [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS)).slice(-1)[0].focus();\n        }\n      }\n\n      this.removeSelection();\n    } else if (action === 'downArrow' && document.activeElement && document.activeElement.classList.contains(cls.CARD_CLASS)) {\n      if (document.activeElement.nextElementSibling) {\n        document.activeElement.nextElementSibling.focus();\n      } else if (closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling) {\n        var ele = closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling;\n        ele.setAttribute('tabindex', '0');\n        addClass([ele], cls.SHOW_ADD_FOCUS);\n        ele.focus();\n      }\n\n      this.removeSelection();\n    }\n\n    if ((action === 'multiSelectionByUpArrow' || action === 'multiSelectionByDownArrow') && selectedCard && this.parent.cardSettings.selectionType === 'Multiple') {\n      var card = void 0;\n\n      if (action === 'multiSelectionByUpArrow') {\n        card = document.activeElement.previousElementSibling;\n      } else {\n        card = document.activeElement.nextElementSibling;\n      }\n\n      if (card) {\n        this.parent.actionModule.cardSelection(card, false, true);\n        card.focus();\n        this.multiSelection = true;\n      }\n    }\n  };\n\n  Keyboard.prototype.removeSelection = function () {\n    if (this.multiSelection) {\n      var cards = this.parent.getSelectedCards();\n\n      if (cards.length > 0) {\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.parent.layoutModule.disableAttributeSelection(cards);\n      }\n\n      this.multiSelection = false;\n    }\n  };\n\n  Keyboard.prototype.cardTabIndexRemove = function () {\n    var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n    cards.forEach(function (card) {\n      card.setAttribute('tabindex', '-1');\n    });\n    var addButton = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SHOW_ADD_BUTTON));\n    addButton.forEach(function (add) {\n      add.setAttribute('tabindex', '-1');\n      removeClass([add], cls.SHOW_ADD_FOCUS);\n    });\n  };\n\n  Keyboard.prototype.processEnter = function (e, selectedCard) {\n    if (e.action === 'space') {\n      e.preventDefault();\n    }\n\n    var element = e.target;\n\n    if (element.classList.contains(cls.HEADER_ICON_CLASS)) {\n      this.parent.actionModule.columnExpandCollapse(e);\n    }\n\n    if (element.classList.contains(cls.SWIMLANE_ROW_EXPAND_CLASS) || element.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n      this.parent.actionModule.rowExpandCollapse(e);\n    }\n\n    if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n      this.parent.actionModule.cardSelection(document.activeElement, false, false);\n    }\n\n    if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n      if (!this.parent.dialogModule.dialogObj) {\n        this.parent.actionModule.addButtonClick(document.activeElement);\n      }\n\n      document.activeElement.focus();\n    }\n\n    if (element.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n      var cards = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS));\n      this.addRemoveTabIndex('Remove');\n\n      if (cards.length > 0) {\n        element.querySelector('.' + cls.CARD_CLASS).focus();\n        cards.forEach(function (element) {\n          element.setAttribute('tabindex', '0');\n        });\n      }\n\n      if (element.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n        element.querySelector('.' + cls.SHOW_ADD_BUTTON).setAttribute('tabindex', '0');\n        element.querySelector('.' + cls.SHOW_ADD_BUTTON).focus();\n      }\n    }\n\n    if (selectedCard === document.activeElement && this.parent.element.querySelectorAll('.' + cls.CARD_SELECTION_CLASS).length === 1) {\n      this.parent.activeCardData = {\n        data: this.parent.getCardDetails(selectedCard),\n        element: selectedCard\n      };\n\n      if (!this.parent.dialogModule.dialogObj) {\n        this.parent.dialogModule.openDialog('Edit', this.parent.getCardDetails(selectedCard));\n      }\n\n      selectedCard.focus();\n    }\n  };\n\n  Keyboard.prototype.addRemoveTabIndex = function (action) {\n    var attribute = action === 'Add' ? '0' : '-1';\n    var headerIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.HEADER_ICON_CLASS));\n\n    if (headerIcon.length > 0) {\n      headerIcon.forEach(function (element) {\n        element.setAttribute('tabindex', attribute);\n      });\n    }\n\n    var swimlaneIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_EXPAND_CLASS));\n\n    if (swimlaneIcon.length > 0) {\n      swimlaneIcon.forEach(function (element) {\n        element.setAttribute('tabindex', attribute);\n      });\n    }\n\n    var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n    var contentCell = [].slice.call(this.parent.element.querySelectorAll(className));\n    contentCell.forEach(function (element) {\n      element.setAttribute('tabindex', attribute);\n    });\n  };\n\n  Keyboard.prototype.destroy = function () {\n    this.keyboardModule.destroy();\n  };\n\n  return Keyboard;\n}();\n\nexport { Keyboard };","map":{"version":3,"sources":["/Users/altynbekkuat/Desktop/NomaLytics/node_modules/@syncfusion/ej2-kanban/src/kanban/actions/keyboard.js"],"names":["KeyboardEvents","addClass","removeClass","closest","cls","Keyboard","parent","keyConfigs","firstCardSelection","lastCardSelection","upArrow","downArrow","rightArrow","leftArrow","multiSelectionEnter","multiSelectionSpace","multiSelectionByUpArrow","multiSelectionByDownArrow","shiftTab","enter","tab","delete","escape","space","element","tabIndex","keyboardModule","keyAction","keyActionHandler","bind","eventName","multiSelection","prototype","e","_this","selectedCard","querySelectorAll","CARD_CLASS","CARD_SELECTION_CLASS","item","document","activeElement","ROOT_CLASS","contentCell","selectedCards","selectedCardsData","action","preventDefault","processUpDownArrow","processLeftRightArrow","processCardSelection","actionModule","cardSelection","processEnter","classList","contains","SHOW_ADD_BUTTON","focus","ele","CONTENT_CELLS_CLASS","cards","slice","call","cardTabIndexRemove","addRemoveTabIndex","nextElementSibling","previousElementSibling","querySelector","SHOW_ADD_FOCUS","forEach","selected","push","getCardDetails","crudModule","deleteCard","layoutModule","disableAttributeSelection","selection","selectionArray","splice","indexOf","getAttribute","length","card","setAttribute","cell","removeSelection","CARD_WRAPPER_CLASS","cardSettings","selectionType","getSelectedCards","addButton","add","target","HEADER_ICON_CLASS","columnExpandCollapse","SWIMLANE_ROW_EXPAND_CLASS","SWIMLANE_ROW_COLLAPSE_CLASS","rowExpandCollapse","dialogModule","dialogObj","addButtonClick","activeCardData","data","openDialog","attribute","headerIcon","swimlaneIcon","className","CONTENT_ROW_CLASS","SWIMLANE_ROW_CLASS","destroy"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { KeyboardEvents, addClass, removeClass, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban keyboard module\n */\nvar Keyboard = /** @class */ (function () {\n    /**\n     * Constructor for keyboard module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function Keyboard(parent) {\n        this.keyConfigs = {\n            firstCardSelection: '36',\n            lastCardSelection: '35',\n            upArrow: '38',\n            downArrow: '40',\n            rightArrow: '39',\n            leftArrow: '37',\n            multiSelectionEnter: 'ctrl+13',\n            multiSelectionSpace: 'ctrl+32',\n            multiSelectionByUpArrow: 'shift+38',\n            multiSelectionByDownArrow: 'shift+40',\n            shiftTab: 'shift+tab',\n            enter: '13',\n            tab: 'tab',\n            delete: '46',\n            escape: '27',\n            space: '32'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.multiSelection = false;\n    }\n    Keyboard.prototype.keyActionHandler = function (e) {\n        var _this = this;\n        var selectedCard = this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS).item(0);\n        if (!selectedCard && !closest(document.activeElement, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var contentCell;\n        var selectedCards;\n        var selectedCardsData = [];\n        switch (e.action) {\n            case 'upArrow':\n            case 'downArrow':\n            case 'multiSelectionByUpArrow':\n            case 'multiSelectionByDownArrow':\n                e.preventDefault();\n                this.processUpDownArrow(e.action, selectedCard);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.processLeftRightArrow(e);\n                break;\n            case 'firstCardSelection':\n            case 'lastCardSelection':\n                this.processCardSelection(e.action, selectedCard);\n                break;\n            case 'multiSelectionEnter':\n            case 'multiSelectionSpace':\n                if (document.activeElement) {\n                    this.parent.actionModule.cardSelection(document.activeElement, true, false);\n                }\n                break;\n            case 'space':\n            case 'enter':\n                this.processEnter(e, selectedCard);\n                break;\n            case 'escape':\n                if (document.activeElement.classList.contains(cls.CARD_CLASS) ||\n                    document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if (document.activeElement.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                        removeClass([document.activeElement], cls.CARD_SELECTION_CLASS);\n                        document.activeElement.focus();\n                    }\n                    else {\n                        var ele = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                        var cards = [].slice.call(ele.querySelectorAll('.' + cls.CARD_CLASS));\n                        removeClass(cards, cls.CARD_SELECTION_CLASS);\n                        ele.focus();\n                        this.cardTabIndexRemove();\n                        this.addRemoveTabIndex('Add');\n                    }\n                }\n                break;\n            case 'tab':\n            case 'shiftTab':\n                contentCell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n                    if (!document.activeElement.nextElementSibling && e.action === 'tab') {\n                        e.preventDefault();\n                    }\n                    if (!document.activeElement.previousElementSibling && contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)\n                        && e.action === 'tab') {\n                        addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.SHOW_ADD_FOCUS);\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if ((!contentCell.querySelector('.' + cls.CARD_CLASS) && e.action === 'tab') || e.action === 'shiftTab') {\n                        e.preventDefault();\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.ROOT_CLASS)) {\n                    this.cardTabIndexRemove();\n                    this.parent.keyboardModule.addRemoveTabIndex('Add');\n                }\n                break;\n            case 'delete':\n                selectedCards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n                selectedCards.forEach(function (selected) { selectedCardsData.push(_this.parent.getCardDetails(selected)); });\n                this.parent.crudModule.deleteCard(selectedCardsData);\n                break;\n        }\n    };\n    Keyboard.prototype.processCardSelection = function (action, selectedCard) {\n        if (selectedCard) {\n            removeClass([selectedCard], cls.CARD_SELECTION_CLASS);\n            this.parent.layoutModule.disableAttributeSelection(selectedCard);\n            var selection = this.parent.actionModule.selectionArray;\n            selection.splice(selection.indexOf(selectedCard.getAttribute('data-id')), 1);\n        }\n        this.cardTabIndexRemove();\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        var element = action === 'firstCardSelection' ? cards[0] : cards[cards.length - 1];\n        this.parent.actionModule.cardSelection(element, false, false);\n        this.addRemoveTabIndex('Remove');\n        element.focus();\n        var card = [].slice.call(closest(element, '.' + cls.CONTENT_CELLS_CLASS).querySelectorAll('.' + cls.CARD_CLASS));\n        card.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n    };\n    Keyboard.prototype.processLeftRightArrow = function (e) {\n        if (document.activeElement.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            if (e.action === 'rightArrow' && document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (e.action === 'leftArrow' && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n        }\n    };\n    Keyboard.prototype.processUpDownArrow = function (action, selectedCard) {\n        if (action === 'upArrow' && document.activeElement) {\n            if (document.activeElement.classList.contains(cls.CARD_CLASS) && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n            else if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                document.activeElement.setAttribute('tabindex', '-1');\n                removeClass([document.activeElement], cls.SHOW_ADD_FOCUS);\n                var cell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell.querySelectorAll('.' + cls.CARD_CLASS).length > 0) {\n                    [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS)).slice(-1)[0].focus();\n                }\n            }\n            this.removeSelection();\n        }\n        else if (action === 'downArrow' && document.activeElement &&\n            document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            if (document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling) {\n                var ele = closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling;\n                ele.setAttribute('tabindex', '0');\n                addClass([ele], cls.SHOW_ADD_FOCUS);\n                ele.focus();\n            }\n            this.removeSelection();\n        }\n        if ((action === 'multiSelectionByUpArrow' || action === 'multiSelectionByDownArrow')\n            && selectedCard && this.parent.cardSettings.selectionType === 'Multiple') {\n            var card = void 0;\n            if (action === 'multiSelectionByUpArrow') {\n                card = document.activeElement.previousElementSibling;\n            }\n            else {\n                card = document.activeElement.nextElementSibling;\n            }\n            if (card) {\n                this.parent.actionModule.cardSelection(card, false, true);\n                card.focus();\n                this.multiSelection = true;\n            }\n        }\n    };\n    Keyboard.prototype.removeSelection = function () {\n        if (this.multiSelection) {\n            var cards = this.parent.getSelectedCards();\n            if (cards.length > 0) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                this.parent.layoutModule.disableAttributeSelection(cards);\n            }\n            this.multiSelection = false;\n        }\n    };\n    Keyboard.prototype.cardTabIndexRemove = function () {\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        cards.forEach(function (card) { card.setAttribute('tabindex', '-1'); });\n        var addButton = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SHOW_ADD_BUTTON));\n        addButton.forEach(function (add) {\n            add.setAttribute('tabindex', '-1');\n            removeClass([add], cls.SHOW_ADD_FOCUS);\n        });\n    };\n    Keyboard.prototype.processEnter = function (e, selectedCard) {\n        if (e.action === 'space') {\n            e.preventDefault();\n        }\n        var element = (e.target);\n        if (element.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.parent.actionModule.columnExpandCollapse(e);\n        }\n        if (element.classList.contains(cls.SWIMLANE_ROW_EXPAND_CLASS) || element.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n            this.parent.actionModule.rowExpandCollapse(e);\n        }\n        if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            this.parent.actionModule.cardSelection(document.activeElement, false, false);\n        }\n        if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.actionModule.addButtonClick(document.activeElement);\n            }\n            document.activeElement.focus();\n        }\n        if (element.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            var cards = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS));\n            this.addRemoveTabIndex('Remove');\n            if (cards.length > 0) {\n                element.querySelector('.' + cls.CARD_CLASS).focus();\n                cards.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n            }\n            if (element.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).setAttribute('tabindex', '0');\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).focus();\n            }\n        }\n        if (selectedCard === document.activeElement && this.parent.element.querySelectorAll('.' + cls.CARD_SELECTION_CLASS).length === 1) {\n            this.parent.activeCardData = {\n                data: this.parent.getCardDetails(selectedCard), element: selectedCard\n            };\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.dialogModule.openDialog('Edit', this.parent.getCardDetails(selectedCard));\n            }\n            selectedCard.focus();\n        }\n    };\n    Keyboard.prototype.addRemoveTabIndex = function (action) {\n        var attribute = action === 'Add' ? '0' : '-1';\n        var headerIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.HEADER_ICON_CLASS));\n        if (headerIcon.length > 0) {\n            headerIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var swimlaneIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_EXPAND_CLASS));\n        if (swimlaneIcon.length > 0) {\n            swimlaneIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var contentCell = [].slice.call(this.parent.element.querySelectorAll(className));\n        contentCell.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n    };\n    Keyboard.prototype.destroy = function () {\n        this.keyboardModule.destroy();\n    };\n    return Keyboard;\n}());\nexport { Keyboard };\n"]},"metadata":{},"sourceType":"module"}