{"ast":null,"code":"import { TreeView as BaseTreeView } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, select, setValue, getValue, Draggable } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, closest } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { read, Download, GetDetails, Delete } from '../common/operations';\nimport { createDialog } from '../pop-up/dialog';\nimport { updatePath, getPath, getDirectories } from '../common/utility';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getDirectoryPath, getModule } from '../common/index';\nimport { copyFiles, cutFiles, removeActive, pasteHandler, getParentPath, readDropPath } from '../common/index';\nimport { hasEditAccess, createDeniedDialog, hasDownloadAccess, getAccessClass } from '../common/index';\n/**\n * NavigationPane module\n */\n\nvar NavigationPane =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the TreeView module\n   *\n   * @param {IFileManager} parent - specifies the parent element.\n   * @hidden\n   */\n  function NavigationPane(parent) {\n    this.removeNodes = [];\n    this.moveNames = [];\n    this.expandTree = false;\n    this.isDrag = false;\n    this.isPathDragged = false;\n    this.isRenameParent = false;\n    this.isRightClick = false;\n    this.renameParent = null; // Specifies the previously selected nodes in the treeview control.\n\n    this.previousSelected = null; // Specifies whether the nodeClicked event of the treeview control is triggered or not.\n\n    this.isNodeClickCalled = false; // Specifies whether to restrict node selection in the treeview control.\n\n    this.restrictSelecting = false;\n    this.parent = parent;\n    this.addEventListener();\n    this.keyConfigs = {\n      altEnter: 'alt+enter',\n      esc: 'escape',\n      del: 'delete',\n      ctrlX: 'ctrl+x',\n      ctrlC: 'ctrl+c',\n      ctrlV: 'ctrl+v',\n      ctrlShiftN: 'ctrl+shift+n',\n      shiftF10: 'shift+F10',\n      f2: 'f2'\n    };\n  }\n\n  NavigationPane.prototype.onInit = function () {\n    if (!isNOU(this.treeObj)) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var rootData = getValue(this.parent.pathId[0], this.parent.feParent);\n    setValue('_fm_icon', 'e-fe-folder', rootData); // eslint-disable-next-line\n\n    var attr = {};\n    var id = getValue('id', rootData);\n\n    if (!isNOU(id)) {\n      setValue('data-id', id, attr);\n    }\n\n    if (!hasEditAccess(rootData)) {\n      setValue('class', getAccessClass(rootData), attr);\n    }\n\n    if (!isNOU(attr)) {\n      setValue('_fm_htmlAttr', attr, rootData);\n    }\n\n    this.treeObj = new BaseTreeView({\n      fields: {\n        dataSource: [rootData],\n        id: '_fm_id',\n        parentID: '_fm_pId',\n        expanded: '_fm_expanded',\n        selected: '_fm_selected',\n        text: 'name',\n        hasChildren: 'hasChild',\n        iconCss: '_fm_icon',\n        htmlAttributes: '_fm_htmlAttr',\n        tooltip: 'name'\n      },\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      sortOrder: this.parent.navigationPaneSettings.sortOrder,\n      nodeSelecting: this.onNodeSelecting.bind(this),\n      nodeSelected: this.onNodeSelected.bind(this),\n      nodeExpanding: this.onNodeExpand.bind(this),\n      nodeClicked: this.onNodeClicked.bind(this),\n      allowEditing: true,\n      nodeEditing: this.onNodeEditing.bind(this),\n      drawNode: this.onDrowNode.bind(this),\n      enableRtl: this.parent.enableRtl,\n      dataBound: this.addDragDrop.bind(this)\n    });\n    this.treeObj.isStringTemplate = true;\n    this.treeObj.appendTo('#' + this.parent.element.id + CLS.TREE_ID);\n    this.wireEvents();\n  };\n\n  NavigationPane.prototype.addDragDrop = function () {\n    var _this = this;\n\n    if (!this.parent.isMobile && this.treeObj) {\n      if (this.parent.allowDragAndDrop) {\n        if (this.dragObj) {\n          this.dragObj.destroy();\n        }\n\n        this.dragObj = new Draggable(this.treeObj.element, {\n          cursorAt: this.parent.dragCursorPosition,\n          dragTarget: '.' + CLS.FULLROW,\n          distance: 5,\n          dragArea: this.parent.element,\n          drag: draggingHandler.bind(this, this.parent),\n          dragStart: function (args) {\n            dragStartHandler(_this.parent, args, _this.dragObj);\n          },\n          dragStop: dragStopHandler.bind(this, this.parent),\n          enableTailMode: true,\n          enableAutoScroll: true,\n          helper: this.dragHelper.bind(this)\n        });\n      } else if (!this.parent.allowDragAndDrop && this.dragObj) {\n        this.dragObj.destroy();\n      }\n    }\n  };\n\n  NavigationPane.prototype.dragHelper = function (args) {\n    var dragTarget = args.sender.target;\n\n    if (!dragTarget.classList.contains(CLS.FULLROW)) {\n      return null;\n    }\n\n    var dragLi = closest(dragTarget, 'li');\n    this.parent.dragPath = '';\n    this.parent.dragData = [];\n    this.parent.activeElements = [];\n    this.parent.activeElements = [dragLi];\n    this.parent.dragNodes = [];\n    getModule(this.parent, dragLi); // eslint-disable-next-line\n\n    this.parent.dragData = this.getTreeData(dragLi);\n    this.parent.dragPath = this.getDragPath(dragLi, this.parent.dragData[0].name);\n    this.parent.dragNodes.push(this.parent.dragData[0].name);\n    createVirtualDragElement(this.parent);\n    return this.parent.virtualDragElement;\n  };\n\n  NavigationPane.prototype.getDragPath = function (dragLi, text) {\n    var path = this.getDropPath(dragLi, text);\n    return getParentPath(path);\n  };\n\n  NavigationPane.prototype.getDropPath = function (node, text) {\n    var id = node.getAttribute('data-id');\n    var newText = this.parent.hasId ? id : text;\n    return getPath(node, newText, this.parent.hasId);\n  };\n\n  NavigationPane.prototype.onDrowNode = function (args) {\n    var eventArgs = {\n      element: args.node,\n      fileDetails: args.nodeData,\n      module: 'NavigationPane'\n    };\n    this.parent.trigger('fileLoad', eventArgs);\n  }; // eslint-disable-next-line\n\n\n  NavigationPane.prototype.addChild = function (files, target, prevent) {\n    // eslint-disable-next-line\n    var directories = getDirectories(files);\n\n    if (directories.length > 0) {\n      var length_1 = 0; // eslint-disable-next-line\n\n      var folders = directories;\n\n      while (length_1 < directories.length) {\n        // eslint-disable-next-line\n        folders[length_1]._fm_icon = 'e-fe-folder'; // eslint-disable-next-line\n\n        var attr = {};\n        var id = getValue('id', folders[length_1]);\n\n        if (!isNOU(id)) {\n          setValue('data-id', id, attr);\n        }\n\n        if (!hasEditAccess(folders[length_1])) {\n          setValue('class', getAccessClass(folders[length_1]), attr);\n        }\n\n        if (!isNOU(attr)) {\n          setValue('_fm_htmlAttr', attr, folders[length_1]);\n        }\n\n        length_1++;\n      } // eslint-disable-next-line\n\n\n      this.treeObj.addNodes(directories, target, null, prevent);\n    }\n  }; // Node Selecting event handler\n\n\n  NavigationPane.prototype.onNodeSelecting = function (args) {\n    if (!args.isInteracted && !this.isRightClick && !this.isPathDragged && !this.isRenameParent || this.restrictSelecting) {\n      this.restrictSelecting = false;\n      this.isNodeClickCalled = false;\n      return;\n    }\n\n    if (!this.renameParent) {\n      this.parent.activeModule = 'navigationpane'; // eslint-disable-next-line\n\n      var nodeData = this.getTreeData(getValue('id', args.nodeData));\n      var eventArgs = {\n        cancel: false,\n        fileDetails: nodeData[0],\n        module: 'NavigationPane'\n      };\n      this.parent.trigger('fileOpen', eventArgs);\n      args.cancel = eventArgs.cancel;\n\n      if (args.cancel) {\n        this.restrictSelecting = this.isNodeClickCalled ? this.previousSelected[0] != args.node.getAttribute('data-uid') : false;\n        this.treeObj.selectedNodes = this.isNodeClickCalled ? this.previousSelected : this.treeObj.selectedNodes;\n        this.previousSelected = this.treeObj.selectedNodes;\n\n        if (!isNOU(this.parent) && !isNOU(this.parent.contextmenuModule)) {\n          this.parent.contextmenuModule.contextMenu.enableItems(['Open'], true);\n        }\n      }\n    }\n  }; // Opens the folder while clicking open context menu item in the treeview.\n\n\n  NavigationPane.prototype.openFileOnContextMenuClick = function (node) {\n    var data = this.treeObj.getTreeData(node); // eslint-disable-next-line\n\n    this.parent.selectedItems = [];\n    this.parent.itemData = data;\n    this.activeNode = node;\n    this.parent.activeModule = 'navigationpane';\n    updatePath(node, this.parent.itemData[0], this.parent);\n    read(this.parent, this.isPathDragged ? events.pasteEnd : events.pathChanged, this.parent.path);\n    this.parent.visitedItem = node;\n    this.isPathDragged = this.isRenameParent = this.isRightClick = false;\n    this.treeObj.selectedNodes = [node.getAttribute('data-uid')];\n  };\n\n  NavigationPane.prototype.onNodeSelected = function (args) {\n    if (this.parent.breadcrumbbarModule && this.parent.breadcrumbbarModule.searchObj && !this.renameParent) {\n      this.parent.breadcrumbbarModule.searchObj.element.value = '';\n      this.parent.isFiltered = false;\n    }\n\n    this.parent.searchedItems = [];\n\n    if (!args.isInteracted && !this.isRightClick && !this.isPathDragged && !this.isRenameParent) {\n      return;\n    }\n\n    this.activeNode = args.node;\n    this.parent.activeModule = 'navigationpane'; // eslint-disable-next-line\n\n    var nodeData = this.getTreeData(getValue('id', args.nodeData));\n    this.parent.selectedItems = [];\n    this.parent.itemData = nodeData;\n    var previousPath = this.parent.path;\n    updatePath(args.node, this.parent.itemData[0], this.parent);\n\n    if (previousPath !== this.parent.path) {\n      this.expandNodeTarget = null;\n\n      if (args.node.querySelector('.' + CLS.ICONS) && args.node.querySelector('.' + CLS.LIST_ITEM) === null) {\n        this.expandNodeTarget = 'add';\n      }\n\n      read(this.parent, this.isPathDragged ? events.pasteEnd : events.pathChanged, this.parent.path);\n      this.parent.visitedItem = args.node;\n    }\n\n    this.isPathDragged = this.isRenameParent = this.isRightClick = false;\n  };\n  /* istanbul ignore next */\n  // eslint-disable-next-line\n\n\n  NavigationPane.prototype.onPathDrag = function (args) {\n    this.isPathDragged = true;\n    this.selectResultNode(args[0]);\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onNodeExpand = function (args) {\n    if (!args.isInteracted && !this.isDrag) {\n      return;\n    }\n\n    if (args.node.querySelector('.' + CLS.LIST_ITEM) === null) {\n      var text = getValue('text', args.nodeData);\n      var id = args.node.getAttribute('data-id');\n      var isId = isNOU(id) ? false : true;\n      var newText = isNOU(id) ? text : id;\n      var path = getPath(args.node, newText, isId);\n      this.expandNodeTarget = args.node.getAttribute('data-uid');\n      this.parent.expandedId = this.expandNodeTarget;\n      this.parent.itemData = this.getTreeData(getValue('id', args.nodeData));\n      read(this.parent, events.nodeExpand, path);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onNodeExpanded = function (args) {\n    this.addChild(args.files, this.expandNodeTarget, false);\n    this.parent.expandedId = null;\n  };\n\n  NavigationPane.prototype.onNodeClicked = function (args) {\n    this.parent.activeModule = 'navigationpane';\n    this.previousSelected = this.treeObj.selectedNodes;\n    this.activeNode = args.node;\n\n    if (args.event.which === 3 && args.node.getAttribute('data-uid') !== this.treeObj.selectedNodes[0]) {\n      this.isRightClick = true;\n      this.isNodeClickCalled = true;\n      this.treeObj.selectedNodes = [args.node.getAttribute('data-uid')];\n    } else if (args.node.getAttribute('data-uid') === this.treeObj.selectedNodes[0] && this.parent.selectedItems.length !== 0) {\n      this.parent.setProperties({\n        selectedItems: []\n      }, true);\n      var layout = this.parent.view === 'LargeIcons' ? 'largeiconsview' : 'detailsview';\n      this.parent.notify(events.modelChanged, {\n        module: layout,\n        newProp: {\n          selectedItems: []\n        }\n      });\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onNodeEditing = function (args) {\n    if (!isNOU(args.innerHtml)) {\n      args.cancel = true;\n    }\n  };\n\n  NavigationPane.prototype.onPathChanged = function (args) {\n    this.parent.isCut = false; // eslint-disable-next-line\n\n    var currFiles = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feFiles);\n\n    if (this.expandNodeTarget === 'add') {\n      var sNode = select('[data-uid=\"' + this.treeObj.selectedNodes[0] + '\"]', this.treeObj.element);\n      var ul = select('.' + CLS.LIST_PARENT, sNode);\n\n      if (isNOU(ul)) {\n        this.addChild(args.files, this.treeObj.selectedNodes[0], !this.expandTree);\n      }\n\n      this.expandNodeTarget = '';\n    }\n\n    this.expandTree = false;\n\n    if (isNOU(currFiles)) {\n      setValue(this.parent.pathId[this.parent.pathId.length - 1], args.files, this.parent.feFiles);\n    }\n  };\n\n  NavigationPane.prototype.updateTree = function (args) {\n    if (this.treeObj) {\n      var id = this.treeObj.selectedNodes[0];\n      this.updateTreeNode(args, id);\n    }\n  };\n\n  NavigationPane.prototype.updateTreeNode = function (args, id) {\n    var toExpand = this.treeObj.expandedNodes.indexOf(id) === -1 ? false : true;\n    this.removeChildNodes(id);\n    this.addChild(args.files, id, !toExpand);\n  };\n\n  NavigationPane.prototype.removeChildNodes = function (id) {\n    var sNode = select('[data-uid=\"' + id + '\"]', this.treeObj.element);\n    var parent = select('.' + CLS.LIST_PARENT, sNode);\n    var childs = parent ? Array.prototype.slice.call(parent.children) : null;\n\n    if (childs) {\n      this.treeObj.removeNodes(childs);\n    }\n  };\n\n  NavigationPane.prototype.onOpenEnd = function (args) {\n    var sleId = this.parent.pathId[this.parent.pathId.length - 1];\n    this.treeObj.expandAll(this.treeObj.selectedNodes);\n    this.treeObj.selectedNodes = [sleId];\n    this.expandNodeTarget = 'add';\n    this.onPathChanged(args);\n  };\n\n  NavigationPane.prototype.onOpenInit = function (args) {\n    if (this.parent.activeModule === 'navigationpane') {\n      if (args.target.querySelector('.' + CLS.ICONS)) {\n        this.treeObj.expandAll(this.treeObj.selectedNodes);\n      }\n    }\n  };\n\n  NavigationPane.prototype.onInitialEnd = function (args) {\n    this.onInit();\n    this.addChild(args.files, getValue('_fm_id', args.cwd), false);\n  };\n\n  NavigationPane.prototype.onFinalizeEnd = function (args) {\n    this.onInit();\n    var id = getValue('_fm_id', args.cwd);\n    this.removeChildNodes(id);\n    this.addChild(args.files, id, false);\n    this.treeObj.selectedNodes = [this.parent.pathId[this.parent.pathId.length - 1]];\n  };\n\n  NavigationPane.prototype.onCreateEnd = function (args) {\n    this.updateTree(args);\n  };\n\n  NavigationPane.prototype.onSelectedData = function () {\n    if (this.parent.activeModule === 'navigationpane') {\n      this.updateItemData();\n    }\n  };\n\n  NavigationPane.prototype.onDeleteInit = function () {\n    if (this.parent.activeModule === 'navigationpane') {\n      this.updateActionData();\n      var name_1 = getValue('name', this.parent.itemData[0]);\n      Delete(this.parent, [name_1], this.parent.path, 'delete');\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onDeleteEnd = function (args) {\n    if (this.parent.activeModule === 'navigationpane') {\n      var selectedNode = this.treeObj.selectedNodes[0];\n      var selcetedEle = select('[data-uid=\"' + selectedNode + '\"]', this.treeObj.element);\n      var selectedNodeEle = closest(selcetedEle, '.' + CLS.LIST_PARENT).parentElement;\n      this.treeObj.selectedNodes = [selectedNodeEle.getAttribute('data-uid')];\n      this.treeObj.dataBind();\n    }\n\n    this.updateTree(args);\n  };\n\n  NavigationPane.prototype.onRefreshEnd = function (args) {\n    this.updateTree(args);\n  };\n\n  NavigationPane.prototype.onRenameInit = function () {\n    if (this.parent.activeModule === 'navigationpane') {\n      this.updateRenameData();\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onRenameEndParent = function (args) {\n    var id = this.renameParent ? this.renameParent : this.parent.pathId[this.parent.pathId.length - 1];\n    this.expandTree = this.treeObj.expandedNodes.indexOf(this.treeObj.selectedNodes[0]) !== -1;\n    this.updateTreeNode(args, id);\n    this.parent.expandedId = null;\n\n    if (this.renameParent) {\n      this.renameParent = null;\n    } else {\n      // eslint-disable-next-line\n      var resultData = [];\n\n      if (this.parent.hasId) {\n        resultData = new DataManager(this.treeObj.getTreeData()).executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n      } else {\n        // eslint-disable-next-line\n        var nData = new DataManager(this.treeObj.getTreeData()).executeLocal(new Query().where(this.treeObj.fields.text, 'equal', this.parent.renameText, false));\n\n        if (nData.length > 0) {\n          resultData = new DataManager(nData).executeLocal(new Query().where('_fm_pId', 'equal', id, false));\n        }\n      }\n\n      if (resultData.length > 0) {\n        this.isRenameParent = true;\n        var id_1 = getValue(this.treeObj.fields.id, resultData[0]);\n        this.treeObj.selectedNodes = [id_1];\n        this.treeObj.dataBind();\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onRenameEnd = function (args) {\n    if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n      this.updateTree(args);\n    } else {\n      // eslint-disable-next-line\n      var data = this.treeObj.getTreeData(); // eslint-disable-next-line\n\n      var resultData = [];\n\n      if (this.parent.hasId) {\n        resultData = new DataManager(data).executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n      } else {\n        // eslint-disable-next-line\n        var nData = new DataManager(data).executeLocal(new Query().where(this.treeObj.fields.text, 'equal', this.parent.currentItemText, false));\n\n        if (nData.length > 0) {\n          resultData = new DataManager(nData).executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n        }\n      }\n\n      if (resultData.length > 0) {\n        this.renameParent = getValue(this.treeObj.fields.parentID, resultData[0]);\n        this.parent.expandedId = this.renameParent;\n        this.parent.itemData = this.getTreeData(this.renameParent);\n        read(this.parent, events.renameEndParent, this.parent.filterPath.replace(/\\\\/g, '/'));\n      }\n    }\n  };\n\n  NavigationPane.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      /* istanbul ignore next */\n      return;\n    }\n\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'allowDragAndDrop':\n          this.addDragDrop();\n          break;\n\n        case 'navigationPaneSettings':\n          read(this.parent, events.finalizeEnd, '/');\n\n          if (e.oldProp.navigationPaneSettings.sortOrder !== e.newProp.navigationPaneSettings.sortOrder) {\n            this.treeObj.sortOrder = e.newProp.navigationPaneSettings.sortOrder;\n          }\n\n          break;\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onDownLoadInit = function () {\n    this.doDownload();\n  };\n\n  NavigationPane.prototype.onSelectionChanged = function (e) {\n    this.treeObj.selectedNodes = [e.selectedNode];\n  };\n\n  NavigationPane.prototype.onClearPathInit = function (e) {\n    this.removeChildNodes(e.selectedNode);\n  };\n\n  NavigationPane.prototype.onDragEnd = function (args) {\n    var moveNames = [];\n\n    if (this.parent.isPasteError || this.parent.isSearchDrag) {\n      moveNames = this.getMoveNames(args.files, this.parent.isSearchDrag, this.parent.dragPath);\n    } else {\n      moveNames = this.moveNames;\n    }\n\n    this.treeObj.removeNodes(moveNames);\n  }; // eslint-disable-next-line\n\n\n  NavigationPane.prototype.getMoveNames = function (files, flag, path) {\n    var moveNames = [];\n\n    for (var i = 0; i < files.length; i++) {\n      if (!files[i].isFile) {\n        if (!this.parent.hasId) {\n          var name_2 = files[i].previousName;\n\n          if (flag) {\n            path = path + files[i].previousName;\n            var index = path.lastIndexOf('/');\n            name_2 = path.substring(index + 1);\n            path = path.substring(0, index + 1);\n          } // eslint-disable-next-line\n\n\n          var resultData = new DataManager(this.treeObj.getTreeData()).executeLocal(new Query().where(this.treeObj.fields.text, 'equal', name_2, false));\n\n          for (var j = 0; j < resultData.length; j++) {\n            var fPath = getValue('filterPath', resultData[j]);\n            fPath = fPath.replace(/\\\\/g, '/');\n\n            if (fPath === path) {\n              moveNames.push(getValue(this.treeObj.fields.id, resultData[j]));\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    return moveNames;\n  };\n\n  NavigationPane.prototype.onCutEnd = function (args) {\n    var moveNames = [];\n\n    if (this.parent.isPasteError || this.parent.isSearchCut) {\n      this.moveNames = this.getMoveNames(args.files, this.parent.isSearchCut, this.parent.targetPath);\n    } else {\n      moveNames = this.moveNames;\n    }\n\n    this.treeObj.removeNodes(moveNames);\n  };\n  /* istanbul ignore next */\n  // eslint-disable-next-line\n\n\n  NavigationPane.prototype.selectResultNode = function (resultObj) {\n    if (!this.parent.hasId) {\n      var path = getValue('filterPath', resultObj);\n      var itemname = getValue('name', resultObj); // eslint-disable-next-line\n\n      var data = new DataManager(this.treeObj.getTreeData()).executeLocal(new Query().where(this.treeObj.fields.text, 'equal', itemname, false));\n\n      if (data.length > 0) {\n        // eslint-disable-next-line\n        var resultData = new DataManager(data).executeLocal(new Query().where('filterPath', 'equal', path, false));\n\n        if (resultData.length > 0) {\n          var id = getValue(this.treeObj.fields.id, resultData[0]);\n          this.treeObj.selectedNodes = [id];\n          this.treeObj.dataBind();\n        }\n      }\n    } else {\n      this.treeObj.selectedNodes = [getValue('_fm_id', resultObj)];\n      this.treeObj.dataBind();\n    }\n  };\n\n  NavigationPane.prototype.onDropPath = function (args) {\n    this.onpasteEnd(args);\n    this.selectResultNode(this.parent.dropData);\n    this.parent.isDropEnd = !this.parent.isPasteError;\n  };\n\n  NavigationPane.prototype.onpasteEnd = function (args) {\n    // eslint-disable-next-line\n    var resultData = [];\n\n    if (this.parent.hasId) {\n      resultData = new DataManager(this.treeObj.getTreeData()).executeLocal(new Query().where('id', 'equal', getValue('id', args.cwd), false));\n    } else {\n      // eslint-disable-next-line\n      var nData = new DataManager(this.treeObj.getTreeData()).executeLocal(new Query().where(this.treeObj.fields.text, 'equal', getValue('name', args.cwd), false));\n\n      if (nData.length > 0) {\n        resultData = new DataManager(nData).executeLocal(new Query().where('filterPath', 'equal', getValue('filterPath', args.cwd), false));\n      }\n    }\n\n    if (resultData.length > 0) {\n      var id = getValue(this.treeObj.fields.id, resultData[0]);\n      var toExpand = this.treeObj.expandedNodes.indexOf(id) === -1;\n      this.removeChildNodes(id);\n      this.addChild(args.files, id, toExpand);\n    }\n\n    this.parent.expandedId = null;\n    this.onPathChanged(args);\n\n    if (this.parent.isDragDrop) {\n      this.checkDropPath(args);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.checkDropPath = function (args) {\n    if (this.parent.hasId) {\n      this.parent.isDropEnd = !this.parent.isPasteError;\n      readDropPath(this.parent);\n      return;\n    }\n\n    if (this.parent.dropPath.indexOf(getDirectoryPath(this.parent, args)) === -1) {\n      this.parent.isDropEnd = false;\n      readDropPath(this.parent);\n    } else {\n      this.parent.isDropEnd = !this.parent.isPasteError;\n    }\n  };\n\n  NavigationPane.prototype.onpasteInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.updateItemData();\n    }\n\n    this.moveNames = []; // eslint-disable-next-line\n\n    var obj = this.parent.isDragDrop ? this.parent.dragData : this.parent.actionRecords;\n\n    for (var i = 0; i < obj.length; i++) {\n      if (getValue('isFile', obj[i]) === false) {\n        this.moveNames.push(getValue('_fm_id', obj[i]));\n      }\n    }\n  };\n\n  NavigationPane.prototype.oncutCopyInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.activeRecords = this.getTreeData(this.treeObj.selectedNodes[0]);\n      this.parent.activeElements = [this.activeNode];\n    }\n  };\n\n  NavigationPane.prototype.addEventListener = function () {\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.downloadInit, this.onDownLoadInit, this);\n    this.parent.on(events.initialEnd, this.onInitialEnd, this);\n    this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n    this.parent.on(events.pathChanged, this.onPathChanged, this);\n    this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n    this.parent.on(events.cutEnd, this.onCutEnd, this);\n    this.parent.on(events.pasteInit, this.onpasteInit, this);\n    this.parent.on(events.nodeExpand, this.onNodeExpanded, this);\n    this.parent.on(events.createEnd, this.onCreateEnd, this);\n    this.parent.on(events.selectedData, this.onSelectedData, this);\n    this.parent.on(events.deleteInit, this.onDeleteInit, this);\n    this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n    this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n    this.parent.on(events.updateTreeSelection, this.onSelectionChanged, this);\n    this.parent.on(events.openInit, this.onOpenInit, this);\n    this.parent.on(events.openEnd, this.onOpenEnd, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.renameInit, this.onRenameInit, this);\n    this.parent.on(events.renameEnd, this.onRenameEnd, this);\n    this.parent.on(events.renameEndParent, this.onRenameEndParent, this);\n    this.parent.on(events.clearPathInit, this.onClearPathInit, this);\n    this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n    this.parent.on(events.dropInit, this.onDropInit, this);\n    this.parent.on(events.menuItemData, this.onMenuItemData, this);\n    this.parent.on(events.dragEnd, this.onDragEnd, this);\n    this.parent.on(events.dragging, this.onDragging, this);\n    this.parent.on(events.dropPath, this.onDropPath, this);\n    this.parent.on(events.detailsInit, this.onDetailsInit, this);\n    this.parent.on(events.pathDrag, this.onPathDrag, this);\n  };\n\n  NavigationPane.prototype.removeEventListener = function () {\n    this.parent.off(events.initialEnd, this.onInitialEnd);\n    this.parent.off(events.downloadInit, this.onDownLoadInit);\n    this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n    this.parent.off(events.selectedData, this.onSelectedData);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.pathChanged, this.onPathChanged);\n    this.parent.off(events.pasteEnd, this.onpasteEnd);\n    this.parent.off(events.cutEnd, this.onCutEnd);\n    this.parent.off(events.pasteInit, this.onpasteInit);\n    this.parent.off(events.updateTreeSelection, this.onSelectionChanged);\n    this.parent.off(events.nodeExpand, this.onNodeExpanded);\n    this.parent.off(events.createEnd, this.onCreateEnd);\n    this.parent.off(events.refreshEnd, this.onRefreshEnd);\n    this.parent.off(events.openInit, this.onOpenInit);\n    this.parent.off(events.openEnd, this.onOpenEnd);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.renameInit, this.onRenameInit);\n    this.parent.off(events.renameEnd, this.onRenameEnd);\n    this.parent.off(events.renameEndParent, this.onRenameEndParent);\n    this.parent.off(events.clearPathInit, this.onClearPathInit);\n    this.parent.off(events.deleteInit, this.onDeleteInit);\n    this.parent.off(events.deleteEnd, this.onDeleteEnd);\n    this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n    this.parent.off(events.dropInit, this.onDropInit);\n    this.parent.off(events.dragEnd, this.onDragEnd);\n    this.parent.off(events.dragging, this.onDragging);\n    this.parent.off(events.dropPath, this.onDropPath);\n    this.parent.off(events.detailsInit, this.onDetailsInit);\n    this.parent.off(events.menuItemData, this.onMenuItemData);\n    this.parent.off(events.pathDrag, this.onPathDrag);\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onDetailsInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      // eslint-disable-next-line\n      var dataobj = this.getTreeData(this.treeObj.selectedNodes[0]);\n      this.parent.itemData = dataobj;\n    }\n  }; // eslint-disable-next-line\n\n\n  NavigationPane.prototype.onMenuItemData = function (args) {\n    if (this.parent.activeModule === this.getModuleName()) {\n      var liEle = closest(args.target, 'li');\n      this.parent.itemData = this.getTreeData(liEle.getAttribute('data-uid'));\n    }\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.onDragging = function (args) {\n    var ele = closest(args.target, 'li');\n\n    if (ele.classList.contains('e-node-collapsed')) {\n      this.isDrag = true;\n      var level = parseInt(ele.getAttribute('aria-level'), 10);\n      this.treeObj.expandAll([ele.getAttribute('data-uid')], level + 1);\n      this.isDrag = false;\n    }\n  };\n\n  NavigationPane.prototype.onDropInit = function (args) {\n    if (this.parent.targetModule === this.getModuleName()) {\n      var dropLi = closest(args.target, 'li');\n      this.parent.dropData = this.getTreeData(dropLi)[0];\n      this.parent.dropPath = this.getDropPath(dropLi, getValue('name', this.parent.dropData));\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the module name.\n   * @private\n   */\n\n\n  NavigationPane.prototype.getModuleName = function () {\n    return 'navigationpane';\n  };\n\n  NavigationPane.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeEventListener();\n\n    if (this.treeObj) {\n      this.unWireEvents();\n      this.treeObj.destroy();\n    }\n  };\n\n  NavigationPane.prototype.wireEvents = function () {\n    this.keyboardModule = new KeyboardEvents(this.treeObj.element, {\n      keyAction: this.keyDown.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n\n  NavigationPane.prototype.unWireEvents = function () {\n    this.keyboardModule.destroy();\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.keyDown = function (e) {\n    var action = e.action;\n\n    switch (action) {\n      case 'altEnter':\n        this.parent.notify(events.detailsInit, {});\n        GetDetails(this.parent, [], this.parent.path, 'details');\n        break;\n\n      case 'esc':\n        removeActive(this.parent);\n        break;\n\n      case 'del':\n        if (this.parent.pathId[0] !== this.activeNode.getAttribute('data-uid')) {\n          this.updateItemData();\n\n          if (!hasEditAccess(this.parent.itemData[0])) {\n            createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n          } else {\n            this.removeNodes = [];\n            createDialog(this.parent, 'Delete');\n          }\n        }\n\n        break;\n\n      case 'ctrlC':\n        copyFiles(this.parent);\n        break;\n\n      case 'ctrlV':\n        this.parent.folderPath = '';\n        pasteHandler(this.parent);\n        break;\n\n      case 'ctrlX':\n        cutFiles(this.parent);\n        break;\n\n      case 'shiftF10':\n        this.updateItemData();\n\n        if (!hasDownloadAccess(this.parent.itemData[0])) {\n          createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionDownload);\n          return;\n        }\n\n        if (this.parent.selectedItems.length !== 0) {\n          this.doDownload();\n        }\n\n        break;\n\n      case 'f2':\n        if (this.parent.selectedItems.length === 0) {\n          // eslint-disable-next-line\n          var data = this.getTreeData(this.treeObj.selectedNodes[0])[0];\n\n          if (!hasEditAccess(data)) {\n            createDeniedDialog(this.parent, data, events.permissionEdit);\n          } else {\n            this.updateRenameData();\n            createDialog(this.parent, 'Rename');\n          }\n        }\n\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  NavigationPane.prototype.getTreeData = function (args) {\n    // eslint-disable-next-line\n    var data = this.treeObj.getTreeData(args);\n\n    for (var i = 0; i < data.length; i++) {\n      if (isNOU(getValue('hasChild', data[i]))) {\n        setValue('hasChild', false, data[i]);\n      }\n    }\n\n    return data;\n  };\n\n  NavigationPane.prototype.updateRenameData = function () {\n    this.updateItemData();\n    this.parent.currentItemText = getValue('name', this.parent.itemData[0]);\n  };\n\n  NavigationPane.prototype.updateItemData = function () {\n    // eslint-disable-next-line\n    var data = this.getTreeData(this.treeObj.selectedNodes[0])[0];\n    this.parent.itemData = [data];\n    this.parent.isFile = false;\n  };\n\n  NavigationPane.prototype.updateActionData = function () {\n    this.updateItemData();\n    var newPath = getParentPath(this.parent.path);\n    this.parent.setProperties({\n      path: newPath\n    }, true);\n    this.parent.pathId.pop();\n    this.parent.pathNames.pop();\n  };\n  /* istanbul ignore next */\n\n\n  NavigationPane.prototype.doDownload = function () {\n    var newPath = getParentPath(this.parent.path);\n    var itemId = this.treeObj.selectedNodes[0];\n    var name = itemId === this.parent.pathId[0] ? '' : getValue('name', this.parent.itemData[0]);\n    Download(this.parent, newPath, [name]);\n  };\n\n  return NavigationPane;\n}();\n\nexport { NavigationPane };","map":{"version":3,"sources":["/Users/altynbekkuat/Desktop/NomaLytics/node_modules/@syncfusion/ej2-react-richtexteditor/node_modules/@syncfusion/ej2-filemanager/src/file-manager/layout/navigation-pane.js"],"names":["TreeView","BaseTreeView","isNullOrUndefined","isNOU","select","setValue","getValue","Draggable","KeyboardEvents","closest","DataManager","Query","events","CLS","read","Download","GetDetails","Delete","createDialog","updatePath","getPath","getDirectories","createVirtualDragElement","dragStopHandler","dragStartHandler","draggingHandler","getDirectoryPath","getModule","copyFiles","cutFiles","removeActive","pasteHandler","getParentPath","readDropPath","hasEditAccess","createDeniedDialog","hasDownloadAccess","getAccessClass","NavigationPane","parent","removeNodes","moveNames","expandTree","isDrag","isPathDragged","isRenameParent","isRightClick","renameParent","previousSelected","isNodeClickCalled","restrictSelecting","addEventListener","keyConfigs","altEnter","esc","del","ctrlX","ctrlC","ctrlV","ctrlShiftN","shiftF10","f2","prototype","onInit","treeObj","rootData","pathId","feParent","attr","id","fields","dataSource","parentID","expanded","selected","text","hasChildren","iconCss","htmlAttributes","tooltip","enableHtmlSanitizer","sortOrder","navigationPaneSettings","nodeSelecting","onNodeSelecting","bind","nodeSelected","onNodeSelected","nodeExpanding","onNodeExpand","nodeClicked","onNodeClicked","allowEditing","nodeEditing","onNodeEditing","drawNode","onDrowNode","enableRtl","dataBound","addDragDrop","isStringTemplate","appendTo","element","TREE_ID","wireEvents","_this","isMobile","allowDragAndDrop","dragObj","destroy","cursorAt","dragCursorPosition","dragTarget","FULLROW","distance","dragArea","drag","dragStart","args","dragStop","enableTailMode","enableAutoScroll","helper","dragHelper","sender","target","classList","contains","dragLi","dragPath","dragData","activeElements","dragNodes","getTreeData","getDragPath","name","push","virtualDragElement","path","getDropPath","node","getAttribute","newText","hasId","eventArgs","fileDetails","nodeData","module","trigger","addChild","files","prevent","directories","length","length_1","folders","_fm_icon","addNodes","isInteracted","activeModule","cancel","selectedNodes","contextmenuModule","contextMenu","enableItems","openFileOnContextMenuClick","data","selectedItems","itemData","activeNode","pasteEnd","pathChanged","visitedItem","breadcrumbbarModule","searchObj","value","isFiltered","searchedItems","previousPath","expandNodeTarget","querySelector","ICONS","LIST_ITEM","onPathDrag","selectResultNode","isId","expandedId","nodeExpand","onNodeExpanded","event","which","setProperties","layout","view","notify","modelChanged","newProp","innerHtml","onPathChanged","isCut","currFiles","feFiles","sNode","ul","LIST_PARENT","updateTree","updateTreeNode","toExpand","expandedNodes","indexOf","removeChildNodes","childs","Array","slice","call","children","onOpenEnd","sleId","expandAll","onOpenInit","onInitialEnd","cwd","onFinalizeEnd","onCreateEnd","onSelectedData","updateItemData","onDeleteInit","updateActionData","name_1","onDeleteEnd","selectedNode","selcetedEle","selectedNodeEle","parentElement","dataBind","onRefreshEnd","onRenameInit","updateRenameData","onRenameEndParent","resultData","executeLocal","where","renamedId","nData","renameText","id_1","onRenameEnd","currentItemText","filterPath","renameEndParent","replace","onPropertyChanged","e","getModuleName","_i","_a","Object","keys","prop","finalizeEnd","oldProp","onDownLoadInit","doDownload","onSelectionChanged","onClearPathInit","onDragEnd","isPasteError","isSearchDrag","getMoveNames","flag","i","isFile","name_2","previousName","index","lastIndexOf","substring","j","fPath","onCutEnd","isSearchCut","targetPath","resultObj","itemname","onDropPath","onpasteEnd","dropData","isDropEnd","isDragDrop","checkDropPath","dropPath","onpasteInit","obj","actionRecords","oncutCopyInit","activeRecords","on","downloadInit","initialEnd","cutEnd","pasteInit","createEnd","selectedData","deleteInit","deleteEnd","refreshEnd","updateTreeSelection","openInit","openEnd","renameInit","renameEnd","clearPathInit","cutCopyInit","dropInit","onDropInit","menuItemData","onMenuItemData","dragEnd","dragging","onDragging","detailsInit","onDetailsInit","pathDrag","removeEventListener","off","dataobj","liEle","ele","level","parseInt","targetModule","dropLi","isDestroyed","unWireEvents","keyboardModule","keyAction","keyDown","eventName","action","permissionEdit","folderPath","permissionDownload","newPath","pop","pathNames","itemId"],"mappings":"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","sourcesContent":["import { TreeView as BaseTreeView } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, select, setValue, getValue, Draggable } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, closest } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { read, Download, GetDetails, Delete } from '../common/operations';\nimport { createDialog } from '../pop-up/dialog';\nimport { updatePath, getPath, getDirectories } from '../common/utility';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getDirectoryPath, getModule } from '../common/index';\nimport { copyFiles, cutFiles, removeActive, pasteHandler, getParentPath, readDropPath } from '../common/index';\nimport { hasEditAccess, createDeniedDialog, hasDownloadAccess, getAccessClass } from '../common/index';\n/**\n * NavigationPane module\n */\nvar NavigationPane = /** @class */ (function () {\n    /**\n     * Constructor for the TreeView module\n     *\n     * @param {IFileManager} parent - specifies the parent element.\n     * @hidden\n     */\n    function NavigationPane(parent) {\n        this.removeNodes = [];\n        this.moveNames = [];\n        this.expandTree = false;\n        this.isDrag = false;\n        this.isPathDragged = false;\n        this.isRenameParent = false;\n        this.isRightClick = false;\n        this.renameParent = null;\n        // Specifies the previously selected nodes in the treeview control.\n        this.previousSelected = null;\n        // Specifies whether the nodeClicked event of the treeview control is triggered or not.\n        this.isNodeClickCalled = false;\n        // Specifies whether to restrict node selection in the treeview control.\n        this.restrictSelecting = false;\n        this.parent = parent;\n        this.addEventListener();\n        this.keyConfigs = {\n            altEnter: 'alt+enter',\n            esc: 'escape',\n            del: 'delete',\n            ctrlX: 'ctrl+x',\n            ctrlC: 'ctrl+c',\n            ctrlV: 'ctrl+v',\n            ctrlShiftN: 'ctrl+shift+n',\n            shiftF10: 'shift+F10',\n            f2: 'f2'\n        };\n    }\n    NavigationPane.prototype.onInit = function () {\n        if (!isNOU(this.treeObj)) {\n            return;\n        }\n        // eslint-disable-next-line\n        var rootData = getValue(this.parent.pathId[0], this.parent.feParent);\n        setValue('_fm_icon', 'e-fe-folder', rootData);\n        // eslint-disable-next-line\n        var attr = {};\n        var id = getValue('id', rootData);\n        if (!isNOU(id)) {\n            setValue('data-id', id, attr);\n        }\n        if (!hasEditAccess(rootData)) {\n            setValue('class', getAccessClass(rootData), attr);\n        }\n        if (!isNOU(attr)) {\n            setValue('_fm_htmlAttr', attr, rootData);\n        }\n        this.treeObj = new BaseTreeView({\n            fields: {\n                dataSource: [rootData], id: '_fm_id', parentID: '_fm_pId', expanded: '_fm_expanded', selected: '_fm_selected', text: 'name',\n                hasChildren: 'hasChild', iconCss: '_fm_icon', htmlAttributes: '_fm_htmlAttr', tooltip: 'name'\n            },\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            sortOrder: this.parent.navigationPaneSettings.sortOrder,\n            nodeSelecting: this.onNodeSelecting.bind(this),\n            nodeSelected: this.onNodeSelected.bind(this),\n            nodeExpanding: this.onNodeExpand.bind(this),\n            nodeClicked: this.onNodeClicked.bind(this),\n            allowEditing: true,\n            nodeEditing: this.onNodeEditing.bind(this),\n            drawNode: this.onDrowNode.bind(this),\n            enableRtl: this.parent.enableRtl,\n            dataBound: this.addDragDrop.bind(this)\n        });\n        this.treeObj.isStringTemplate = true;\n        this.treeObj.appendTo('#' + this.parent.element.id + CLS.TREE_ID);\n        this.wireEvents();\n    };\n    NavigationPane.prototype.addDragDrop = function () {\n        var _this = this;\n        if (!this.parent.isMobile && this.treeObj) {\n            if (this.parent.allowDragAndDrop) {\n                if (this.dragObj) {\n                    this.dragObj.destroy();\n                }\n                this.dragObj = new Draggable(this.treeObj.element, {\n                    cursorAt: this.parent.dragCursorPosition,\n                    dragTarget: '.' + CLS.FULLROW,\n                    distance: 5,\n                    dragArea: this.parent.element,\n                    drag: draggingHandler.bind(this, this.parent),\n                    dragStart: function (args) {\n                        dragStartHandler(_this.parent, args, _this.dragObj);\n                    },\n                    dragStop: dragStopHandler.bind(this, this.parent),\n                    enableTailMode: true,\n                    enableAutoScroll: true,\n                    helper: this.dragHelper.bind(this)\n                });\n            }\n            else if (!this.parent.allowDragAndDrop && this.dragObj) {\n                this.dragObj.destroy();\n            }\n        }\n    };\n    NavigationPane.prototype.dragHelper = function (args) {\n        var dragTarget = args.sender.target;\n        if (!dragTarget.classList.contains(CLS.FULLROW)) {\n            return null;\n        }\n        var dragLi = closest(dragTarget, 'li');\n        this.parent.dragPath = '';\n        this.parent.dragData = [];\n        this.parent.activeElements = [];\n        this.parent.activeElements = [dragLi];\n        this.parent.dragNodes = [];\n        getModule(this.parent, dragLi);\n        // eslint-disable-next-line\n        this.parent.dragData = this.getTreeData(dragLi);\n        this.parent.dragPath = this.getDragPath(dragLi, this.parent.dragData[0].name);\n        this.parent.dragNodes.push(this.parent.dragData[0].name);\n        createVirtualDragElement(this.parent);\n        return this.parent.virtualDragElement;\n    };\n    NavigationPane.prototype.getDragPath = function (dragLi, text) {\n        var path = this.getDropPath(dragLi, text);\n        return getParentPath(path);\n    };\n    NavigationPane.prototype.getDropPath = function (node, text) {\n        var id = node.getAttribute('data-id');\n        var newText = this.parent.hasId ? id : text;\n        return getPath(node, newText, this.parent.hasId);\n    };\n    NavigationPane.prototype.onDrowNode = function (args) {\n        var eventArgs = {\n            element: args.node,\n            fileDetails: args.nodeData,\n            module: 'NavigationPane'\n        };\n        this.parent.trigger('fileLoad', eventArgs);\n    };\n    // eslint-disable-next-line\n    NavigationPane.prototype.addChild = function (files, target, prevent) {\n        // eslint-disable-next-line\n        var directories = getDirectories(files);\n        if (directories.length > 0) {\n            var length_1 = 0;\n            // eslint-disable-next-line\n            var folders = directories;\n            while (length_1 < directories.length) {\n                // eslint-disable-next-line\n                folders[length_1]._fm_icon = 'e-fe-folder';\n                // eslint-disable-next-line\n                var attr = {};\n                var id = getValue('id', folders[length_1]);\n                if (!isNOU(id)) {\n                    setValue('data-id', id, attr);\n                }\n                if (!hasEditAccess(folders[length_1])) {\n                    setValue('class', getAccessClass(folders[length_1]), attr);\n                }\n                if (!isNOU(attr)) {\n                    setValue('_fm_htmlAttr', attr, folders[length_1]);\n                }\n                length_1++;\n            }\n            // eslint-disable-next-line\n            this.treeObj.addNodes(directories, target, null, prevent);\n        }\n    };\n    // Node Selecting event handler\n    NavigationPane.prototype.onNodeSelecting = function (args) {\n        if (!args.isInteracted && !this.isRightClick && !this.isPathDragged && !this.isRenameParent || this.restrictSelecting) {\n            this.restrictSelecting = false;\n            this.isNodeClickCalled = false;\n            return;\n        }\n        if (!this.renameParent) {\n            this.parent.activeModule = 'navigationpane';\n            // eslint-disable-next-line\n            var nodeData = this.getTreeData(getValue('id', args.nodeData));\n            var eventArgs = { cancel: false, fileDetails: nodeData[0], module: 'NavigationPane' };\n            this.parent.trigger('fileOpen', eventArgs);\n            args.cancel = eventArgs.cancel;\n            if (args.cancel) {\n                this.restrictSelecting = this.isNodeClickCalled ? this.previousSelected[0] != args.node.getAttribute('data-uid') : false;\n                this.treeObj.selectedNodes = this.isNodeClickCalled ? this.previousSelected : this.treeObj.selectedNodes;\n                this.previousSelected = this.treeObj.selectedNodes;\n                if (!isNOU(this.parent) && !isNOU(this.parent.contextmenuModule)) {\n                    this.parent.contextmenuModule.contextMenu.enableItems(['Open'], true);\n                }\n            }\n        }\n    };\n    // Opens the folder while clicking open context menu item in the treeview.\n    NavigationPane.prototype.openFileOnContextMenuClick = function (node) {\n        var data = this.treeObj.getTreeData(node);\n        // eslint-disable-next-line\n        this.parent.selectedItems = [];\n        this.parent.itemData = data;\n        this.activeNode = node;\n        this.parent.activeModule = 'navigationpane';\n        updatePath(node, this.parent.itemData[0], this.parent);\n        read(this.parent, this.isPathDragged ? events.pasteEnd : events.pathChanged, this.parent.path);\n        this.parent.visitedItem = node;\n        this.isPathDragged = this.isRenameParent = this.isRightClick = false;\n        this.treeObj.selectedNodes = [node.getAttribute('data-uid')];\n    };\n    NavigationPane.prototype.onNodeSelected = function (args) {\n        if (this.parent.breadcrumbbarModule && this.parent.breadcrumbbarModule.searchObj && !this.renameParent) {\n            this.parent.breadcrumbbarModule.searchObj.element.value = '';\n            this.parent.isFiltered = false;\n        }\n        this.parent.searchedItems = [];\n        if (!args.isInteracted && !this.isRightClick && !this.isPathDragged && !this.isRenameParent) {\n            return;\n        }\n        this.activeNode = args.node;\n        this.parent.activeModule = 'navigationpane';\n        // eslint-disable-next-line\n        var nodeData = this.getTreeData(getValue('id', args.nodeData));\n        this.parent.selectedItems = [];\n        this.parent.itemData = nodeData;\n        var previousPath = this.parent.path;\n        updatePath(args.node, this.parent.itemData[0], this.parent);\n        if (previousPath !== this.parent.path) {\n            this.expandNodeTarget = null;\n            if (args.node.querySelector('.' + CLS.ICONS) && args.node.querySelector('.' + CLS.LIST_ITEM) === null) {\n                this.expandNodeTarget = 'add';\n            }\n            read(this.parent, this.isPathDragged ? events.pasteEnd : events.pathChanged, this.parent.path);\n            this.parent.visitedItem = args.node;\n        }\n        this.isPathDragged = this.isRenameParent = this.isRightClick = false;\n    };\n    /* istanbul ignore next */\n    // eslint-disable-next-line\n    NavigationPane.prototype.onPathDrag = function (args) {\n        this.isPathDragged = true;\n        this.selectResultNode(args[0]);\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onNodeExpand = function (args) {\n        if (!args.isInteracted && !this.isDrag) {\n            return;\n        }\n        if (args.node.querySelector('.' + CLS.LIST_ITEM) === null) {\n            var text = getValue('text', args.nodeData);\n            var id = args.node.getAttribute('data-id');\n            var isId = isNOU(id) ? false : true;\n            var newText = isNOU(id) ? text : id;\n            var path = getPath(args.node, newText, isId);\n            this.expandNodeTarget = args.node.getAttribute('data-uid');\n            this.parent.expandedId = this.expandNodeTarget;\n            this.parent.itemData = this.getTreeData(getValue('id', args.nodeData));\n            read(this.parent, events.nodeExpand, path);\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onNodeExpanded = function (args) {\n        this.addChild(args.files, this.expandNodeTarget, false);\n        this.parent.expandedId = null;\n    };\n    NavigationPane.prototype.onNodeClicked = function (args) {\n        this.parent.activeModule = 'navigationpane';\n        this.previousSelected = this.treeObj.selectedNodes;\n        this.activeNode = args.node;\n        if ((args.event.which === 3) && (args.node.getAttribute('data-uid') !== this.treeObj.selectedNodes[0])) {\n            this.isRightClick = true;\n            this.isNodeClickCalled = true;\n            this.treeObj.selectedNodes = [args.node.getAttribute('data-uid')];\n        }\n        else if (args.node.getAttribute('data-uid') === this.treeObj.selectedNodes[0] && this.parent.selectedItems.length !== 0) {\n            this.parent.setProperties({ selectedItems: [] }, true);\n            var layout = (this.parent.view === 'LargeIcons') ? 'largeiconsview' : 'detailsview';\n            this.parent.notify(events.modelChanged, { module: layout, newProp: { selectedItems: [] } });\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onNodeEditing = function (args) {\n        if (!isNOU(args.innerHtml)) {\n            args.cancel = true;\n        }\n    };\n    NavigationPane.prototype.onPathChanged = function (args) {\n        this.parent.isCut = false;\n        // eslint-disable-next-line\n        var currFiles = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feFiles);\n        if (this.expandNodeTarget === 'add') {\n            var sNode = select('[data-uid=\"' + this.treeObj.selectedNodes[0] + '\"]', this.treeObj.element);\n            var ul = select('.' + CLS.LIST_PARENT, sNode);\n            if (isNOU(ul)) {\n                this.addChild(args.files, this.treeObj.selectedNodes[0], !this.expandTree);\n            }\n            this.expandNodeTarget = '';\n        }\n        this.expandTree = false;\n        if (isNOU(currFiles)) {\n            setValue(this.parent.pathId[this.parent.pathId.length - 1], args.files, this.parent.feFiles);\n        }\n    };\n    NavigationPane.prototype.updateTree = function (args) {\n        if (this.treeObj) {\n            var id = this.treeObj.selectedNodes[0];\n            this.updateTreeNode(args, id);\n        }\n    };\n    NavigationPane.prototype.updateTreeNode = function (args, id) {\n        var toExpand = this.treeObj.expandedNodes.indexOf(id) === -1 ? false : true;\n        this.removeChildNodes(id);\n        this.addChild(args.files, id, !toExpand);\n    };\n    NavigationPane.prototype.removeChildNodes = function (id) {\n        var sNode = select('[data-uid=\"' + id + '\"]', this.treeObj.element);\n        var parent = select('.' + CLS.LIST_PARENT, sNode);\n        var childs = parent ? Array.prototype.slice.call(parent.children) : null;\n        if (childs) {\n            this.treeObj.removeNodes(childs);\n        }\n    };\n    NavigationPane.prototype.onOpenEnd = function (args) {\n        var sleId = this.parent.pathId[this.parent.pathId.length - 1];\n        this.treeObj.expandAll(this.treeObj.selectedNodes);\n        this.treeObj.selectedNodes = [sleId];\n        this.expandNodeTarget = 'add';\n        this.onPathChanged(args);\n    };\n    NavigationPane.prototype.onOpenInit = function (args) {\n        if (this.parent.activeModule === 'navigationpane') {\n            if (args.target.querySelector('.' + CLS.ICONS)) {\n                this.treeObj.expandAll(this.treeObj.selectedNodes);\n            }\n        }\n    };\n    NavigationPane.prototype.onInitialEnd = function (args) {\n        this.onInit();\n        this.addChild(args.files, getValue('_fm_id', args.cwd), false);\n    };\n    NavigationPane.prototype.onFinalizeEnd = function (args) {\n        this.onInit();\n        var id = getValue('_fm_id', args.cwd);\n        this.removeChildNodes(id);\n        this.addChild(args.files, id, false);\n        this.treeObj.selectedNodes = [this.parent.pathId[this.parent.pathId.length - 1]];\n    };\n    NavigationPane.prototype.onCreateEnd = function (args) {\n        this.updateTree(args);\n    };\n    NavigationPane.prototype.onSelectedData = function () {\n        if (this.parent.activeModule === 'navigationpane') {\n            this.updateItemData();\n        }\n    };\n    NavigationPane.prototype.onDeleteInit = function () {\n        if (this.parent.activeModule === 'navigationpane') {\n            this.updateActionData();\n            var name_1 = getValue('name', this.parent.itemData[0]);\n            Delete(this.parent, [name_1], this.parent.path, 'delete');\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onDeleteEnd = function (args) {\n        if (this.parent.activeModule === 'navigationpane') {\n            var selectedNode = this.treeObj.selectedNodes[0];\n            var selcetedEle = select('[data-uid=\"' + selectedNode + '\"]', this.treeObj.element);\n            var selectedNodeEle = closest(selcetedEle, '.' + CLS.LIST_PARENT).parentElement;\n            this.treeObj.selectedNodes = [selectedNodeEle.getAttribute('data-uid')];\n            this.treeObj.dataBind();\n        }\n        this.updateTree(args);\n    };\n    NavigationPane.prototype.onRefreshEnd = function (args) {\n        this.updateTree(args);\n    };\n    NavigationPane.prototype.onRenameInit = function () {\n        if (this.parent.activeModule === 'navigationpane') {\n            this.updateRenameData();\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onRenameEndParent = function (args) {\n        var id = this.renameParent ? this.renameParent : this.parent.pathId[this.parent.pathId.length - 1];\n        this.expandTree = this.treeObj.expandedNodes.indexOf(this.treeObj.selectedNodes[0]) !== -1;\n        this.updateTreeNode(args, id);\n        this.parent.expandedId = null;\n        if (this.renameParent) {\n            this.renameParent = null;\n        }\n        else {\n            // eslint-disable-next-line\n            var resultData = [];\n            if (this.parent.hasId) {\n                resultData = new DataManager(this.treeObj.getTreeData()).\n                    executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n            }\n            else {\n                // eslint-disable-next-line\n                var nData = new DataManager(this.treeObj.getTreeData()).\n                    executeLocal(new Query().where(this.treeObj.fields.text, 'equal', this.parent.renameText, false));\n                if (nData.length > 0) {\n                    resultData = new DataManager(nData).\n                        executeLocal(new Query().where('_fm_pId', 'equal', id, false));\n                }\n            }\n            if (resultData.length > 0) {\n                this.isRenameParent = true;\n                var id_1 = getValue(this.treeObj.fields.id, resultData[0]);\n                this.treeObj.selectedNodes = [id_1];\n                this.treeObj.dataBind();\n            }\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onRenameEnd = function (args) {\n        if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n            this.updateTree(args);\n        }\n        else {\n            // eslint-disable-next-line\n            var data = this.treeObj.getTreeData();\n            // eslint-disable-next-line\n            var resultData = [];\n            if (this.parent.hasId) {\n                resultData = new DataManager(data).\n                    executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n            }\n            else {\n                // eslint-disable-next-line\n                var nData = new DataManager(data).\n                    executeLocal(new Query().where(this.treeObj.fields.text, 'equal', this.parent.currentItemText, false));\n                if (nData.length > 0) {\n                    resultData = new DataManager(nData).\n                        executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n                }\n            }\n            if (resultData.length > 0) {\n                this.renameParent = getValue(this.treeObj.fields.parentID, resultData[0]);\n                this.parent.expandedId = this.renameParent;\n                this.parent.itemData = this.getTreeData(this.renameParent);\n                read(this.parent, events.renameEndParent, this.parent.filterPath.replace(/\\\\/g, '/'));\n            }\n        }\n    };\n    NavigationPane.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            /* istanbul ignore next */\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowDragAndDrop':\n                    this.addDragDrop();\n                    break;\n                case 'navigationPaneSettings':\n                    read(this.parent, events.finalizeEnd, '/');\n                    if (e.oldProp.navigationPaneSettings.sortOrder !== e.newProp.navigationPaneSettings.sortOrder) {\n                        this.treeObj.sortOrder = e.newProp.navigationPaneSettings.sortOrder;\n                    }\n                    break;\n            }\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onDownLoadInit = function () {\n        this.doDownload();\n    };\n    NavigationPane.prototype.onSelectionChanged = function (e) {\n        this.treeObj.selectedNodes = [e.selectedNode];\n    };\n    NavigationPane.prototype.onClearPathInit = function (e) {\n        this.removeChildNodes(e.selectedNode);\n    };\n    NavigationPane.prototype.onDragEnd = function (args) {\n        var moveNames = [];\n        if (this.parent.isPasteError || this.parent.isSearchDrag) {\n            moveNames = this.getMoveNames(args.files, this.parent.isSearchDrag, this.parent.dragPath);\n        }\n        else {\n            moveNames = this.moveNames;\n        }\n        this.treeObj.removeNodes(moveNames);\n    };\n    // eslint-disable-next-line\n    NavigationPane.prototype.getMoveNames = function (files, flag, path) {\n        var moveNames = [];\n        for (var i = 0; i < files.length; i++) {\n            if (!files[i].isFile) {\n                if (!this.parent.hasId) {\n                    var name_2 = (files[i].previousName);\n                    if (flag) {\n                        path = path + files[i].previousName;\n                        var index = path.lastIndexOf('/');\n                        name_2 = path.substring(index + 1);\n                        path = path.substring(0, index + 1);\n                    }\n                    // eslint-disable-next-line\n                    var resultData = new DataManager(this.treeObj.getTreeData()).\n                        executeLocal(new Query().where(this.treeObj.fields.text, 'equal', name_2, false));\n                    for (var j = 0; j < resultData.length; j++) {\n                        var fPath = getValue('filterPath', resultData[j]);\n                        fPath = fPath.replace(/\\\\/g, '/');\n                        if (fPath === path) {\n                            moveNames.push(getValue(this.treeObj.fields.id, resultData[j]));\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return moveNames;\n    };\n    NavigationPane.prototype.onCutEnd = function (args) {\n        var moveNames = [];\n        if (this.parent.isPasteError || this.parent.isSearchCut) {\n            this.moveNames = this.getMoveNames(args.files, this.parent.isSearchCut, this.parent.targetPath);\n        }\n        else {\n            moveNames = this.moveNames;\n        }\n        this.treeObj.removeNodes(moveNames);\n    };\n    /* istanbul ignore next */\n    // eslint-disable-next-line\n    NavigationPane.prototype.selectResultNode = function (resultObj) {\n        if (!this.parent.hasId) {\n            var path = getValue('filterPath', resultObj);\n            var itemname = getValue('name', resultObj);\n            // eslint-disable-next-line\n            var data = new DataManager(this.treeObj.getTreeData()).\n                executeLocal(new Query().where(this.treeObj.fields.text, 'equal', itemname, false));\n            if (data.length > 0) {\n                // eslint-disable-next-line\n                var resultData = new DataManager(data).\n                    executeLocal(new Query().where('filterPath', 'equal', path, false));\n                if (resultData.length > 0) {\n                    var id = getValue(this.treeObj.fields.id, resultData[0]);\n                    this.treeObj.selectedNodes = [id];\n                    this.treeObj.dataBind();\n                }\n            }\n        }\n        else {\n            this.treeObj.selectedNodes = [getValue('_fm_id', resultObj)];\n            this.treeObj.dataBind();\n        }\n    };\n    NavigationPane.prototype.onDropPath = function (args) {\n        this.onpasteEnd(args);\n        this.selectResultNode(this.parent.dropData);\n        this.parent.isDropEnd = !this.parent.isPasteError;\n    };\n    NavigationPane.prototype.onpasteEnd = function (args) {\n        // eslint-disable-next-line\n        var resultData = [];\n        if (this.parent.hasId) {\n            resultData = new DataManager(this.treeObj.getTreeData()).\n                executeLocal(new Query().where('id', 'equal', getValue('id', args.cwd), false));\n        }\n        else {\n            // eslint-disable-next-line\n            var nData = new DataManager(this.treeObj.getTreeData()).\n                executeLocal(new Query().where(this.treeObj.fields.text, 'equal', getValue('name', args.cwd), false));\n            if (nData.length > 0) {\n                resultData = new DataManager(nData).\n                    executeLocal(new Query().where('filterPath', 'equal', getValue('filterPath', args.cwd), false));\n            }\n        }\n        if (resultData.length > 0) {\n            var id = getValue(this.treeObj.fields.id, resultData[0]);\n            var toExpand = this.treeObj.expandedNodes.indexOf(id) === -1;\n            this.removeChildNodes(id);\n            this.addChild(args.files, id, toExpand);\n        }\n        this.parent.expandedId = null;\n        this.onPathChanged(args);\n        if (this.parent.isDragDrop) {\n            this.checkDropPath(args);\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.checkDropPath = function (args) {\n        if (this.parent.hasId) {\n            this.parent.isDropEnd = !this.parent.isPasteError;\n            readDropPath(this.parent);\n            return;\n        }\n        if ((this.parent.dropPath.indexOf(getDirectoryPath(this.parent, args)) === -1)) {\n            this.parent.isDropEnd = false;\n            readDropPath(this.parent);\n        }\n        else {\n            this.parent.isDropEnd = !this.parent.isPasteError;\n        }\n    };\n    NavigationPane.prototype.onpasteInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.updateItemData();\n        }\n        this.moveNames = [];\n        // eslint-disable-next-line\n        var obj = this.parent.isDragDrop ? this.parent.dragData : this.parent.actionRecords;\n        for (var i = 0; i < obj.length; i++) {\n            if (getValue('isFile', obj[i]) === false) {\n                this.moveNames.push(getValue('_fm_id', obj[i]));\n            }\n        }\n    };\n    NavigationPane.prototype.oncutCopyInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.activeRecords = this.getTreeData(this.treeObj.selectedNodes[0]);\n            this.parent.activeElements = [this.activeNode];\n        }\n    };\n    NavigationPane.prototype.addEventListener = function () {\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.downloadInit, this.onDownLoadInit, this);\n        this.parent.on(events.initialEnd, this.onInitialEnd, this);\n        this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n        this.parent.on(events.pathChanged, this.onPathChanged, this);\n        this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n        this.parent.on(events.cutEnd, this.onCutEnd, this);\n        this.parent.on(events.pasteInit, this.onpasteInit, this);\n        this.parent.on(events.nodeExpand, this.onNodeExpanded, this);\n        this.parent.on(events.createEnd, this.onCreateEnd, this);\n        this.parent.on(events.selectedData, this.onSelectedData, this);\n        this.parent.on(events.deleteInit, this.onDeleteInit, this);\n        this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n        this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n        this.parent.on(events.updateTreeSelection, this.onSelectionChanged, this);\n        this.parent.on(events.openInit, this.onOpenInit, this);\n        this.parent.on(events.openEnd, this.onOpenEnd, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.renameInit, this.onRenameInit, this);\n        this.parent.on(events.renameEnd, this.onRenameEnd, this);\n        this.parent.on(events.renameEndParent, this.onRenameEndParent, this);\n        this.parent.on(events.clearPathInit, this.onClearPathInit, this);\n        this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n        this.parent.on(events.dropInit, this.onDropInit, this);\n        this.parent.on(events.menuItemData, this.onMenuItemData, this);\n        this.parent.on(events.dragEnd, this.onDragEnd, this);\n        this.parent.on(events.dragging, this.onDragging, this);\n        this.parent.on(events.dropPath, this.onDropPath, this);\n        this.parent.on(events.detailsInit, this.onDetailsInit, this);\n        this.parent.on(events.pathDrag, this.onPathDrag, this);\n    };\n    NavigationPane.prototype.removeEventListener = function () {\n        this.parent.off(events.initialEnd, this.onInitialEnd);\n        this.parent.off(events.downloadInit, this.onDownLoadInit);\n        this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n        this.parent.off(events.selectedData, this.onSelectedData);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.pathChanged, this.onPathChanged);\n        this.parent.off(events.pasteEnd, this.onpasteEnd);\n        this.parent.off(events.cutEnd, this.onCutEnd);\n        this.parent.off(events.pasteInit, this.onpasteInit);\n        this.parent.off(events.updateTreeSelection, this.onSelectionChanged);\n        this.parent.off(events.nodeExpand, this.onNodeExpanded);\n        this.parent.off(events.createEnd, this.onCreateEnd);\n        this.parent.off(events.refreshEnd, this.onRefreshEnd);\n        this.parent.off(events.openInit, this.onOpenInit);\n        this.parent.off(events.openEnd, this.onOpenEnd);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.renameInit, this.onRenameInit);\n        this.parent.off(events.renameEnd, this.onRenameEnd);\n        this.parent.off(events.renameEndParent, this.onRenameEndParent);\n        this.parent.off(events.clearPathInit, this.onClearPathInit);\n        this.parent.off(events.deleteInit, this.onDeleteInit);\n        this.parent.off(events.deleteEnd, this.onDeleteEnd);\n        this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n        this.parent.off(events.dropInit, this.onDropInit);\n        this.parent.off(events.dragEnd, this.onDragEnd);\n        this.parent.off(events.dragging, this.onDragging);\n        this.parent.off(events.dropPath, this.onDropPath);\n        this.parent.off(events.detailsInit, this.onDetailsInit);\n        this.parent.off(events.menuItemData, this.onMenuItemData);\n        this.parent.off(events.pathDrag, this.onPathDrag);\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onDetailsInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            // eslint-disable-next-line\n            var dataobj = this.getTreeData(this.treeObj.selectedNodes[0]);\n            this.parent.itemData = dataobj;\n        }\n    };\n    // eslint-disable-next-line\n    NavigationPane.prototype.onMenuItemData = function (args) {\n        if (this.parent.activeModule === this.getModuleName()) {\n            var liEle = closest(args.target, 'li');\n            this.parent.itemData = this.getTreeData(liEle.getAttribute('data-uid'));\n        }\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.onDragging = function (args) {\n        var ele = closest(args.target, 'li');\n        if (ele.classList.contains('e-node-collapsed')) {\n            this.isDrag = true;\n            var level = parseInt(ele.getAttribute('aria-level'), 10);\n            this.treeObj.expandAll([ele.getAttribute('data-uid')], level + 1);\n            this.isDrag = false;\n        }\n    };\n    NavigationPane.prototype.onDropInit = function (args) {\n        if (this.parent.targetModule === this.getModuleName()) {\n            var dropLi = closest(args.target, 'li');\n            this.parent.dropData = this.getTreeData(dropLi)[0];\n            this.parent.dropPath = this.getDropPath(dropLi, getValue('name', this.parent.dropData));\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the module name.\n     * @private\n     */\n    NavigationPane.prototype.getModuleName = function () {\n        return 'navigationpane';\n    };\n    NavigationPane.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        if (this.treeObj) {\n            this.unWireEvents();\n            this.treeObj.destroy();\n        }\n    };\n    NavigationPane.prototype.wireEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.treeObj.element, {\n            keyAction: this.keyDown.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    NavigationPane.prototype.unWireEvents = function () {\n        this.keyboardModule.destroy();\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.keyDown = function (e) {\n        var action = e.action;\n        switch (action) {\n            case 'altEnter':\n                this.parent.notify(events.detailsInit, {});\n                GetDetails(this.parent, [], this.parent.path, 'details');\n                break;\n            case 'esc':\n                removeActive(this.parent);\n                break;\n            case 'del':\n                if (this.parent.pathId[0] !== this.activeNode.getAttribute('data-uid')) {\n                    this.updateItemData();\n                    if (!hasEditAccess(this.parent.itemData[0])) {\n                        createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n                    }\n                    else {\n                        this.removeNodes = [];\n                        createDialog(this.parent, 'Delete');\n                    }\n                }\n                break;\n            case 'ctrlC':\n                copyFiles(this.parent);\n                break;\n            case 'ctrlV':\n                this.parent.folderPath = '';\n                pasteHandler(this.parent);\n                break;\n            case 'ctrlX':\n                cutFiles(this.parent);\n                break;\n            case 'shiftF10':\n                this.updateItemData();\n                if (!hasDownloadAccess(this.parent.itemData[0])) {\n                    createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionDownload);\n                    return;\n                }\n                if (this.parent.selectedItems.length !== 0) {\n                    this.doDownload();\n                }\n                break;\n            case 'f2':\n                if (this.parent.selectedItems.length === 0) {\n                    // eslint-disable-next-line\n                    var data = this.getTreeData(this.treeObj.selectedNodes[0])[0];\n                    if (!hasEditAccess(data)) {\n                        createDeniedDialog(this.parent, data, events.permissionEdit);\n                    }\n                    else {\n                        this.updateRenameData();\n                        createDialog(this.parent, 'Rename');\n                    }\n                }\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    NavigationPane.prototype.getTreeData = function (args) {\n        // eslint-disable-next-line\n        var data = this.treeObj.getTreeData(args);\n        for (var i = 0; i < data.length; i++) {\n            if (isNOU(getValue('hasChild', data[i]))) {\n                setValue('hasChild', false, data[i]);\n            }\n        }\n        return data;\n    };\n    NavigationPane.prototype.updateRenameData = function () {\n        this.updateItemData();\n        this.parent.currentItemText = getValue('name', this.parent.itemData[0]);\n    };\n    NavigationPane.prototype.updateItemData = function () {\n        // eslint-disable-next-line\n        var data = this.getTreeData(this.treeObj.selectedNodes[0])[0];\n        this.parent.itemData = [data];\n        this.parent.isFile = false;\n    };\n    NavigationPane.prototype.updateActionData = function () {\n        this.updateItemData();\n        var newPath = getParentPath(this.parent.path);\n        this.parent.setProperties({ path: newPath }, true);\n        this.parent.pathId.pop();\n        this.parent.pathNames.pop();\n    };\n    /* istanbul ignore next */\n    NavigationPane.prototype.doDownload = function () {\n        var newPath = getParentPath(this.parent.path);\n        var itemId = this.treeObj.selectedNodes[0];\n        var name = (itemId === this.parent.pathId[0]) ? '' : getValue('name', this.parent.itemData[0]);\n        Download(this.parent, newPath, [name]);\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n"]},"metadata":{},"sourceType":"module"}