{"ast":null,"code":"import { Animation, Browser, createElement } from '@syncfusion/ej2-base';\nimport { textElement, getValueXByPoint, stopTimer, getValueYByPoint, ChartLocation, withInBounds, removeElement } from '../../common/utils/helper';\nimport { PathOption, Rect, TextOption, findDirection, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\n/**\n * `Crosshair` module is used to render the crosshair for chart.\n */\n\nvar Crosshair =\n/** @class */\nfunction () {\n  /**\n   * Constructor for crosshair module.\n   *\n   * @private\n   */\n  function Crosshair(chart) {\n    this.arrowLocation = new ChartLocation(0, 0);\n    this.rx = 2;\n    this.ry = 2;\n    this.chart = chart;\n    this.elementID = this.chart.element.id;\n    this.svgRenderer = new SvgRenderer(this.chart.element.id);\n    this.addEventListener();\n  }\n  /**\n   * @hidden\n   */\n\n\n  Crosshair.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n    this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n    this.chart.on('tapHold', this.longPress, this);\n  };\n\n  Crosshair.prototype.mouseUpHandler = function () {\n    if (this.chart.startMove) {\n      this.removeCrosshair(2000);\n    }\n  };\n\n  Crosshair.prototype.mouseLeaveHandler = function () {\n    this.removeCrosshair(1000);\n  };\n\n  Crosshair.prototype.mouseMoveHandler = function (event) {\n    var chart = this.chart;\n\n    if (event.type === 'touchmove' && (Browser.isIos || Browser.isIos7) && chart.startMove && event.preventDefault) {\n      event.preventDefault();\n    } // Tooltip for chart series.\n\n\n    if (!chart.disableTrackTooltip) {\n      if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n        if (chart.startMove || !chart.isTouch) {\n          this.crosshair();\n        }\n      } else {\n        this.removeCrosshair(1000);\n      }\n    }\n  };\n  /**\n   * Handles the long press on chart.\n   *\n   * @returns {boolean} false\n   * @private\n   */\n\n\n  Crosshair.prototype.longPress = function () {\n    var chart = this.chart;\n\n    if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n      this.crosshair();\n    }\n\n    return false;\n  };\n  /**\n   * Renders the crosshair.\n   *\n   * @returns {void}\n   */\n\n\n  Crosshair.prototype.crosshair = function () {\n    var chart = this.chart;\n    var horizontalCross = '';\n    var verticalCross = '';\n    var options;\n    var axisTooltipGroup = document.getElementById(this.elementID + '_crosshair_axis');\n    var crosshair = chart.crosshair;\n    var tooltipdiv = document.getElementById(this.elementID + '_tooltip');\n    var chartRect = chart.chartAxisLayoutPanel.seriesClipRect;\n    var crossGroup = chart.enableCanvas ? document.getElementById(this.elementID + '_Secondary_Element') : document.getElementById(this.elementID + '_UserInteraction');\n    var crosshairsvg;\n    var cross = document.getElementById(this.elementID + '_Crosshair');\n\n    if (chart.enableCanvas) {\n      if (!cross) {\n        cross = createElement('div', {\n          id: this.elementID + '_Crosshair',\n          styles: 'position: absolute; pointer-events: none'\n        });\n        crossGroup.appendChild(cross);\n      }\n    }\n\n    this.stopAnimation();\n\n    if (chart.tooltip.enable && !withInBounds(chart.tooltipModule.valueX, chart.tooltipModule.valueY, chartRect)) {\n      return null;\n    }\n\n    if (chart.stockChart && chart.stockChart.onPanning) {\n      this.removeCrosshair(1000);\n      return null;\n    }\n\n    this.valueX = chart.tooltip.enable ? chart.tooltipModule.valueX : chart.mouseX;\n    this.valueY = chart.tooltip.enable ? chart.tooltipModule.valueY : chart.mouseY;\n\n    if (!chart.enableCanvas) {\n      crossGroup.setAttribute('opacity', '1');\n    }\n\n    if (crosshair.lineType === 'Both' || crosshair.lineType === 'Horizontal') {\n      horizontalCross += 'M ' + chartRect.x + ' ' + this.valueY + ' L ' + (chartRect.x + chartRect.width) + ' ' + this.valueY;\n    }\n\n    if (crosshair.lineType === 'Both' || crosshair.lineType === 'Vertical') {\n      verticalCross += 'M ' + this.valueX + ' ' + chartRect.y + ' L ' + this.valueX + ' ' + (chartRect.y + chartRect.height);\n    }\n\n    if (chart.enableCanvas) {\n      if (!axisTooltipGroup) {\n        axisTooltipGroup = this.svgRenderer.createGroup({\n          'id': this.elementID + '_crosshair_axis'\n        });\n      }\n\n      var elementID = chart.tooltip.enable ? chart.element.id + '_tooltip_svg' : chart.element.id + '_svg';\n      crosshairsvg = this.svgRenderer.createSvg({\n        id: elementID,\n        width: chart.availableSize.width,\n        height: chart.availableSize.height\n      });\n\n      if (chart.tooltip.enable) {\n        tooltipdiv = !tooltipdiv ? chart.tooltipModule.createElement() : tooltipdiv;\n        tooltipdiv.appendChild(crosshairsvg);\n        crossGroup.appendChild(tooltipdiv);\n      }\n\n      options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\n      this.drawCrosshairLine(options, cross, chartRect.x, this.valueY, chartRect.width, 0, horizontalCross);\n      /**\n       * due to not working for vertical line side I added new option\n       * options.d = verticalCross; options.id = this.elementID + '_VerticalLine';\n       */\n\n      options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\n      this.drawCrosshairLine(options, cross, this.valueX, chartRect.y, 0, chartRect.height, verticalCross);\n      this.renderAxisTooltip(chart, chartRect, axisTooltipGroup);\n      crosshairsvg.appendChild(axisTooltipGroup);\n\n      if (!chart.tooltip.enable) {\n        cross.appendChild(crosshairsvg);\n      }\n    } else {\n      if (crossGroup.childNodes.length === 0) {\n        axisTooltipGroup = chart.renderer.createGroup({\n          'id': this.elementID + '_crosshair_axis'\n        });\n        options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\n        this.renderCrosshairLine(options, crossGroup);\n        options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\n        this.renderCrosshairLine(options, crossGroup);\n        crossGroup.appendChild(axisTooltipGroup);\n        this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n      } else {\n        document.getElementById(this.elementID + '_HorizontalLine').setAttribute('d', horizontalCross);\n        document.getElementById(this.elementID + '_VerticalLine').setAttribute('d', verticalCross);\n        this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n      }\n    }\n  };\n\n  Crosshair.prototype.renderCrosshairLine = function (options, crossGroup) {\n    var htmlObject = this.chart.renderer.drawPath(options);\n    crossGroup.appendChild(htmlObject);\n  };\n\n  Crosshair.prototype.drawCrosshairLine = function (options, crossGroup, left, top, width, height, direction) {\n    if (!document.getElementById(options.id) && direction) {\n      var line = createElement('div', {\n        id: options.id\n      });\n      crossGroup.appendChild(line);\n    }\n\n    if (document.getElementById(options.id)) {\n      var style = 'top:' + top.toString() + 'px;' + 'left:' + left.toString() + 'px;' + 'width:' + width + 'px;' + 'height:' + height + 'px;' + 'fill:' + options.stroke + ';' + 'border: 0.5px solid ' + options.stroke + ';' + 'opacity: ' + options.opacity + ' ; ' + 'position: absolute';\n      var crosshairline = document.getElementById(options.id);\n      var crosshairtooltip = document.getElementById(this.elementID + '_crosshair_axis');\n      crosshairline.style.cssText = style;\n      crossGroup.style.opacity = '1';\n\n      if (crosshairtooltip) {\n        crosshairtooltip.style.opacity = '1';\n      }\n    }\n  };\n\n  Crosshair.prototype.renderAxisTooltip = function (chart, chartRect, axisGroup) {\n    var axis;\n    var text;\n    var rect;\n    var pathElement;\n    var textElem;\n    var options;\n    var padding = 5;\n    var direction;\n    var axisRect;\n\n    for (var k = 0, length_1 = chart.axisCollections.length; k < length_1; k++) {\n      axis = chart.axisCollections[k];\n      axisRect = !axis.placeNextToAxisLine ? axis.rect : axis.updatedRect;\n\n      if (axis.crosshairTooltip.enable) {\n        if (this.valueX <= axisRect.x + axisRect.width && axisRect.x <= this.valueX || this.valueY <= axisRect.y + axisRect.height && axisRect.y <= this.valueY) {\n          pathElement = document.getElementById(this.elementID + '_axis_tooltip_' + k);\n          textElem = document.getElementById(this.elementID + '_axis_tooltip_text_' + k);\n          text = this.getAxisText(axis);\n\n          if (!text) {\n            continue;\n          }\n\n          rect = this.tooltipLocation(text, axis, chartRect, axisRect);\n\n          if (pathElement === null) {\n            if (chart.enableCanvas) {\n              pathElement = this.svgRenderer.drawPath({\n                'id': this.elementID + '_axis_tooltip_' + k,\n                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n              });\n            } else {\n              pathElement = chart.renderer.drawPath({\n                'id': this.elementID + '_axis_tooltip_' + k,\n                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n              }, null);\n            }\n\n            axisGroup.appendChild(pathElement);\n            options = new TextOption(this.elementID + '_axis_tooltip_text_' + k, 0, 0, 'start', text);\n            var render = chart.enableCanvas ? this.svgRenderer : chart.renderer;\n            textElem = textElement(render, options, axis.crosshairTooltip.textStyle, axis.crosshairTooltip.textStyle.color || chart.themeStyle.crosshairLabel, axisGroup, null, null, null, null, null, null, null, null, chart.enableCanvas);\n          }\n\n          direction = findDirection(this.rx, this.ry, rect, this.arrowLocation, 10, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY);\n          pathElement.setAttribute('d', direction);\n          textElem.textContent = text;\n          textElem.setAttribute('x', (rect.x + padding).toString());\n          textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / 4).toString());\n        } else {\n          removeElement(this.elementID + '_axis_tooltip_' + k);\n          removeElement(this.elementID + '_axis_tooltip_text_' + k);\n        }\n      }\n    }\n  };\n\n  Crosshair.prototype.getAxisText = function (axis) {\n    var value;\n    this.isBottom = false;\n    this.isTop = false;\n    this.isLeft = false;\n    this.isRight = false;\n    var labelValue = axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks' ? 0.5 : 0;\n    var isOpposed = axis.isAxisOpposedPosition;\n\n    if (axis.orientation === 'Horizontal') {\n      value = getValueXByPoint(Math.abs(this.valueX - axis.rect.x), axis.rect.width, axis) + labelValue;\n      this.isBottom = !isOpposed;\n      this.isTop = isOpposed;\n    } else {\n      value = getValueYByPoint(Math.abs(this.valueY - axis.rect.y), axis.rect.height, axis) + labelValue;\n      this.isRight = isOpposed;\n      this.isLeft = !isOpposed;\n    }\n\n    if (axis.valueType === 'DateTime') {\n      return axis.format(new Date(value));\n    } else if (axis.valueType === 'Category') {\n      return axis.labels[Math.floor(value)];\n    } else if (axis.valueType === 'DateTimeCategory') {\n      return this.chart.dateTimeCategoryModule.getIndexedAxisLabel(axis.labels[Math.floor(value)], axis.format);\n    } else if (axis.valueType === 'Logarithmic') {\n      return value = axis.format(Math.pow(axis.logBase, value));\n    } else {\n      var customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n      return customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(value)) : axis.format(value);\n    }\n  };\n\n  Crosshair.prototype.tooltipLocation = function (text, axis, bounds, axisRect) {\n    var padding = 5;\n    var arrowPadding = 10;\n    var tooltipRect;\n    var boundsX = bounds.x;\n    var boundsY = bounds.y;\n    var islabelInside = axis.labelPosition === 'Inside';\n    var scrollBarHeight = axis.scrollbarSettings.enable || axis.zoomingScrollBar && axis.zoomingScrollBar.svgObject ? axis.scrollBarHeight : 0;\n    this.elementSize = measureText(text, axis.crosshairTooltip.textStyle);\n    var isOpposed = axis.isAxisOpposedPosition;\n\n    if (axis.orientation === 'Horizontal') {\n      var yLocation = islabelInside ? axisRect.y - this.elementSize.height - (padding * 2 + arrowPadding) : axisRect.y + scrollBarHeight;\n      var height = islabelInside ? axisRect.y - this.elementSize.height - arrowPadding : axisRect.y + arrowPadding;\n      this.arrowLocation = new ChartLocation(this.valueX, yLocation);\n      tooltipRect = new Rect(this.valueX - this.elementSize.width / 2 - padding, height + (!islabelInside ? scrollBarHeight : 0), this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n\n      if (isOpposed) {\n        tooltipRect.y = islabelInside ? axisRect.y : axisRect.y - (this.elementSize.height + padding * 2 + arrowPadding) - scrollBarHeight;\n      }\n\n      if (tooltipRect.x < boundsX) {\n        tooltipRect.x = boundsX;\n      }\n\n      if (tooltipRect.x + tooltipRect.width > boundsX + bounds.width) {\n        tooltipRect.x -= tooltipRect.x + tooltipRect.width - (boundsX + bounds.width);\n      }\n\n      if (this.arrowLocation.x + arrowPadding / 2 > tooltipRect.x + tooltipRect.width - this.rx) {\n        this.arrowLocation.x = tooltipRect.x + tooltipRect.width - this.rx - arrowPadding / 2;\n      }\n\n      if (this.arrowLocation.x - arrowPadding / 2 < tooltipRect.x + this.rx) {\n        this.arrowLocation.x = tooltipRect.x + this.rx + arrowPadding / 2;\n      }\n    } else {\n      scrollBarHeight = scrollBarHeight * (isOpposed ? 1 : -1);\n      this.arrowLocation = new ChartLocation(axisRect.x, this.valueY);\n      var width = islabelInside ? axisRect.x - scrollBarHeight : axisRect.x - this.elementSize.width - (padding * 2 + arrowPadding);\n      tooltipRect = new Rect(width + scrollBarHeight, this.valueY - this.elementSize.height / 2 - padding, this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n\n      if (isOpposed) {\n        tooltipRect.x = islabelInside ? axisRect.x - this.elementSize.width - arrowPadding : axisRect.x + arrowPadding + scrollBarHeight;\n\n        if (tooltipRect.x + tooltipRect.width > this.chart.availableSize.width) {\n          this.arrowLocation.x -= tooltipRect.x + tooltipRect.width - this.chart.availableSize.width;\n          tooltipRect.x -= tooltipRect.x + tooltipRect.width - this.chart.availableSize.width;\n        }\n      } else {\n        if (tooltipRect.x < 0) {\n          this.arrowLocation.x -= tooltipRect.x;\n          tooltipRect.x = 0;\n        }\n      }\n\n      if (tooltipRect.y < boundsY) {\n        tooltipRect.y = boundsY;\n      }\n\n      if (tooltipRect.y + tooltipRect.height >= boundsY + bounds.height) {\n        tooltipRect.y -= tooltipRect.y + tooltipRect.height - (boundsY + bounds.height);\n      }\n\n      if (this.arrowLocation.y + arrowPadding / 2 > tooltipRect.y + tooltipRect.height - this.ry) {\n        this.arrowLocation.y = tooltipRect.y + tooltipRect.height - this.ry - arrowPadding / 2;\n      }\n\n      if (this.arrowLocation.y - arrowPadding / 2 < tooltipRect.y + this.ry) {\n        this.arrowLocation.y = tooltipRect.y + this.ry + arrowPadding / 2;\n      }\n    }\n\n    return tooltipRect;\n  };\n\n  Crosshair.prototype.stopAnimation = function () {\n    stopTimer(this.crosshairInterval);\n  };\n\n  Crosshair.prototype.progressAnimation = function () {\n    stopTimer(this.crosshairInterval);\n  };\n  /**\n   * Removes the crosshair on mouse leave.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Crosshair.prototype.removeCrosshair = function (duration) {\n    var chart = this.chart;\n    var crosshair = chart.enableCanvas ? document.getElementById(this.elementID + '_Crosshair') : document.getElementById(this.elementID + '_UserInteraction');\n    var crosshairtooltip = chart.enableCanvas ? document.getElementById(this.elementID + '_crosshair_axis') : null;\n    this.stopAnimation();\n\n    if (crosshair && crosshair.getAttribute('opacity') !== '0') {\n      this.crosshairInterval = +setTimeout(function () {\n        new Animation({}).animate(crosshair, {\n          duration: 200,\n          progress: function (args) {\n            // crosshair.removeAttribute('e-animate');\n            crosshair.style.animation = '';\n\n            if (!chart.enableCanvas) {\n              crosshair.setAttribute('opacity', (1 - args.timeStamp / args.duration).toString());\n            } else {\n              crosshair.style.opacity = (1 - args.timeStamp / args.duration).toString();\n              crosshairtooltip.style.opacity = (1 - args.timeStamp / args.duration).toString();\n            }\n          },\n          end: function () {\n            if (chart.enableCanvas) {\n              crosshair.style.opacity = '0';\n              crosshairtooltip.style.opacity = '0';\n            } else {\n              crosshair.setAttribute('opacity', '0');\n            }\n\n            chart.startMove = false;\n\n            if (chart.tooltipModule) {\n              chart.tooltipModule.valueX = null;\n              chart.tooltipModule.valueY = null;\n            }\n          }\n        });\n      }, duration);\n    }\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} module name\n   */\n\n\n  Crosshair.prototype.getModuleName = function () {\n    /**\n     * Returns the module name\n     */\n    return 'Crosshair';\n  };\n  /**\n   * To destroy the crosshair.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Crosshair.prototype.destroy = function () {\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return Crosshair;\n}();\n\nexport { Crosshair };","map":{"version":3,"sources":["/Users/altynbekkuat/Desktop/NomaLytics/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/chart/user-interaction/crosshair.js"],"names":["Animation","Browser","createElement","textElement","getValueXByPoint","stopTimer","getValueYByPoint","ChartLocation","withInBounds","removeElement","PathOption","Rect","TextOption","findDirection","measureText","SvgRenderer","Crosshair","chart","arrowLocation","rx","ry","elementID","element","id","svgRenderer","addEventListener","prototype","isDestroyed","cancelEvent","isPointer","on","touchMoveEvent","mouseMoveHandler","touchEndEvent","mouseUpHandler","mouseLeaveHandler","longPress","startMove","removeCrosshair","event","type","isIos","isIos7","preventDefault","disableTrackTooltip","mouseX","mouseY","chartAxisLayoutPanel","seriesClipRect","isTouch","crosshair","horizontalCross","verticalCross","options","axisTooltipGroup","document","getElementById","tooltipdiv","chartRect","crossGroup","enableCanvas","crosshairsvg","cross","styles","appendChild","stopAnimation","tooltip","enable","tooltipModule","valueX","valueY","stockChart","onPanning","setAttribute","lineType","x","width","y","height","createGroup","createSvg","availableSize","line","horizontalLineColor","color","themeStyle","crosshairLine","opacity","dashArray","drawCrosshairLine","verticalLineColor","renderAxisTooltip","childNodes","length","renderer","renderCrosshairLine","lastChild","htmlObject","drawPath","left","top","direction","style","toString","stroke","crosshairline","crosshairtooltip","cssText","axisGroup","axis","text","rect","pathElement","textElem","padding","axisRect","k","length_1","axisCollections","placeNextToAxisLine","updatedRect","crosshairTooltip","getAxisText","tooltipLocation","fill","crosshairFill","render","textStyle","crosshairLabel","isTop","isBottom","isLeft","textContent","elementSize","value","isRight","labelValue","valueType","labelPlacement","isOpposed","isAxisOpposedPosition","orientation","Math","abs","format","Date","labels","floor","dateTimeCategoryModule","getIndexedAxisLabel","pow","logBase","customLabelFormat","labelFormat","match","replace","bounds","arrowPadding","tooltipRect","boundsX","boundsY","islabelInside","labelPosition","scrollBarHeight","scrollbarSettings","zoomingScrollBar","svgObject","yLocation","crosshairInterval","progressAnimation","duration","getAttribute","setTimeout","animate","progress","args","animation","timeStamp","end","getModuleName","destroy"],"mappings":"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","sourcesContent":["import { Animation, Browser, createElement } from '@syncfusion/ej2-base';\nimport { textElement, getValueXByPoint, stopTimer, getValueYByPoint, ChartLocation, withInBounds, removeElement } from '../../common/utils/helper';\nimport { PathOption, Rect, TextOption, findDirection, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\n/**\n * `Crosshair` module is used to render the crosshair for chart.\n */\nvar Crosshair = /** @class */ (function () {\n    /**\n     * Constructor for crosshair module.\n     *\n     * @private\n     */\n    function Crosshair(chart) {\n        this.arrowLocation = new ChartLocation(0, 0);\n        this.rx = 2;\n        this.ry = 2;\n        this.chart = chart;\n        this.elementID = this.chart.element.id;\n        this.svgRenderer = new SvgRenderer(this.chart.element.id);\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Crosshair.prototype.addEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n        this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n        this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n        this.chart.on('tapHold', this.longPress, this);\n    };\n    Crosshair.prototype.mouseUpHandler = function () {\n        if (this.chart.startMove) {\n            this.removeCrosshair(2000);\n        }\n    };\n    Crosshair.prototype.mouseLeaveHandler = function () {\n        this.removeCrosshair(1000);\n    };\n    Crosshair.prototype.mouseMoveHandler = function (event) {\n        var chart = this.chart;\n        if (event.type === 'touchmove' && (Browser.isIos || Browser.isIos7) && chart.startMove && event.preventDefault) {\n            event.preventDefault();\n        }\n        // Tooltip for chart series.\n        if (!chart.disableTrackTooltip) {\n            if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n                if (chart.startMove || !chart.isTouch) {\n                    this.crosshair();\n                }\n            }\n            else {\n                this.removeCrosshair(1000);\n            }\n        }\n    };\n    /**\n     * Handles the long press on chart.\n     *\n     * @returns {boolean} false\n     * @private\n     */\n    Crosshair.prototype.longPress = function () {\n        var chart = this.chart;\n        if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n            this.crosshair();\n        }\n        return false;\n    };\n    /**\n     * Renders the crosshair.\n     *\n     * @returns {void}\n     */\n    Crosshair.prototype.crosshair = function () {\n        var chart = this.chart;\n        var horizontalCross = '';\n        var verticalCross = '';\n        var options;\n        var axisTooltipGroup = document.getElementById(this.elementID + '_crosshair_axis');\n        var crosshair = chart.crosshair;\n        var tooltipdiv = document.getElementById(this.elementID + '_tooltip');\n        var chartRect = chart.chartAxisLayoutPanel.seriesClipRect;\n        var crossGroup = chart.enableCanvas ? document.getElementById(this.elementID + '_Secondary_Element') :\n            document.getElementById(this.elementID + '_UserInteraction');\n        var crosshairsvg;\n        var cross = document.getElementById(this.elementID + '_Crosshair');\n        if (chart.enableCanvas) {\n            if (!cross) {\n                cross = createElement('div', {\n                    id: this.elementID + '_Crosshair', styles: 'position: absolute; pointer-events: none'\n                });\n                crossGroup.appendChild(cross);\n            }\n        }\n        this.stopAnimation();\n        if (chart.tooltip.enable && !withInBounds(chart.tooltipModule.valueX, chart.tooltipModule.valueY, chartRect)) {\n            return null;\n        }\n        if (chart.stockChart && chart.stockChart.onPanning) {\n            this.removeCrosshair(1000);\n            return null;\n        }\n        this.valueX = chart.tooltip.enable ? chart.tooltipModule.valueX : chart.mouseX;\n        this.valueY = chart.tooltip.enable ? chart.tooltipModule.valueY : chart.mouseY;\n        if (!chart.enableCanvas) {\n            crossGroup.setAttribute('opacity', '1');\n        }\n        if (crosshair.lineType === 'Both' || crosshair.lineType === 'Horizontal') {\n            horizontalCross += 'M ' + chartRect.x + ' ' + this.valueY +\n                ' L ' + (chartRect.x + chartRect.width) + ' ' + this.valueY;\n        }\n        if (crosshair.lineType === 'Both' || crosshair.lineType === 'Vertical') {\n            verticalCross += 'M ' + this.valueX + ' ' + chartRect.y +\n                ' L ' + this.valueX + ' ' + (chartRect.y + chartRect.height);\n        }\n        if (chart.enableCanvas) {\n            if (!axisTooltipGroup) {\n                axisTooltipGroup = this.svgRenderer.createGroup({ 'id': this.elementID + '_crosshair_axis' });\n            }\n            var elementID = chart.tooltip.enable ? chart.element.id + '_tooltip_svg' : chart.element.id + '_svg';\n            crosshairsvg = this.svgRenderer.createSvg({\n                id: elementID,\n                width: chart.availableSize.width,\n                height: chart.availableSize.height\n            });\n            if (chart.tooltip.enable) {\n                tooltipdiv = !tooltipdiv ? chart.tooltipModule.createElement() : tooltipdiv;\n                tooltipdiv.appendChild(crosshairsvg);\n                crossGroup.appendChild(tooltipdiv);\n            }\n            options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\n            this.drawCrosshairLine(options, cross, chartRect.x, this.valueY, chartRect.width, 0, horizontalCross);\n            /**\n             * due to not working for vertical line side I added new option\n             * options.d = verticalCross; options.id = this.elementID + '_VerticalLine';\n             */\n            options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\n            this.drawCrosshairLine(options, cross, this.valueX, chartRect.y, 0, chartRect.height, verticalCross);\n            this.renderAxisTooltip(chart, chartRect, axisTooltipGroup);\n            crosshairsvg.appendChild(axisTooltipGroup);\n            if (!chart.tooltip.enable) {\n                cross.appendChild(crosshairsvg);\n            }\n        }\n        else {\n            if (crossGroup.childNodes.length === 0) {\n                axisTooltipGroup = chart.renderer.createGroup({ 'id': this.elementID + '_crosshair_axis' });\n                options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\n                this.renderCrosshairLine(options, crossGroup);\n                options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\n                this.renderCrosshairLine(options, crossGroup);\n                crossGroup.appendChild(axisTooltipGroup);\n                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n            }\n            else {\n                document.getElementById(this.elementID + '_HorizontalLine').setAttribute('d', horizontalCross);\n                document.getElementById(this.elementID + '_VerticalLine').setAttribute('d', verticalCross);\n                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n            }\n        }\n    };\n    Crosshair.prototype.renderCrosshairLine = function (options, crossGroup) {\n        var htmlObject = this.chart.renderer.drawPath(options);\n        crossGroup.appendChild(htmlObject);\n    };\n    Crosshair.prototype.drawCrosshairLine = function (options, crossGroup, left, top, width, height, direction) {\n        if (!document.getElementById(options.id) && direction) {\n            var line = createElement('div', {\n                id: options.id\n            });\n            crossGroup.appendChild(line);\n        }\n        if (document.getElementById(options.id)) {\n            var style = 'top:' + top.toString() + 'px;' +\n                'left:' + left.toString() + 'px;' +\n                'width:' + width + 'px;' +\n                'height:' + height + 'px;' +\n                'fill:' + options.stroke + ';' +\n                'border: 0.5px solid ' + options.stroke + ';' +\n                'opacity: ' + options.opacity + ' ; ' +\n                'position: absolute';\n            var crosshairline = document.getElementById(options.id);\n            var crosshairtooltip = document.getElementById(this.elementID + '_crosshair_axis');\n            crosshairline.style.cssText = style;\n            crossGroup.style.opacity = '1';\n            if (crosshairtooltip) {\n                crosshairtooltip.style.opacity = '1';\n            }\n        }\n    };\n    Crosshair.prototype.renderAxisTooltip = function (chart, chartRect, axisGroup) {\n        var axis;\n        var text;\n        var rect;\n        var pathElement;\n        var textElem;\n        var options;\n        var padding = 5;\n        var direction;\n        var axisRect;\n        for (var k = 0, length_1 = chart.axisCollections.length; k < length_1; k++) {\n            axis = chart.axisCollections[k];\n            axisRect = !axis.placeNextToAxisLine ? axis.rect : axis.updatedRect;\n            if (axis.crosshairTooltip.enable) {\n                if ((this.valueX <= (axisRect.x + axisRect.width) && axisRect.x <= this.valueX) ||\n                    (this.valueY <= (axisRect.y + axisRect.height) && axisRect.y <= this.valueY)) {\n                    pathElement = document.getElementById(this.elementID + '_axis_tooltip_' + k);\n                    textElem = document.getElementById(this.elementID + '_axis_tooltip_text_' + k);\n                    text = this.getAxisText(axis);\n                    if (!text) {\n                        continue;\n                    }\n                    rect = this.tooltipLocation(text, axis, chartRect, axisRect);\n                    if (pathElement === null) {\n                        if (chart.enableCanvas) {\n                            pathElement = this.svgRenderer.drawPath({\n                                'id': this.elementID + '_axis_tooltip_' + k,\n                                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n                            });\n                        }\n                        else {\n                            pathElement = chart.renderer.drawPath({\n                                'id': this.elementID + '_axis_tooltip_' + k,\n                                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n                            }, null);\n                        }\n                        axisGroup.appendChild(pathElement);\n                        options = new TextOption(this.elementID + '_axis_tooltip_text_' + k, 0, 0, 'start', text);\n                        var render = chart.enableCanvas ? this.svgRenderer : chart.renderer;\n                        textElem = textElement(render, options, axis.crosshairTooltip.textStyle, axis.crosshairTooltip.textStyle.color || chart.themeStyle.crosshairLabel, axisGroup, null, null, null, null, null, null, null, null, chart.enableCanvas);\n                    }\n                    direction = findDirection(this.rx, this.ry, rect, this.arrowLocation, 10, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY);\n                    pathElement.setAttribute('d', direction);\n                    textElem.textContent = text;\n                    textElem.setAttribute('x', (rect.x + padding).toString());\n                    textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / 4).toString());\n                }\n                else {\n                    removeElement(this.elementID + '_axis_tooltip_' + k);\n                    removeElement(this.elementID + '_axis_tooltip_text_' + k);\n                }\n            }\n        }\n    };\n    Crosshair.prototype.getAxisText = function (axis) {\n        var value;\n        this.isBottom = false;\n        this.isTop = false;\n        this.isLeft = false;\n        this.isRight = false;\n        var labelValue = (axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks')\n            ? 0.5 : 0;\n        var isOpposed = axis.isAxisOpposedPosition;\n        if (axis.orientation === 'Horizontal') {\n            value = getValueXByPoint(Math.abs(this.valueX - axis.rect.x), axis.rect.width, axis) + labelValue;\n            this.isBottom = !isOpposed;\n            this.isTop = isOpposed;\n        }\n        else {\n            value = getValueYByPoint(Math.abs(this.valueY - axis.rect.y), axis.rect.height, axis) + labelValue;\n            this.isRight = isOpposed;\n            this.isLeft = !isOpposed;\n        }\n        if (axis.valueType === 'DateTime') {\n            return axis.format(new Date(value));\n        }\n        else if (axis.valueType === 'Category') {\n            return axis.labels[Math.floor(value)];\n        }\n        else if (axis.valueType === 'DateTimeCategory') {\n            return this.chart.dateTimeCategoryModule.getIndexedAxisLabel(axis.labels[Math.floor(value)], axis.format);\n        }\n        else if (axis.valueType === 'Logarithmic') {\n            return value = axis.format(Math.pow(axis.logBase, value));\n        }\n        else {\n            var customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n            return customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(value)) : axis.format(value);\n        }\n    };\n    Crosshair.prototype.tooltipLocation = function (text, axis, bounds, axisRect) {\n        var padding = 5;\n        var arrowPadding = 10;\n        var tooltipRect;\n        var boundsX = bounds.x;\n        var boundsY = bounds.y;\n        var islabelInside = axis.labelPosition === 'Inside';\n        var scrollBarHeight = axis.scrollbarSettings.enable || (axis.zoomingScrollBar && axis.zoomingScrollBar.svgObject)\n            ? axis.scrollBarHeight : 0;\n        this.elementSize = measureText(text, axis.crosshairTooltip.textStyle);\n        var isOpposed = axis.isAxisOpposedPosition;\n        if (axis.orientation === 'Horizontal') {\n            var yLocation = islabelInside ? axisRect.y - this.elementSize.height - (padding * 2 + arrowPadding) :\n                axisRect.y + scrollBarHeight;\n            var height = islabelInside ? axisRect.y - this.elementSize.height - arrowPadding : axisRect.y + arrowPadding;\n            this.arrowLocation = new ChartLocation(this.valueX, yLocation);\n            tooltipRect = new Rect((this.valueX - (this.elementSize.width / 2) - padding), height + (!islabelInside ? scrollBarHeight : 0), this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n            if (isOpposed) {\n                tooltipRect.y = islabelInside ? axisRect.y : axisRect.y -\n                    (this.elementSize.height + padding * 2 + arrowPadding) - scrollBarHeight;\n            }\n            if (tooltipRect.x < boundsX) {\n                tooltipRect.x = boundsX;\n            }\n            if (tooltipRect.x + tooltipRect.width > boundsX + bounds.width) {\n                tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - (boundsX + bounds.width));\n            }\n            if (this.arrowLocation.x + arrowPadding / 2 > tooltipRect.x + tooltipRect.width - this.rx) {\n                this.arrowLocation.x = tooltipRect.x + tooltipRect.width - this.rx - arrowPadding / 2;\n            }\n            if (this.arrowLocation.x - arrowPadding / 2 < tooltipRect.x + this.rx) {\n                this.arrowLocation.x = tooltipRect.x + this.rx + arrowPadding / 2;\n            }\n        }\n        else {\n            scrollBarHeight = scrollBarHeight * (isOpposed ? 1 : -1);\n            this.arrowLocation = new ChartLocation(axisRect.x, this.valueY);\n            var width = islabelInside ? axisRect.x - scrollBarHeight :\n                axisRect.x - (this.elementSize.width) - (padding * 2 + arrowPadding);\n            tooltipRect = new Rect(width + scrollBarHeight, this.valueY - (this.elementSize.height / 2) - padding, this.elementSize.width + (padding * 2), this.elementSize.height + padding * 2);\n            if (isOpposed) {\n                tooltipRect.x = islabelInside ? axisRect.x - this.elementSize.width - arrowPadding :\n                    axisRect.x + arrowPadding + scrollBarHeight;\n                if ((tooltipRect.x + tooltipRect.width) > this.chart.availableSize.width) {\n                    this.arrowLocation.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\n                    tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\n                }\n            }\n            else {\n                if (tooltipRect.x < 0) {\n                    this.arrowLocation.x -= tooltipRect.x;\n                    tooltipRect.x = 0;\n                }\n            }\n            if (tooltipRect.y < boundsY) {\n                tooltipRect.y = boundsY;\n            }\n            if (tooltipRect.y + tooltipRect.height >= boundsY + bounds.height) {\n                tooltipRect.y -= ((tooltipRect.y + tooltipRect.height) - (boundsY + bounds.height));\n            }\n            if (this.arrowLocation.y + arrowPadding / 2 > tooltipRect.y + tooltipRect.height - this.ry) {\n                this.arrowLocation.y = tooltipRect.y + tooltipRect.height - this.ry - arrowPadding / 2;\n            }\n            if (this.arrowLocation.y - arrowPadding / 2 < tooltipRect.y + this.ry) {\n                this.arrowLocation.y = tooltipRect.y + this.ry + arrowPadding / 2;\n            }\n        }\n        return tooltipRect;\n    };\n    Crosshair.prototype.stopAnimation = function () {\n        stopTimer(this.crosshairInterval);\n    };\n    Crosshair.prototype.progressAnimation = function () {\n        stopTimer(this.crosshairInterval);\n    };\n    /**\n     * Removes the crosshair on mouse leave.\n     *\n     * @returns {void}\n     * @private\n     */\n    Crosshair.prototype.removeCrosshair = function (duration) {\n        var chart = this.chart;\n        var crosshair = chart.enableCanvas ? document.getElementById(this.elementID + '_Crosshair') :\n            document.getElementById(this.elementID + '_UserInteraction');\n        var crosshairtooltip = chart.enableCanvas ? document.getElementById(this.elementID + '_crosshair_axis') : null;\n        this.stopAnimation();\n        if (crosshair && crosshair.getAttribute('opacity') !== '0') {\n            this.crosshairInterval = +setTimeout(function () {\n                new Animation({}).animate(crosshair, {\n                    duration: 200,\n                    progress: function (args) {\n                        // crosshair.removeAttribute('e-animate');\n                        crosshair.style.animation = '';\n                        if (!chart.enableCanvas) {\n                            crosshair.setAttribute('opacity', (1 - (args.timeStamp / args.duration)).toString());\n                        }\n                        else {\n                            crosshair.style.opacity = (1 - (args.timeStamp / args.duration)).toString();\n                            crosshairtooltip.style.opacity = (1 - (args.timeStamp / args.duration)).toString();\n                        }\n                    },\n                    end: function () {\n                        if (chart.enableCanvas) {\n                            crosshair.style.opacity = '0';\n                            crosshairtooltip.style.opacity = '0';\n                        }\n                        else {\n                            crosshair.setAttribute('opacity', '0');\n                        }\n                        chart.startMove = false;\n                        if (chart.tooltipModule) {\n                            chart.tooltipModule.valueX = null;\n                            chart.tooltipModule.valueY = null;\n                        }\n                    }\n                });\n            }, duration);\n        }\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} module name\n     */\n    Crosshair.prototype.getModuleName = function () {\n        /**\n         * Returns the module name\n         */\n        return 'Crosshair';\n    };\n    /**\n     * To destroy the crosshair.\n     *\n     * @returns {void}\n     * @private\n     */\n    Crosshair.prototype.destroy = function () {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Crosshair;\n}());\nexport { Crosshair };\n"]},"metadata":{},"sourceType":"module"}