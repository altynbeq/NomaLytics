{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, classList, createElement, remove, addClass, removeClass, isNullOrUndefined, formatUnit, createInstance, detach } from '@syncfusion/ej2-base';\nimport { Columns } from '../models/columns';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Action module is used to perform card actions.\n */\n\nvar Action =\n/** @class */\nfunction () {\n  /**\n   * Constructor for action module\n   *\n   * @param {Kanban} parent Accepts the kanban instance\n   * @private\n   */\n  function Action(parent) {\n    this.parent = parent;\n    this.columnToggleArray = [];\n    this.selectionArray = [];\n    this.lastCardSelection = null;\n    this.lastSelectionRow = null;\n    this.lastCard = null;\n    this.selectedCardsElement = [];\n    this.selectedCardsData = [];\n    this.hideColumnKeys = [];\n  }\n\n  Action.prototype.clickHandler = function (e) {\n    var elementSelector = '.' + cls.CARD_CLASS + ',.' + cls.HEADER_ICON_CLASS + ',.' + cls.CONTENT_ROW_CLASS + '.' + cls.SWIMLANE_ROW_CLASS + ',.' + cls.SHOW_ADD_BUTTON + ',.' + cls.FROZEN_SWIMLANE_ROW_CLASS + ',.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n    var target = closest(e.target, elementSelector);\n\n    if (!target) {\n      return;\n    }\n\n    if (target.classList.contains(cls.CARD_CLASS)) {\n      if (this.parent.allowKeyboard) {\n        this.parent.keyboardModule.cardTabIndexRemove();\n      }\n\n      this.cardClick(e);\n    } else if (target.classList.contains(cls.HEADER_ICON_CLASS)) {\n      this.columnExpandCollapse(e);\n    } else if (target.classList.contains(cls.CONTENT_ROW_CLASS) && target.classList.contains(cls.SWIMLANE_ROW_CLASS)) {\n      this.rowExpandCollapse(e);\n    } else if (target.classList.contains(cls.SHOW_ADD_BUTTON)) {\n      this.addButtonClick(target);\n    } else if (target.classList.contains(cls.FROZEN_SWIMLANE_ROW_CLASS)) {\n      var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n      var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector('.' + cls.ICON_CLASS);\n      this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);\n      var isCollapsed = targetIcon.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;\n\n      if (isCollapsed) {\n        classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n      } else {\n        classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n      }\n    }\n  };\n\n  Action.prototype.addButtonClick = function (target) {\n    var _this = this;\n\n    var newData = {};\n\n    if (this.parent.kanbanData.length === 0) {\n      newData[this.parent.cardSettings.headerField] = 1;\n    } else if (typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField] === 'number') {\n      var id = this.parent.kanbanData.map(function (obj) {\n        return parseInt(obj[_this.parent.cardSettings.headerField], 10);\n      });\n      newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;\n    }\n\n    newData[this.parent.keyField] = closest(target, '.' + cls.CONTENT_CELLS_CLASS).getAttribute('data-key');\n\n    if (this.parent.sortSettings.sortBy === 'Index') {\n      newData[this.parent.sortSettings.field] = 1;\n\n      if (closest(target, '.' + cls.CONTENT_CELLS_CLASS).querySelector('.' + cls.CARD_CLASS)) {\n        var card = this.parent.sortSettings.direction === 'Ascending' ? target.nextElementSibling.lastElementChild : target.nextElementSibling.firstElementChild;\n        var data = this.parent.getCardDetails(card);\n        newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;\n      }\n    }\n\n    if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField && closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling) {\n      newData[this.parent.swimlaneSettings.keyField] = closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling.getAttribute('data-key');\n    }\n\n    this.parent.openDialog('Add', newData);\n  };\n\n  Action.prototype.doubleClickHandler = function (e) {\n    var target = closest(e.target, '.' + cls.CARD_CLASS);\n\n    if (target) {\n      this.cardDoubleClick(e);\n    }\n  };\n\n  Action.prototype.cardClick = function (e, selectedCard) {\n    var _this = this;\n\n    var target = closest(selectedCard ? selectedCard : e.target, '.' + cls.CARD_CLASS);\n    var cardClickObj = this.parent.getCardDetails(target);\n\n    if (cardClickObj) {\n      this.parent.activeCardData = {\n        data: cardClickObj,\n        element: target\n      };\n      var args = {\n        data: cardClickObj,\n        element: target,\n        cancel: false,\n        event: e\n      };\n      this.parent.trigger(events.cardClick, args, function (clickArgs) {\n        if (!clickArgs.cancel) {\n          if (target.classList.contains(cls.CARD_SELECTION_CLASS) && e.type === 'click') {\n            removeClass([target], cls.CARD_SELECTION_CLASS);\n\n            _this.parent.layoutModule.disableAttributeSelection(target);\n          } else {\n            var isCtrlKey = e.ctrlKey;\n\n            if (_this.parent.isAdaptive && _this.parent.touchModule) {\n              isCtrlKey = _this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold || isCtrlKey;\n            }\n\n            _this.cardSelection(target, isCtrlKey, e.shiftKey);\n          }\n\n          if (_this.parent.isAdaptive && _this.parent.touchModule) {\n            _this.parent.touchModule.updatePopupContent();\n          }\n\n          var cell = closest(target, '.' + cls.CONTENT_CELLS_CLASS);\n\n          if (_this.parent.allowKeyboard) {\n            var element = [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS));\n            element.forEach(function (e) {\n              e.setAttribute('tabindex', '0');\n            });\n\n            _this.parent.keyboardModule.addRemoveTabIndex('Remove');\n          }\n        }\n      });\n    }\n  };\n\n  Action.prototype.cardDoubleClick = function (e) {\n    var _this = this;\n\n    var target = closest(e.target, '.' + cls.CARD_CLASS);\n    var cardDoubleClickObj = this.parent.getCardDetails(target);\n    this.parent.activeCardData = {\n      data: cardDoubleClickObj,\n      element: target\n    };\n    this.cardSelection(target, false, false);\n    var args = {\n      data: cardDoubleClickObj,\n      element: target,\n      cancel: false,\n      event: e\n    };\n    this.parent.trigger(events.cardDoubleClick, args, function (doubleClickArgs) {\n      if (!doubleClickArgs.cancel) {\n        _this.parent.dialogModule.openDialog('Edit', args.data);\n      }\n    });\n  };\n\n  Action.prototype.rowExpandCollapse = function (e, isFrozenElem) {\n    var _this = this;\n\n    var headerTarget = e instanceof HTMLElement ? e : e.target;\n    var currentSwimlaneHeader = !isNullOrUndefined(isFrozenElem) ? isFrozenElem : headerTarget;\n    var args = {\n      cancel: false,\n      target: headerTarget,\n      requestType: 'rowExpandCollapse'\n    };\n    this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        var target = closest(currentSwimlaneHeader, '.' + cls.SWIMLANE_ROW_CLASS);\n        var key = target.getAttribute('data-key');\n\n        var tgtRow = _this.parent.element.querySelector('.' + cls.CONTENT_ROW_CLASS + (\":nth-child(\" + (target.rowIndex + 2) + \")\"));\n\n        var targetIcon = target.querySelector(\".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS);\n        var isCollapsed = target.classList.contains(cls.COLLAPSED_CLASS) ? true : false;\n        var tabIndex_1;\n\n        if (isCollapsed) {\n          removeClass([tgtRow, target], cls.COLLAPSED_CLASS);\n          classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n\n          _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);\n\n          tabIndex_1 = '0';\n        } else {\n          addClass([tgtRow, target], cls.COLLAPSED_CLASS);\n          classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n\n          _this.parent.swimlaneToggleArray.push(key);\n\n          tabIndex_1 = '-1';\n        }\n\n        targetIcon.setAttribute('aria-label', isCollapsed ? key + ' Expand' : key + ' Collapse');\n        target.setAttribute('aria-expanded', isCollapsed.toString());\n        tgtRow.setAttribute('aria-expanded', isCollapsed.toString());\n        var rows = [].slice.call(tgtRow.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n        rows.forEach(function (cell) {\n          cell.setAttribute('tabindex', tabIndex_1);\n        });\n\n        _this.parent.notify(events.contentReady, {});\n\n        _this.parent.trigger(events.actionComplete, {\n          target: headerTarget,\n          requestType: 'rowExpandCollapse'\n        });\n      }\n    });\n  };\n\n  Action.prototype.columnExpandCollapse = function (e) {\n    var _this = this;\n\n    var headerTarget = e instanceof HTMLElement ? e : e.target;\n    var args = {\n      cancel: false,\n      target: headerTarget,\n      requestType: 'columnExpandCollapse'\n    };\n    this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        var target = closest(headerTarget, '.' + cls.HEADER_CELLS_CLASS);\n        var colIndex = target.cellIndex;\n\n        _this.columnToggle(target);\n\n        var collapsed = _this.parent.element.querySelectorAll(\".\" + cls.HEADER_CELLS_CLASS + \".\" + cls.COLLAPSED_CLASS).length;\n\n        if (collapsed === _this.parent.columns.length - _this.hideColumnKeys.length) {\n          var index = colIndex + 1 === collapsed ? 1 : colIndex + 2;\n          var headerSelector = \".\" + cls.HEADER_CELLS_CLASS + \":not(.\" + cls.STACKED_HEADER_CELL_CLASS + \"):nth-child(\" + index + \")\";\n\n          var nextCol = _this.parent.element.querySelector(headerSelector);\n\n          addClass([nextCol], cls.COLLAPSED_CLASS);\n\n          _this.columnToggle(nextCol);\n        }\n\n        _this.parent.notify(events.contentReady, {});\n\n        _this.parent.trigger(events.actionComplete, {\n          target: headerTarget,\n          requestType: 'columnExpandCollapse'\n        });\n      }\n    });\n  };\n\n  Action.prototype.columnToggle = function (target) {\n    var _this = this;\n\n    var colIndex = target.cellIndex;\n    var elementSelector = \".\" + cls.CONTENT_ROW_CLASS + \":not(.\" + cls.SWIMLANE_ROW_CLASS + \")\";\n    var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n    var colSelector = \".\" + cls.TABLE_CLASS + \" col:nth-child(\" + (colIndex + 1) + \")\";\n    var targetIcon = target.querySelector(\".\" + cls.COLUMN_EXPAND_CLASS + \",.\" + cls.COLUMN_COLLAPSE_CLASS);\n    var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));\n\n    if (target.classList.contains(cls.COLLAPSED_CLASS)) {\n      removeClass(colGroup, cls.COLLAPSED_CLASS);\n\n      if (this.parent.isAdaptive) {\n        colGroup.forEach(function (col) {\n          return col.style.width = formatUnit(_this.parent.layoutModule.getWidth());\n        });\n      }\n\n      classList(targetIcon, [cls.COLUMN_EXPAND_CLASS], [cls.COLUMN_COLLAPSE_CLASS]);\n\n      var _loop_1 = function (row) {\n        var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \":nth-child(\" + (colIndex + 1) + \")\");\n        removeClass([targetCol, target], cls.COLLAPSED_CLASS);\n        remove(targetCol.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS));\n        target.setAttribute('aria-expanded', 'true');\n        targetCol.setAttribute('aria-expanded', 'true');\n        var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n        collapsedCell.forEach(function (cell) {\n          var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n          collapasedText.style.height = 'auto';\n\n          if (collapasedText && targetCol.getBoundingClientRect().height < collapasedText.getBoundingClientRect().height + 10) {\n            collapasedText.style.height = targetCol.getBoundingClientRect().height - 4 + 'px';\n          }\n        });\n      };\n\n      for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {\n        var row = targetRow_1[_i];\n\n        _loop_1(row);\n      }\n\n      this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute('data-key')), 1);\n      this.parent.columns[colIndex].setProperties({\n        isExpanded: true\n      }, true);\n      target.querySelector('.e-header-icon').setAttribute('aria-label', target.getAttribute('data-key') + ' Expand');\n    } else {\n      addClass(colGroup, cls.COLLAPSED_CLASS);\n\n      if (this.parent.isAdaptive) {\n        colGroup.forEach(function (col) {\n          return col.style.width = formatUnit(events.toggleWidth);\n        });\n      }\n\n      classList(targetIcon, [cls.COLUMN_COLLAPSE_CLASS], [cls.COLUMN_EXPAND_CLASS]);\n      var key = target.getAttribute('data-key');\n\n      var _loop_2 = function (row) {\n        var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \"[data-key=\\\"\" + key + \"\\\"]\");\n        var index = targetCol.cellIndex;\n        var text = (this_1.parent.columns[index].showItemCount ? '[' + targetCol.querySelectorAll('.' + cls.CARD_CLASS).length + '] ' : '') + this_1.parent.columns[index].headerText;\n        targetCol.appendChild(createElement('div', {\n          className: cls.COLLAPSE_HEADER_TEXT_CLASS,\n          innerHTML: text\n        }));\n        addClass([targetCol, target], cls.COLLAPSED_CLASS);\n        target.setAttribute('aria-expanded', 'false');\n        targetCol.setAttribute('aria-expanded', 'false');\n        var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n        collapsedCell.forEach(function (cell) {\n          var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n\n          if (collapasedText && targetCol.getBoundingClientRect().height < collapasedText.getBoundingClientRect().height + 10) {\n            collapasedText.style.height = targetCol.getBoundingClientRect().height - 4 + 'px';\n          }\n        });\n      };\n\n      var this_1 = this;\n\n      for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {\n        var row = targetRow_2[_a];\n\n        _loop_2(row);\n      }\n\n      this.columnToggleArray.push(target.getAttribute('data-key'));\n      this.parent.columns[colIndex].setProperties({\n        isExpanded: false\n      }, true);\n      target.querySelector('.e-header-icon').setAttribute('aria-label', key + ' Collapse');\n    }\n  };\n\n  Action.prototype.cardSelection = function (target, isCtrl, isShift) {\n    var _this = this;\n\n    if (!target) {\n      return;\n    }\n\n    var cards = this.parent.getSelectedCards();\n\n    if (this.parent.cardSettings.selectionType !== 'None') {\n      var contentRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n      var index = !isNullOrUndefined(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;\n\n      if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === 'Multiple') {\n        return;\n      }\n\n      if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === 'Single')) {\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.parent.layoutModule.disableAttributeSelection(cards);\n        cards.forEach(function (el) {\n          _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute('data-id')), 1);\n\n          _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);\n\n          _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));\n        });\n      }\n\n      if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === 'Multiple') {\n        var curCards_1 = [];\n        var start = void 0;\n        var end = void 0;\n        var i = void 0;\n        var allCards = [].slice.call(contentRow.querySelectorAll('.' + cls.CARD_CLASS));\n        allCards.forEach(function (el) {\n          return curCards_1.push(el.getAttribute('data-id'));\n        });\n        var curId = target.getAttribute('data-id');\n        var lastId = this.lastCard.getAttribute('data-id');\n        var curIndex = end = curCards_1.indexOf(curId);\n        var lastIndex = start = curCards_1.indexOf(lastId);\n        var select = curIndex > lastIndex ? 'next' : 'prev';\n\n        if (select === 'prev') {\n          start = curIndex;\n          end = lastIndex;\n        }\n\n        for (i = start; i <= end; i++) {\n          var card = allCards[i];\n          addClass([card], cls.CARD_SELECTION_CLASS);\n          card.setAttribute('aria-selected', 'true');\n          card.setAttribute('tabindex', '0');\n          this.selectionArray.push(card.getAttribute('data-id'));\n          this.selectedCardsElement.push(card);\n          this.selectedCardsData.push(this.parent.getCardDetails(card));\n          this.lastCardSelection = card;\n\n          if (select === 'prev') {\n            this.lastCardSelection = allCards[start];\n          }\n        }\n      } else {\n        addClass([target], cls.CARD_SELECTION_CLASS);\n        target.setAttribute('aria-selected', 'true');\n        target.setAttribute('tabindex', '0');\n        this.selectionArray.push(target.getAttribute('data-id'));\n        this.selectedCardsElement.push(target);\n        this.selectedCardsData.push(this.parent.getCardDetails(target));\n        this.lastCard = this.lastCardSelection = target;\n        this.lastSelectionRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n\n        if (this.lastSelectionRow.previousElementSibling) {\n          var elementSelector = \".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS;\n          var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);\n\n          if (parentEle && parentEle.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n            this.rowExpandCollapse(parentEle);\n          }\n        }\n      }\n    }\n  };\n\n  Action.prototype.addColumn = function (columnOptions, index) {\n    var addColumn = createInstance(Columns, [this.parent, 'columns', columnOptions, true]);\n    this.parent.columns.splice(index, 0, addColumn);\n    this.parent.notify(events.dataReady, {\n      processedData: this.parent.kanbanData\n    });\n  };\n\n  Action.prototype.deleteColumn = function (index) {\n    var listKey = this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS).item(index);\n\n    if (listKey && listKey.classList.contains(cls.HEADER_ROW_TOGGLE_CLASS)) {\n      this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute('data-key'), 0));\n    }\n\n    this.parent.columns.splice(index, 1);\n\n    if (this.parent.columns.length === 0) {\n      detach(this.parent.element.querySelector('.' + cls.HEADER_CLASS));\n      detach(this.parent.element.querySelector('.' + cls.CONTENT_CLASS));\n    } else {\n      this.parent.notify(events.dataReady, {\n        processedData: this.parent.kanbanData\n      });\n    }\n  };\n\n  Action.prototype.showColumn = function (key) {\n    var index = this.hideColumnKeys.indexOf(key.toString());\n\n    if (index !== -1) {\n      this.hideColumnKeys.splice(index, 1);\n      this.parent.notify(events.dataReady, {\n        processedData: this.parent.kanbanData\n      });\n    }\n  };\n\n  Action.prototype.hideColumn = function (key) {\n    this.hideColumnKeys.push(key.toString());\n    this.parent.notify(events.dataReady, {\n      processedData: this.parent.kanbanData\n    });\n  };\n  /**\n   * Maintain the single card selection\n   *\n   * @param {Record<string, any>} data - Specifies the selected card data.\n   * @returns {void}\n   * @private\n   * @hidden\n   */\n\n\n  Action.prototype.SingleCardSelection = function (data) {\n    if (this.parent.cardSettings.selectionType !== 'None' && data[this.parent.cardSettings.headerField]) {\n      var card = this.parent.element.querySelector('.e-card[data-id=\\\"' + data[this.parent.cardSettings.headerField].toString() + '\"\\]');\n\n      if (card) {\n        addClass([card], cls.CARD_SELECTION_CLASS);\n        card.setAttribute('aria-selected', 'true');\n        card.setAttribute('tabindex', '0');\n      }\n    }\n  };\n\n  return Action;\n}();\n\nexport { Action };","map":{"version":3,"sources":["/Users/altynbekkuat/Desktop/reactAnalyt/node_modules/@syncfusion/ej2-kanban/src/kanban/actions/action.js"],"names":["closest","classList","createElement","remove","addClass","removeClass","isNullOrUndefined","formatUnit","createInstance","detach","Columns","events","cls","Action","parent","columnToggleArray","selectionArray","lastCardSelection","lastSelectionRow","lastCard","selectedCardsElement","selectedCardsData","hideColumnKeys","prototype","clickHandler","e","elementSelector","CARD_CLASS","HEADER_ICON_CLASS","CONTENT_ROW_CLASS","SWIMLANE_ROW_CLASS","SHOW_ADD_BUTTON","FROZEN_SWIMLANE_ROW_CLASS","CONTENT_CELLS_CLASS","target","contains","allowKeyboard","keyboardModule","cardTabIndexRemove","cardClick","columnExpandCollapse","rowExpandCollapse","addButtonClick","swimlaneRows","slice","call","element","querySelectorAll","targetIcon","layoutModule","frozenSwimlaneRow","querySelector","ICON_CLASS","frozenOrder","isCollapsed","SWIMLANE_ROW_COLLAPSE_CLASS","SWIMLANE_ROW_EXPAND_CLASS","_this","newData","kanbanData","length","cardSettings","headerField","id","map","obj","parseInt","Math","max","apply","keyField","getAttribute","sortSettings","sortBy","field","card","direction","nextElementSibling","lastElementChild","firstElementChild","data","getCardDetails","swimlaneSettings","previousElementSibling","openDialog","doubleClickHandler","cardDoubleClick","selectedCard","cardClickObj","activeCardData","args","cancel","event","trigger","clickArgs","CARD_SELECTION_CLASS","type","disableAttributeSelection","isCtrlKey","ctrlKey","isAdaptive","touchModule","mobilePopup","tabHold","cardSelection","shiftKey","updatePopupContent","cell","forEach","setAttribute","addRemoveTabIndex","cardDoubleClickObj","doubleClickArgs","dialogModule","isFrozenElem","headerTarget","HTMLElement","currentSwimlaneHeader","requestType","actionBegin","actionArgs","key","tgtRow","rowIndex","COLLAPSED_CLASS","tabIndex_1","swimlaneToggleArray","splice","indexOf","push","toString","rows","notify","contentReady","actionComplete","HEADER_CELLS_CLASS","colIndex","cellIndex","columnToggle","collapsed","columns","index","headerSelector","STACKED_HEADER_CELL_CLASS","nextCol","targetRow","colSelector","TABLE_CLASS","COLUMN_EXPAND_CLASS","COLUMN_COLLAPSE_CLASS","colGroup","col","style","width","getWidth","_loop_1","row","targetCol","COLLAPSE_HEADER_TEXT_CLASS","collapsedCell","parentElement","collapasedText","height","getBoundingClientRect","_i","targetRow_1","setProperties","isExpanded","toggleWidth","_loop_2","text","this_1","showItemCount","headerText","appendChild","className","innerHTML","_a","targetRow_2","isCtrl","isShift","cards","getSelectedCards","selectionType","contentRow","el","curCards_1","start","end","i","allCards","curId","lastId","curIndex","lastIndex","select","parentEle","addColumn","columnOptions","dataReady","processedData","deleteColumn","listKey","item","HEADER_ROW_TOGGLE_CLASS","HEADER_CLASS","CONTENT_CLASS","showColumn","hideColumn","SingleCardSelection"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, classList, createElement, remove, addClass, removeClass, isNullOrUndefined, formatUnit, createInstance, detach } from '@syncfusion/ej2-base';\nimport { Columns } from '../models/columns';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Action module is used to perform card actions.\n */\nvar Action = /** @class */ (function () {\n    /**\n     * Constructor for action module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Action(parent) {\n        this.parent = parent;\n        this.columnToggleArray = [];\n        this.selectionArray = [];\n        this.lastCardSelection = null;\n        this.lastSelectionRow = null;\n        this.lastCard = null;\n        this.selectedCardsElement = [];\n        this.selectedCardsData = [];\n        this.hideColumnKeys = [];\n    }\n    Action.prototype.clickHandler = function (e) {\n        var elementSelector = '.' + cls.CARD_CLASS + ',.' + cls.HEADER_ICON_CLASS + ',.' + cls.CONTENT_ROW_CLASS + '.' +\n            cls.SWIMLANE_ROW_CLASS + ',.' + cls.SHOW_ADD_BUTTON + ',.' + cls.FROZEN_SWIMLANE_ROW_CLASS + ',.' + cls.CONTENT_ROW_CLASS +\n            ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var target = closest(e.target, elementSelector);\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.CARD_CLASS)) {\n            if (this.parent.allowKeyboard) {\n                this.parent.keyboardModule.cardTabIndexRemove();\n            }\n            this.cardClick(e);\n        }\n        else if (target.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.columnExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.CONTENT_ROW_CLASS) && target.classList.contains(cls.SWIMLANE_ROW_CLASS)) {\n            this.rowExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            this.addButtonClick(target);\n        }\n        else if (target.classList.contains(cls.FROZEN_SWIMLANE_ROW_CLASS)) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector('.' + cls.ICON_CLASS);\n            this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);\n            var isCollapsed = targetIcon.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;\n            if (isCollapsed) {\n                classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n            }\n            else {\n                classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n            }\n        }\n    };\n    Action.prototype.addButtonClick = function (target) {\n        var _this = this;\n        var newData = {};\n        if (this.parent.kanbanData.length === 0) {\n            newData[this.parent.cardSettings.headerField] = 1;\n        }\n        else if (typeof (this.parent.kanbanData[0])[this.parent.cardSettings.headerField] === 'number') {\n            var id = this.parent.kanbanData.map(function (obj) {\n                return parseInt(obj[_this.parent.cardSettings.headerField], 10);\n            });\n            newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;\n        }\n        newData[this.parent.keyField] = closest(target, '.' + cls.CONTENT_CELLS_CLASS).getAttribute('data-key');\n        if (this.parent.sortSettings.sortBy === 'Index') {\n            newData[this.parent.sortSettings.field] = 1;\n            if (closest(target, '.' + cls.CONTENT_CELLS_CLASS).querySelector('.' + cls.CARD_CLASS)) {\n                var card = this.parent.sortSettings.direction === 'Ascending' ?\n                    target.nextElementSibling.lastElementChild : target.nextElementSibling.firstElementChild;\n                var data = this.parent.getCardDetails(card);\n                newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;\n            }\n        }\n        if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField &&\n            closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling) {\n            newData[this.parent.swimlaneSettings.keyField] =\n                closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling.getAttribute('data-key');\n        }\n        this.parent.openDialog('Add', newData);\n    };\n    Action.prototype.doubleClickHandler = function (e) {\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        if (target) {\n            this.cardDoubleClick(e);\n        }\n    };\n    Action.prototype.cardClick = function (e, selectedCard) {\n        var _this = this;\n        var target = closest((selectedCard) ? selectedCard : e.target, '.' + cls.CARD_CLASS);\n        var cardClickObj = this.parent.getCardDetails(target);\n        if (cardClickObj) {\n            this.parent.activeCardData = { data: cardClickObj, element: target };\n            var args = { data: cardClickObj, element: target, cancel: false, event: e };\n            this.parent.trigger(events.cardClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (target.classList.contains(cls.CARD_SELECTION_CLASS) && e.type === 'click') {\n                        removeClass([target], cls.CARD_SELECTION_CLASS);\n                        _this.parent.layoutModule.disableAttributeSelection(target);\n                    }\n                    else {\n                        var isCtrlKey = e.ctrlKey;\n                        if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                            isCtrlKey = (_this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold) || isCtrlKey;\n                        }\n                        _this.cardSelection(target, isCtrlKey, e.shiftKey);\n                    }\n                    if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                        _this.parent.touchModule.updatePopupContent();\n                    }\n                    var cell = closest(target, '.' + cls.CONTENT_CELLS_CLASS);\n                    if (_this.parent.allowKeyboard) {\n                        var element = [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS));\n                        element.forEach(function (e) { e.setAttribute('tabindex', '0'); });\n                        _this.parent.keyboardModule.addRemoveTabIndex('Remove');\n                    }\n                }\n            });\n        }\n    };\n    Action.prototype.cardDoubleClick = function (e) {\n        var _this = this;\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        var cardDoubleClickObj = this.parent.getCardDetails(target);\n        this.parent.activeCardData = { data: cardDoubleClickObj, element: target };\n        this.cardSelection(target, false, false);\n        var args = { data: cardDoubleClickObj, element: target, cancel: false, event: e };\n        this.parent.trigger(events.cardDoubleClick, args, function (doubleClickArgs) {\n            if (!doubleClickArgs.cancel) {\n                _this.parent.dialogModule.openDialog('Edit', args.data);\n            }\n        });\n    };\n    Action.prototype.rowExpandCollapse = function (e, isFrozenElem) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var currentSwimlaneHeader = !isNullOrUndefined(isFrozenElem) ? isFrozenElem : headerTarget;\n        var args = { cancel: false, target: headerTarget, requestType: 'rowExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(currentSwimlaneHeader, '.' + cls.SWIMLANE_ROW_CLASS);\n                var key = target.getAttribute('data-key');\n                var tgtRow = _this.parent.element.querySelector('.' + cls.CONTENT_ROW_CLASS + (\":nth-child(\" + (target.rowIndex + 2) + \")\"));\n                var targetIcon = target.querySelector(\".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS);\n                var isCollapsed = target.classList.contains(cls.COLLAPSED_CLASS) ? true : false;\n                var tabIndex_1;\n                if (isCollapsed) {\n                    removeClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n                    _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);\n                    tabIndex_1 = '0';\n                }\n                else {\n                    addClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n                    _this.parent.swimlaneToggleArray.push(key);\n                    tabIndex_1 = '-1';\n                }\n                targetIcon.setAttribute('aria-label', isCollapsed ? key + ' Expand' : key + ' Collapse');\n                target.setAttribute('aria-expanded', isCollapsed.toString());\n                tgtRow.setAttribute('aria-expanded', isCollapsed.toString());\n                var rows = [].slice.call(tgtRow.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n                rows.forEach(function (cell) { cell.setAttribute('tabindex', tabIndex_1); });\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'rowExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnExpandCollapse = function (e) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var args = { cancel: false, target: headerTarget, requestType: 'columnExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(headerTarget, '.' + cls.HEADER_CELLS_CLASS);\n                var colIndex = target.cellIndex;\n                _this.columnToggle(target);\n                var collapsed = _this.parent.element.querySelectorAll(\".\" + cls.HEADER_CELLS_CLASS + \".\" + cls.COLLAPSED_CLASS).length;\n                if (collapsed === (_this.parent.columns.length - _this.hideColumnKeys.length)) {\n                    var index = (colIndex + 1 === collapsed) ? 1 : colIndex + 2;\n                    var headerSelector = \".\" + cls.HEADER_CELLS_CLASS + \":not(.\" + cls.STACKED_HEADER_CELL_CLASS + \"):nth-child(\" + index + \")\";\n                    var nextCol = _this.parent.element.querySelector(headerSelector);\n                    addClass([nextCol], cls.COLLAPSED_CLASS);\n                    _this.columnToggle(nextCol);\n                }\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'columnExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnToggle = function (target) {\n        var _this = this;\n        var colIndex = target.cellIndex;\n        var elementSelector = \".\" + cls.CONTENT_ROW_CLASS + \":not(.\" + cls.SWIMLANE_ROW_CLASS + \")\";\n        var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        var colSelector = \".\" + cls.TABLE_CLASS + \" col:nth-child(\" + (colIndex + 1) + \")\";\n        var targetIcon = target.querySelector(\".\" + cls.COLUMN_EXPAND_CLASS + \",.\" + cls.COLUMN_COLLAPSE_CLASS);\n        var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));\n        if (target.classList.contains(cls.COLLAPSED_CLASS)) {\n            removeClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.layoutModule.getWidth()); });\n            }\n            classList(targetIcon, [cls.COLUMN_EXPAND_CLASS], [cls.COLUMN_COLLAPSE_CLASS]);\n            var _loop_1 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \":nth-child(\" + (colIndex + 1) + \")\");\n                removeClass([targetCol, target], cls.COLLAPSED_CLASS);\n                remove(targetCol.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS));\n                target.setAttribute('aria-expanded', 'true');\n                targetCol.setAttribute('aria-expanded', 'true');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    collapasedText.style.height = 'auto';\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {\n                var row = targetRow_1[_i];\n                _loop_1(row);\n            }\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute('data-key')), 1);\n            this.parent.columns[colIndex].setProperties({ isExpanded: true }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', target.getAttribute('data-key') + ' Expand');\n        }\n        else {\n            addClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                colGroup.forEach(function (col) { return col.style.width = formatUnit(events.toggleWidth); });\n            }\n            classList(targetIcon, [cls.COLUMN_COLLAPSE_CLASS], [cls.COLUMN_EXPAND_CLASS]);\n            var key = target.getAttribute('data-key');\n            var _loop_2 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \"[data-key=\\\"\" + key + \"\\\"]\");\n                var index = targetCol.cellIndex;\n                var text = (this_1.parent.columns[index].showItemCount ? '[' +\n                    targetCol.querySelectorAll('.' + cls.CARD_CLASS).length + '] ' : '') + this_1.parent.columns[index].headerText;\n                targetCol.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                addClass([targetCol, target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n                targetCol.setAttribute('aria-expanded', 'false');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {\n                var row = targetRow_2[_a];\n                _loop_2(row);\n            }\n            this.columnToggleArray.push(target.getAttribute('data-key'));\n            this.parent.columns[colIndex].setProperties({ isExpanded: false }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', key + ' Collapse');\n        }\n    };\n    Action.prototype.cardSelection = function (target, isCtrl, isShift) {\n        var _this = this;\n        if (!target) {\n            return;\n        }\n        var cards = this.parent.getSelectedCards();\n        if (this.parent.cardSettings.selectionType !== 'None') {\n            var contentRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n            var index = !isNullOrUndefined(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;\n            if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === 'Multiple') {\n                return;\n            }\n            if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === 'Single')) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                this.parent.layoutModule.disableAttributeSelection(cards);\n                cards.forEach(function (el) {\n                    _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute('data-id')), 1);\n                    _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);\n                    _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));\n                });\n            }\n            if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === 'Multiple') {\n                var curCards_1 = [];\n                var start = void 0;\n                var end = void 0;\n                var i = void 0;\n                var allCards = [].slice.call(contentRow.querySelectorAll('.' + cls.CARD_CLASS));\n                allCards.forEach(function (el) { return curCards_1.push(el.getAttribute('data-id')); });\n                var curId = target.getAttribute('data-id');\n                var lastId = this.lastCard.getAttribute('data-id');\n                var curIndex = end = curCards_1.indexOf(curId);\n                var lastIndex = start = curCards_1.indexOf(lastId);\n                var select = curIndex > lastIndex ? 'next' : 'prev';\n                if (select === 'prev') {\n                    start = curIndex;\n                    end = lastIndex;\n                }\n                for (i = start; i <= end; i++) {\n                    var card = allCards[i];\n                    addClass([card], cls.CARD_SELECTION_CLASS);\n                    card.setAttribute('aria-selected', 'true');\n                    card.setAttribute('tabindex', '0');\n                    this.selectionArray.push(card.getAttribute('data-id'));\n                    this.selectedCardsElement.push(card);\n                    this.selectedCardsData.push(this.parent.getCardDetails(card));\n                    this.lastCardSelection = card;\n                    if (select === 'prev') {\n                        this.lastCardSelection = allCards[start];\n                    }\n                }\n            }\n            else {\n                addClass([target], cls.CARD_SELECTION_CLASS);\n                target.setAttribute('aria-selected', 'true');\n                target.setAttribute('tabindex', '0');\n                this.selectionArray.push(target.getAttribute('data-id'));\n                this.selectedCardsElement.push(target);\n                this.selectedCardsData.push(this.parent.getCardDetails(target));\n                this.lastCard = this.lastCardSelection = target;\n                this.lastSelectionRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n                if (this.lastSelectionRow.previousElementSibling) {\n                    var elementSelector = \".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS;\n                    var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);\n                    if (parentEle && parentEle.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n                        this.rowExpandCollapse(parentEle);\n                    }\n                }\n            }\n        }\n    };\n    Action.prototype.addColumn = function (columnOptions, index) {\n        var addColumn = createInstance(Columns, [this.parent, 'columns', columnOptions, true]);\n        this.parent.columns.splice(index, 0, addColumn);\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    Action.prototype.deleteColumn = function (index) {\n        var listKey = this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS).item(index);\n        if (listKey && listKey.classList.contains(cls.HEADER_ROW_TOGGLE_CLASS)) {\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute('data-key'), 0));\n        }\n        this.parent.columns.splice(index, 1);\n        if (this.parent.columns.length === 0) {\n            detach(this.parent.element.querySelector('.' + cls.HEADER_CLASS));\n            detach(this.parent.element.querySelector('.' + cls.CONTENT_CLASS));\n        }\n        else {\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.showColumn = function (key) {\n        var index = this.hideColumnKeys.indexOf(key.toString());\n        if (index !== -1) {\n            this.hideColumnKeys.splice(index, 1);\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.hideColumn = function (key) {\n        this.hideColumnKeys.push(key.toString());\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    /**\n     * Maintain the single card selection\n     *\n     * @param {Record<string, any>} data - Specifies the selected card data.\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    Action.prototype.SingleCardSelection = function (data) {\n        if (this.parent.cardSettings.selectionType !== 'None' && data[this.parent.cardSettings.headerField]) {\n            var card = this.parent.element.querySelector('.e-card[data-id=\\\"' +\n                data[this.parent.cardSettings.headerField].toString() + '\"\\]');\n            if (card) {\n                addClass([card], cls.CARD_SELECTION_CLASS);\n                card.setAttribute('aria-selected', 'true');\n                card.setAttribute('tabindex', '0');\n            }\n        }\n    };\n    return Action;\n}());\nexport { Action };\n"]},"metadata":{},"sourceType":"module"}