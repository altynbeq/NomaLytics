{"ast":null,"code":"import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll, detach } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\n\nvar ToolbarRenderer =\n/** @class */\nfunction () {\n  /**\n   * Constructor for toolbar renderer module\n   *\n   * @param {IRichTextEditor} parent - specifies the parent element.\n   */\n  function ToolbarRenderer(parent) {\n    this.parent = parent;\n    this.wireEvent();\n  }\n\n  ToolbarRenderer.prototype.wireEvent = function () {\n    this.parent.on(events.destroy, this.unWireEvent, this);\n  };\n\n  ToolbarRenderer.prototype.unWireEvent = function () {\n    this.parent.off(events.destroy, this.unWireEvent);\n\n    if (this.popupOverlay) {\n      EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n    }\n\n    this.removePopupContainer();\n  };\n\n  ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n    if (this.mode === 'Extended') {\n      e.enableCollision = false;\n    }\n  };\n\n  ToolbarRenderer.prototype.toolbarCreated = function () {\n    this.parent.notify(events.toolbarCreated, this);\n  };\n\n  ToolbarRenderer.prototype.toolbarClicked = function (args) {\n    if (!this.parent.enabled) {\n      return;\n    }\n\n    if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n      this.parent.notify(events.toolbarClick, args);\n    }\n\n    this.parent.trigger('toolbarClick', args);\n  };\n\n  ToolbarRenderer.prototype.dropDownSelected = function (args) {\n    this.parent.notify(events.dropDownSelect, args);\n    this.onPopupOverlay();\n  };\n\n  ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n    if (this.parent.readonly || !this.parent.enabled) {\n      return;\n    }\n\n    this.parent.notify(events.beforeDropDownItemRender, args);\n  };\n\n  ToolbarRenderer.prototype.dropDownOpen = function (args) {\n    if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) && (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n      var listEle = args.element.querySelectorAll('li');\n\n      if (this.parent.inputElement.querySelectorAll('.e-cell-select').length === 1) {\n        addClass([listEle[0]], 'e-disabled');\n        removeClass([listEle[1], listEle[2]], 'e-disabled');\n      } else if (this.parent.inputElement.querySelectorAll('.e-cell-select').length > 1) {\n        removeClass([listEle[0]], 'e-disabled');\n        addClass([listEle[1], listEle[2]], 'e-disabled');\n      }\n    }\n\n    if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n      this.popupModal(args.element.parentElement);\n    }\n\n    this.parent.notify(events.selectionSave, args);\n  };\n\n  ToolbarRenderer.prototype.dropDownClose = function (args) {\n    this.removePopupContainer();\n    this.parent.notify(events.selectionRestore, args);\n  };\n\n  ToolbarRenderer.prototype.removePopupContainer = function () {\n    if (Browser.isDevice && !isNullOrUndefined(this.popupContainer)) {\n      var popupEle = this.popupContainer.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n\n      if (popupEle) {\n        this.popupContainer.parentNode.insertBefore(popupEle, this.popupContainer.nextSibling);\n        popupEle.style.removeProperty('position');\n        removeClass([popupEle], 'e-popup-modal');\n      }\n\n      detach(this.popupContainer);\n      this.popupContainer = undefined;\n    }\n  };\n  /**\n   * renderToolbar method\n   *\n   * @param {IToolbarOptions} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderToolbar = function (args) {\n    this.setPanel(args.target);\n    this.renderPanel();\n    this.mode = args.overflowMode;\n    args.rteToolbarObj.toolbarObj = new Toolbar({\n      items: args.items,\n      width: '100%',\n      overflowMode: args.overflowMode,\n      beforeCreate: this.toolbarBeforeCreate.bind(this),\n      created: this.toolbarCreated.bind(this),\n      clicked: this.toolbarClicked.bind(this),\n      enablePersistence: args.enablePersistence,\n      enableRtl: args.enableRtl\n    });\n    args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n    args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n    args.rteToolbarObj.toolbarObj.appendTo(args.target);\n  };\n  /**\n   * renderDropDownButton method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n    var _this = this;\n\n    var css;\n    args.element.classList.add(CLS_DROPDOWN_BTN);\n    css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n\n    if (this.parent.inlineMode.enable && Browser.isDevice) {\n      css = css + ' ' + CLS_INLINE_DROPDOWN;\n    } // eslint-disable-next-line\n\n\n    var proxy = this;\n    var dropDown = new DropDownButton({\n      items: args.items,\n      iconCss: args.iconCss,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        } // eslint-disable-next-line\n\n\n        for (var index = 0; index < args.element.childNodes.length; index++) {\n          var divNode = _this.parent.createElement('div');\n\n          divNode.innerHTML = dropDown.content.trim();\n\n          if (divNode.textContent.trim() !== '' && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n            if (!args.element.childNodes[index].classList.contains('e-active')) {\n              addClass([args.element.childNodes[index]], 'e-active');\n            }\n          } else {\n            removeClass([args.element.childNodes[index]], 'e-active');\n          }\n        }\n\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    return dropDown;\n  };\n  /**\n   * renderListDropDown method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderListDropDown = function (args) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (args.itemName === 'NumberFormatList' ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_LIST_PRIMARY_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      items: args.items,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n\n        var element = args.event ? args.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n\n        if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT) || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n          args.cancel = true;\n          return;\n        }\n\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n\n    if (args.element.childElementCount === 1) {\n      dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    }\n\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    return dropDown;\n  }; // eslint-disable-next-line\n\n\n  ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n    if (!isNullOrUndefined(this.popupOverlay)) {\n      closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n      this.popupOverlay.style.display = 'none';\n      removeClass([this.popupOverlay], 'e-popup-overlay');\n    }\n  };\n\n  ToolbarRenderer.prototype.setIsModel = function (element) {\n    if (!closest(element, '.e-popup-container')) {\n      this.popupContainer = this.parent.createElement('div', {\n        className: 'e-rte-modal-popup e-popup-container e-center'\n      });\n      element.parentNode.insertBefore(this.popupContainer, element);\n      this.popupContainer.appendChild(element);\n      this.popupContainer.style.zIndex = element.style.zIndex;\n      this.popupContainer.style.display = 'flex';\n      element.style.position = 'relative';\n      addClass([element], 'e-popup-modal');\n      this.popupOverlay = this.parent.createElement('div', {\n        className: 'e-popup-overlay'\n      }); // eslint-disable-next-line\n\n      this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n      this.popupOverlay.style.display = 'block';\n      this.popupContainer.appendChild(this.popupOverlay);\n      EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n    } else {\n      element.parentElement.style.display = 'flex';\n      this.popupOverlay = element.nextElementSibling;\n      this.popupOverlay.style.display = 'block';\n      addClass([this.popupOverlay], 'e-popup-overlay');\n    }\n  };\n\n  ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n    var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n    removeClass(colorbox, 'e-selected');\n    var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n    colorbox.filter(function (colorbox) {\n      if (colorbox.style.backgroundColor === style) {\n        addClass([colorbox], 'e-selected');\n      }\n    });\n  };\n  /**\n   * renderColorPickerDropDown method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments.\n   * @param {string} item - specifies the item.\n   * @param {ColorPicker} colorPicker - specifies the colorpicker.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n    var _this = this; // eslint-disable-next-line\n\n\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_COLOR_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    var range;\n    var initialBackgroundColor = isNullOrUndefined(defaultColor) ? proxy.parent.backgroundColor.default : defaultColor;\n    inlineEle.style.borderBottomColor = item === 'backgroundcolor' ? initialBackgroundColor : proxy.parent.fontColor.default;\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      target: colorPicker.element.parentElement,\n      cssClass: css,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      beforeOpen: function (dropDownArgs) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          dropDownArgs.cancel = true;\n          return;\n        }\n\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          dropDownArgs.cancel = true;\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          proxy.parent.notify(events.selectionRestore, {});\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          var parentNode = range.startContainer.parentNode;\n\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th') || proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n\n          return;\n        } else {\n          var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n          var inst = getInstance(ele, ColorPicker);\n          inst.showButtons = dropDownArgs.element.querySelector('.e-color-palette') ? false : true;\n          inst.dataBind();\n        }\n\n        dropDownArgs.element.onclick = function (args) {\n          if (args.target.classList.contains('e-cancel')) {\n            dropDown.toggle();\n          }\n        };\n      },\n      open: function (dropDownArgs) {\n        _this.setColorPickerContentWidth(colorPicker);\n\n        var focusEle;\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n\n        if (dropDownArgs.element.querySelector('.e-color-palette')) {\n          focusEle = ele.parentElement.querySelector('.e-palette');\n        } else {\n          focusEle = ele.parentElement.querySelector('e-handler');\n        }\n\n        if (focusEle) {\n          focusEle.focus();\n        }\n\n        if (Browser.isDevice) {\n          _this.popupModal(dropDownArgs.element.parentElement);\n        }\n\n        _this.pickerRefresh(dropDownArgs);\n      },\n      beforeClose: function (dropDownArgs) {\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n\n          return;\n        }\n      },\n      close: function (dropDownArgs) {\n        proxy.parent.notify(events.selectionRestore, {});\n        var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n\n        if (dropElement) {\n          dropElement.style.display = 'none';\n          dropElement.lastElementChild.style.display = 'none';\n          removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n        }\n\n        if (Browser.isDevice && !isNullOrUndefined(dropElement)) {\n          var popupEle = dropElement.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n\n          if (popupEle) {\n            dropElement.parentNode.insertBefore(popupEle, dropElement.nextSibling);\n            popupEle.style.removeProperty('position');\n            removeClass([popupEle], 'e-popup-modal');\n          }\n\n          detach(dropElement);\n          proxy.popupContainer = undefined;\n        }\n      }\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    args.element.setAttribute('role', 'button');\n    dropDown.appendTo(args.element);\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n\n    dropDown.element.onmousedown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n\n    dropDown.element.onkeydown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n\n    return dropDown;\n  };\n\n  ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n    if (this.parent.backgroundColor.mode === 'Picker') {\n      var popupElem = dropDownArgs.element.parentElement;\n      popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n      getInstance(popupElem, Popup).refreshPosition(popupElem);\n      popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n    }\n  };\n\n  ToolbarRenderer.prototype.popupModal = function (element) {\n    var popupInst = getInstance(element, Popup);\n    popupInst.relateTo = document.body;\n    popupInst.position = {\n      X: 0,\n      Y: 0\n    };\n    popupInst.targetType = 'container';\n    popupInst.collision = {\n      X: 'fit',\n      Y: 'fit'\n    };\n    popupInst.offsetY = 4;\n    popupInst.dataBind();\n    this.setIsModel(element);\n  };\n\n  ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n    var colorPickerContent = colorPicker.element.nextSibling;\n\n    if (colorPickerContent.style.width === '0px') {\n      colorPickerContent.style.width = '';\n      var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n      colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth + borderWidth + borderWidth);\n    }\n  };\n  /**\n   * renderColorPicker method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments\n   * @param {string} item - specifies the string values\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var value;\n    var colorPicker = new ColorPicker({\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      inline: true,\n      value: '#fff',\n      created: function () {\n        var value = item === 'backgroundcolor' ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        colorPicker.setProperties({\n          value: value\n        });\n      },\n      mode: item === 'backgroundcolor' ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode,\n      modeSwitcher: item === 'backgroundcolor' ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher,\n      beforeTileRender: function (args) {\n        args.element.classList.add(CLS_COLOR_PALETTE);\n        args.element.classList.add(CLS_CUSTOM_TILE);\n\n        if (args.value === '') {\n          args.element.classList.add(CLS_NOCOLOR_ITEM);\n        }\n      },\n      change: function (colorPickerArgs) {\n        var colorpickerValue = colorPickerArgs.currentValue.rgba;\n        colorPickerArgs.item = {\n          command: args.command,\n          subCommand: args.subCommand,\n          value: colorpickerValue\n        };\n        proxy.parent.notify(events.selectionRestore, {});\n        proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n        var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n\n        if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n          proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n        } else {\n          proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n        }\n\n        proxy.currentDropdown.toggle();\n      },\n      beforeModeSwitch: function (args) {\n        value = colorPicker.value;\n\n        if (value === '') {\n          colorPicker.setProperties({\n            value: args.mode === 'Picker' ? '#008000ff' : ''\n          }, true);\n        }\n\n        colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n      }\n    });\n    colorPicker.isStringTemplate = true;\n    colorPicker.columns = item === 'backgroundcolor' ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n    colorPicker.presetColors = item === 'backgroundcolor' ? this.parent.backgroundColor.colorCode : this.parent.fontColor.colorCode;\n    colorPicker.cssClass = item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n    colorPicker.createElement = this.parent.createElement;\n    colorPicker.appendTo(document.getElementById(args.target));\n    return colorPicker;\n  };\n  /**\n   * The function is used to render Rich Text Editor toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderPanel = function () {\n    this.getPanel().classList.add(CLS_TOOLBAR);\n  };\n  /**\n   * Get the toolbar element of RichTextEditor\n   *\n   * @returns {Element} - specifies the element.\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.getPanel = function () {\n    return this.toolbarPanel;\n  };\n  /**\n   * Set the toolbar element of RichTextEditor\n   *\n   * @returns {void}\n   * @param  {Element} panel - specifies the element.\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.setPanel = function (panel) {\n    this.toolbarPanel = panel;\n  };\n\n  return ToolbarRenderer;\n}();\n\nexport { ToolbarRenderer };","map":{"version":3,"sources":["/Users/altynbekkuat/Desktop/reactAnalyt/node_modules/@syncfusion/ej2-react-richtexteditor/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/toolbar-renderer.js"],"names":["addClass","Browser","removeClass","EventHandler","formatUnit","isNullOrUndefined","isNOU","getInstance","closest","selectAll","detach","Toolbar","DropDownButton","Popup","classes","events","CLS_TOOLBAR","CLS_DROPDOWN_BTN","CLS_RTE_ELEMENTS","CLS_TB_BTN","CLS_INLINE_DROPDOWN","CLS_COLOR_CONTENT","CLS_FONT_COLOR_DROPDOWN","CLS_BACKGROUND_COLOR_DROPDOWN","CLS_COLOR_PALETTE","CLS_FONT_COLOR_PICKER","CLS_BACKGROUND_COLOR_PICKER","CLS_CUSTOM_TILE","CLS_NOCOLOR_ITEM","CLS_BULLETFORMATLIST_TB_BTN","CLS_NUMBERFORMATLIST_TB_BTN","CLS_LIST_PRIMARY_CONTENT","ColorPicker","hasClass","ToolbarRenderer","parent","wireEvent","prototype","on","destroy","unWireEvent","off","popupOverlay","remove","onPopupOverlay","removePopupContainer","toolbarBeforeCreate","e","mode","enableCollision","toolbarCreated","notify","toolbarClicked","args","enabled","readonly","item","toolbarClick","trigger","dropDownSelected","dropDownSelect","beforeDropDownItemRender","dropDownOpen","element","parentElement","getAttribute","indexOf","querySelector","listEle","querySelectorAll","inputElement","length","isDevice","classList","contains","CLS_QUICK_DROPDOWN","popupModal","selectionSave","dropDownClose","selectionRestore","popupContainer","popupEle","parentNode","insertBefore","nextSibling","style","removeProperty","undefined","renderToolbar","setPanel","target","renderPanel","overflowMode","rteToolbarObj","toolbarObj","items","width","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","isStringTemplate","createElement","appendTo","renderDropDownButton","_this","css","add","cssClass","inlineMode","enable","proxy","dropDown","iconCss","content","select","beforeOpen","cancel","index","childNodes","divNode","innerHTML","trim","textContent","beforeDropDownOpen","close","open","beforeItemRender","tabIndex","popupElement","document","getElementById","id","setAttribute","getID","renderListDropDown","itemName","className","inlineEle","appendChild","event","currentElement","currentDropdown","type","childElementCount","removeAttribute","display","setIsModel","zIndex","position","parseInt","toString","nextElementSibling","paletteSelection","dropDownArgs","ele","colorbox","slice","call","borderBottomColor","filter","backgroundColor","renderColorPickerDropDown","colorPicker","defaultColor","range","initialBackgroundColor","default","fontColor","colorpickerValue","formatter","editorManager","nodeSelection","getRange","contentModule","getDocument","startContainer","nodeName","iframeSettings","ownerDocument","collapsed","subCommand","tableColorPickerChanged","command","value","colorPickerChanged","inst","showButtons","dataBind","onclick","toggle","setColorPickerContentWidth","focusEle","focus","pickerRefresh","beforeClose","dropElement","lastElementChild","onmousedown","onkeydown","popupElem","offsetWidth","refreshPosition","popupInst","relateTo","body","X","Y","targetType","collision","offsetY","colorPickerContent","borderWidth","getComputedStyle","borderBottomWidth","children","renderColorPicker","inline","setProperties","modeSwitcher","beforeTileRender","change","colorPickerArgs","currentValue","rgba","beforeModeSwitch","columns","presetColors","colorCode","getPanel","toolbarPanel","panel"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,OAAnB,EAA4BC,WAA5B,EAAyCC,YAAzC,EAAuDC,UAAvD,EAAmEC,iBAAnE,EAAsFA,iBAAiB,IAAIC,KAA3G,QAAwH,sBAAxH;AACA,SAASC,WAAT,EAAsBC,OAAtB,EAA+BC,SAA/B,EAA0CC,MAA1C,QAAwD,sBAAxD;AACA,SAASC,OAAT,QAAwB,6BAAxB;AACA,SAASC,cAAT,QAA+B,8BAA/B;AACA,SAASC,KAAT,QAAsB,wBAAtB;AACA,OAAO,KAAKC,OAAZ,MAAyB,iBAAzB;AACA,OAAO,KAAKC,MAAZ,MAAwB,kBAAxB;AACA,SAASC,WAAT,EAAsBC,gBAAtB,EAAwCC,gBAAxC,EAA0DC,UAA1D,EAAsEC,mBAAtE,EAA2FC,iBAA3F,EAA8GC,uBAA9G,EAAuIC,6BAAvI,EAAsKC,iBAAtK,EAAyLC,qBAAzL,EAAgNC,2BAAhN,EAA6OC,eAA7O,EAA8PC,gBAA9P,EAAgRC,2BAAhR,EAA6SC,2BAA7S,EAA0UC,wBAA1U,QAA0W,iBAA1W;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,eAAe;AAAG;AAAe,YAAY;AAC7C;AACJ;AACA;AACA;AACA;AACI,WAASA,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,SAAKA,MAAL,GAAcA,MAAd;AACA,SAAKC,SAAL;AACH;;AACDF,EAAAA,eAAe,CAACG,SAAhB,CAA0BD,SAA1B,GAAsC,YAAY;AAC9C,SAAKD,MAAL,CAAYG,EAAZ,CAAevB,MAAM,CAACwB,OAAtB,EAA+B,KAAKC,WAApC,EAAiD,IAAjD;AACH,GAFD;;AAGAN,EAAAA,eAAe,CAACG,SAAhB,CAA0BG,WAA1B,GAAwC,YAAY;AAChD,SAAKL,MAAL,CAAYM,GAAZ,CAAgB1B,MAAM,CAACwB,OAAvB,EAAgC,KAAKC,WAArC;;AACA,QAAI,KAAKE,YAAT,EAAuB;AACnBvC,MAAAA,YAAY,CAACwC,MAAb,CAAoB,KAAKD,YAAzB,EAAuC,iBAAvC,EAA0D,KAAKE,cAA/D;AACH;;AACD,SAAKC,oBAAL;AACH,GAND;;AAOAX,EAAAA,eAAe,CAACG,SAAhB,CAA0BS,mBAA1B,GAAgD,UAAUC,CAAV,EAAa;AACzD,QAAI,KAAKC,IAAL,KAAc,UAAlB,EAA8B;AAC1BD,MAAAA,CAAC,CAACE,eAAF,GAAoB,KAApB;AACH;AACJ,GAJD;;AAKAf,EAAAA,eAAe,CAACG,SAAhB,CAA0Ba,cAA1B,GAA2C,YAAY;AACnD,SAAKf,MAAL,CAAYgB,MAAZ,CAAmBpC,MAAM,CAACmC,cAA1B,EAA0C,IAA1C;AACH,GAFD;;AAGAhB,EAAAA,eAAe,CAACG,SAAhB,CAA0Be,cAA1B,GAA2C,UAAUC,IAAV,EAAgB;AACvD,QAAI,CAAC,KAAKlB,MAAL,CAAYmB,OAAjB,EAA0B;AACtB;AACH;;AACD,QAAI,CAAC,KAAKnB,MAAL,CAAYoB,QAAb,IAAyBlD,iBAAiB,CAACgD,IAAI,CAACG,IAAN,CAA9C,EAA2D;AACvD,WAAKrB,MAAL,CAAYgB,MAAZ,CAAmBpC,MAAM,CAAC0C,YAA1B,EAAwCJ,IAAxC;AACH;;AACD,SAAKlB,MAAL,CAAYuB,OAAZ,CAAoB,cAApB,EAAoCL,IAApC;AACH,GARD;;AASAnB,EAAAA,eAAe,CAACG,SAAhB,CAA0BsB,gBAA1B,GAA6C,UAAUN,IAAV,EAAgB;AACzD,SAAKlB,MAAL,CAAYgB,MAAZ,CAAmBpC,MAAM,CAAC6C,cAA1B,EAA0CP,IAA1C;AACA,SAAKT,cAAL;AACH,GAHD;;AAIAV,EAAAA,eAAe,CAACG,SAAhB,CAA0BwB,wBAA1B,GAAqD,UAAUR,IAAV,EAAgB;AACjE,QAAI,KAAKlB,MAAL,CAAYoB,QAAZ,IAAwB,CAAC,KAAKpB,MAAL,CAAYmB,OAAzC,EAAkD;AAC9C;AACH;;AACD,SAAKnB,MAAL,CAAYgB,MAAZ,CAAmBpC,MAAM,CAAC8C,wBAA1B,EAAoDR,IAApD;AACH,GALD;;AAMAnB,EAAAA,eAAe,CAACG,SAAhB,CAA0ByB,YAA1B,GAAyC,UAAUT,IAAV,EAAgB;AACrD,QAAIA,IAAI,CAACU,OAAL,CAAaC,aAAb,CAA2BC,YAA3B,CAAwC,IAAxC,EAA8CC,OAA9C,CAAsD,WAAtD,IAAqE,CAAC,CAAtE,IAA2E,CAAC5D,KAAK,CAAC+C,IAAI,CAACU,OAAL,CAAaC,aAAb,CAA2BG,aAA3B,CAAyC,eAAzC,CAAD,CAAjF,KACC,CAAC7D,KAAK,CAAC+C,IAAI,CAACU,OAAL,CAAaC,aAAb,CAA2BG,aAA3B,CAAyC,0BAAzC,CAAD,CAAN,IAAgF,CAAC7D,KAAK,CAAC+C,IAAI,CAACU,OAAL,CAAaC,aAAb,CAA2BG,aAA3B,CAAyC,wBAAzC,CAAD,CADvF,CAAJ,EACkK;AAC9J,UAAIC,OAAO,GAAGf,IAAI,CAACU,OAAL,CAAaM,gBAAb,CAA8B,IAA9B,CAAd;;AACA,UAAI,KAAKlC,MAAL,CAAYmC,YAAZ,CAAyBD,gBAAzB,CAA0C,gBAA1C,EAA4DE,MAA5D,KAAuE,CAA3E,EAA8E;AAC1EvE,QAAAA,QAAQ,CAAC,CAACoE,OAAO,CAAC,CAAD,CAAR,CAAD,EAAe,YAAf,CAAR;AACAlE,QAAAA,WAAW,CAAC,CAACkE,OAAO,CAAC,CAAD,CAAR,EAAaA,OAAO,CAAC,CAAD,CAApB,CAAD,EAA2B,YAA3B,CAAX;AACH,OAHD,MAIK,IAAI,KAAKjC,MAAL,CAAYmC,YAAZ,CAAyBD,gBAAzB,CAA0C,gBAA1C,EAA4DE,MAA5D,GAAqE,CAAzE,EAA4E;AAC7ErE,QAAAA,WAAW,CAAC,CAACkE,OAAO,CAAC,CAAD,CAAR,CAAD,EAAe,YAAf,CAAX;AACApE,QAAAA,QAAQ,CAAC,CAACoE,OAAO,CAAC,CAAD,CAAR,EAAaA,OAAO,CAAC,CAAD,CAApB,CAAD,EAA2B,YAA3B,CAAR;AACH;AACJ;;AACD,QAAInE,OAAO,CAACuE,QAAR,IAAoB,CAACnB,IAAI,CAACU,OAAL,CAAaC,aAAb,CAA2BS,SAA3B,CAAqCC,QAArC,CAA8C5D,OAAO,CAAC6D,kBAAtD,CAAzB,EAAoG;AAChG,WAAKC,UAAL,CAAgBvB,IAAI,CAACU,OAAL,CAAaC,aAA7B;AACH;;AACD,SAAK7B,MAAL,CAAYgB,MAAZ,CAAmBpC,MAAM,CAAC8D,aAA1B,EAAyCxB,IAAzC;AACH,GAjBD;;AAkBAnB,EAAAA,eAAe,CAACG,SAAhB,CAA0ByC,aAA1B,GAA0C,UAAUzB,IAAV,EAAgB;AACtD,SAAKR,oBAAL;AACA,SAAKV,MAAL,CAAYgB,MAAZ,CAAmBpC,MAAM,CAACgE,gBAA1B,EAA4C1B,IAA5C;AACH,GAHD;;AAIAnB,EAAAA,eAAe,CAACG,SAAhB,CAA0BQ,oBAA1B,GAAiD,YAAY;AACzD,QAAI5C,OAAO,CAACuE,QAAR,IAAoB,CAACnE,iBAAiB,CAAC,KAAK2E,cAAN,CAA1C,EAAiE;AAC7D,UAAIC,QAAQ,GAAG,KAAKD,cAAL,CAAoBb,aAApB,CAAkC,wCAAlC,CAAf;;AACA,UAAIc,QAAJ,EAAc;AACV,aAAKD,cAAL,CAAoBE,UAApB,CAA+BC,YAA/B,CAA4CF,QAA5C,EAAsD,KAAKD,cAAL,CAAoBI,WAA1E;AACAH,QAAAA,QAAQ,CAACI,KAAT,CAAeC,cAAf,CAA8B,UAA9B;AACApF,QAAAA,WAAW,CAAC,CAAC+E,QAAD,CAAD,EAAa,eAAb,CAAX;AACH;;AACDvE,MAAAA,MAAM,CAAC,KAAKsE,cAAN,CAAN;AACA,WAAKA,cAAL,GAAsBO,SAAtB;AACH;AACJ,GAXD;AAYA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIrD,EAAAA,eAAe,CAACG,SAAhB,CAA0BmD,aAA1B,GAA0C,UAAUnC,IAAV,EAAgB;AACtD,SAAKoC,QAAL,CAAcpC,IAAI,CAACqC,MAAnB;AACA,SAAKC,WAAL;AACA,SAAK3C,IAAL,GAAYK,IAAI,CAACuC,YAAjB;AACAvC,IAAAA,IAAI,CAACwC,aAAL,CAAmBC,UAAnB,GAAgC,IAAInF,OAAJ,CAAY;AACxCoF,MAAAA,KAAK,EAAE1C,IAAI,CAAC0C,KAD4B;AAExCC,MAAAA,KAAK,EAAE,MAFiC;AAGxCJ,MAAAA,YAAY,EAAEvC,IAAI,CAACuC,YAHqB;AAIxCK,MAAAA,YAAY,EAAE,KAAKnD,mBAAL,CAAyBoD,IAAzB,CAA8B,IAA9B,CAJ0B;AAKxCC,MAAAA,OAAO,EAAE,KAAKjD,cAAL,CAAoBgD,IAApB,CAAyB,IAAzB,CAL+B;AAMxCE,MAAAA,OAAO,EAAE,KAAKhD,cAAL,CAAoB8C,IAApB,CAAyB,IAAzB,CAN+B;AAOxCG,MAAAA,iBAAiB,EAAEhD,IAAI,CAACgD,iBAPgB;AAQxCC,MAAAA,SAAS,EAAEjD,IAAI,CAACiD;AARwB,KAAZ,CAAhC;AAUAjD,IAAAA,IAAI,CAACwC,aAAL,CAAmBC,UAAnB,CAA8BS,gBAA9B,GAAiD,IAAjD;AACAlD,IAAAA,IAAI,CAACwC,aAAL,CAAmBC,UAAnB,CAA8BU,aAA9B,GAA8C,KAAKrE,MAAL,CAAYqE,aAA1D;AACAnD,IAAAA,IAAI,CAACwC,aAAL,CAAmBC,UAAnB,CAA8BW,QAA9B,CAAuCpD,IAAI,CAACqC,MAA5C;AACH,GAjBD;AAkBA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIxD,EAAAA,eAAe,CAACG,SAAhB,CAA0BqE,oBAA1B,GAAiD,UAAUrD,IAAV,EAAgB;AAC7D,QAAIsD,KAAK,GAAG,IAAZ;;AACA,QAAIC,GAAJ;AACAvD,IAAAA,IAAI,CAACU,OAAL,CAAaU,SAAb,CAAuBoC,GAAvB,CAA2B5F,gBAA3B;AACA2F,IAAAA,GAAG,GAAGvD,IAAI,CAACyD,QAAL,GAAgB,GAAhB,GAAsB5F,gBAAtB,GAAyC,GAAzC,GAA+CC,UAArD;;AACA,QAAI,KAAKgB,MAAL,CAAY4E,UAAZ,CAAuBC,MAAvB,IAAiC/G,OAAO,CAACuE,QAA7C,EAAuD;AACnDoC,MAAAA,GAAG,GAAGA,GAAG,GAAG,GAAN,GAAYxF,mBAAlB;AACH,KAP4D,CAQ7D;;;AACA,QAAI6F,KAAK,GAAG,IAAZ;AACA,QAAIC,QAAQ,GAAG,IAAItG,cAAJ,CAAmB;AAC9BmF,MAAAA,KAAK,EAAE1C,IAAI,CAAC0C,KADkB;AAE9BoB,MAAAA,OAAO,EAAE9D,IAAI,CAAC8D,OAFgB;AAG9BL,MAAAA,QAAQ,EAAEF,GAHoB;AAI9BQ,MAAAA,OAAO,EAAE/D,IAAI,CAAC+D,OAJgB;AAK9Bf,MAAAA,iBAAiB,EAAE,KAAKlE,MAAL,CAAYkE,iBALD;AAM9BC,MAAAA,SAAS,EAAE,KAAKnE,MAAL,CAAYmE,SANO;AAO9Be,MAAAA,MAAM,EAAE,KAAK1D,gBAAL,CAAsBuC,IAAtB,CAA2B,IAA3B,CAPsB;AAQ9BoB,MAAAA,UAAU,EAAE,UAAUjE,IAAV,EAAgB;AACxB,YAAI4D,KAAK,CAAC9E,MAAN,CAAaoB,QAAb,IAAyB,CAAC0D,KAAK,CAAC9E,MAAN,CAAamB,OAA3C,EAAoD;AAChDD,UAAAA,IAAI,CAACkE,MAAL,GAAc,IAAd;AACA;AACH,SAJuB,CAKxB;;;AACA,aAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGnE,IAAI,CAACU,OAAL,CAAa0D,UAAb,CAAwBlD,MAApD,EAA4DiD,KAAK,EAAjE,EAAqE;AACjE,cAAIE,OAAO,GAAGf,KAAK,CAACxE,MAAN,CAAaqE,aAAb,CAA2B,KAA3B,CAAd;;AACAkB,UAAAA,OAAO,CAACC,SAAR,GAAoBT,QAAQ,CAACE,OAAT,CAAiBQ,IAAjB,EAApB;;AACA,cAAIF,OAAO,CAACG,WAAR,CAAoBD,IAApB,OAA+B,EAA/B,IACGvE,IAAI,CAACU,OAAL,CAAa0D,UAAb,CAAwBD,KAAxB,EAA+BK,WAA/B,CAA2CD,IAA3C,OAAsDF,OAAO,CAACG,WAAR,CAAoBD,IAApB,EAD7D,EACyF;AACrF,gBAAI,CAACvE,IAAI,CAACU,OAAL,CAAa0D,UAAb,CAAwBD,KAAxB,EAA+B/C,SAA/B,CAAyCC,QAAzC,CAAkD,UAAlD,CAAL,EAAoE;AAChE1E,cAAAA,QAAQ,CAAC,CAACqD,IAAI,CAACU,OAAL,CAAa0D,UAAb,CAAwBD,KAAxB,CAAD,CAAD,EAAmC,UAAnC,CAAR;AACH;AACJ,WALD,MAMK;AACDtH,YAAAA,WAAW,CAAC,CAACmD,IAAI,CAACU,OAAL,CAAa0D,UAAb,CAAwBD,KAAxB,CAAD,CAAD,EAAmC,UAAnC,CAAX;AACH;AACJ;;AACDP,QAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAAC+G,kBAA3B,EAA+CzE,IAA/C;AACH,OA5B6B;AA6B9B0E,MAAAA,KAAK,EAAE,KAAKjD,aAAL,CAAmBoB,IAAnB,CAAwB,IAAxB,CA7BuB;AA8B9B8B,MAAAA,IAAI,EAAE,KAAKlE,YAAL,CAAkBoC,IAAlB,CAAuB,IAAvB,CA9BwB;AA+B9B+B,MAAAA,gBAAgB,EAAE,KAAKpE,wBAAL,CAA8BqC,IAA9B,CAAmC,IAAnC;AA/BY,KAAnB,CAAf;AAiCAgB,IAAAA,QAAQ,CAACX,gBAAT,GAA4B,IAA5B;AACAW,IAAAA,QAAQ,CAACV,aAAT,GAAyBS,KAAK,CAAC9E,MAAN,CAAaqE,aAAtC;AACAU,IAAAA,QAAQ,CAACT,QAAT,CAAkBpD,IAAI,CAACU,OAAvB;AACAV,IAAAA,IAAI,CAACU,OAAL,CAAamE,QAAb,GAAwB,CAAC,CAAzB;AACA,QAAIC,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwBnB,QAAQ,CAACnD,OAAT,CAAiBuE,EAAjB,GAAsB,QAA9C,CAAnB;AACAH,IAAAA,YAAY,CAACI,YAAb,CAA0B,WAA1B,EAAuC,KAAKpG,MAAL,CAAYqG,KAAZ,EAAvC;AACA,WAAOtB,QAAP;AACH,GAlDD;AAmDA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIhF,EAAAA,eAAe,CAACG,SAAhB,CAA0BoG,kBAA1B,GAA+C,UAAUpF,IAAV,EAAgB;AAC3D;AACA,QAAI4D,KAAK,GAAG,IAAZ;AACA,QAAIL,GAAG,GAAG1F,gBAAgB,GAAG,GAAnB,GAAyBC,UAAzB,IAAwC,KAAKgB,MAAL,CAAY4E,UAAb,GAA4B,MAAM3F,mBAAlC,GAAyD,EAAhG,CAAV;AACAwF,IAAAA,GAAG,IAAK,OAAQvD,IAAI,CAACqF,QAAL,KAAkB,kBAAnB,GAAyC5G,2BAAzC,GAAuED,2BAA9E,CAAR;AACA,QAAIuF,OAAO,GAAGH,KAAK,CAAC9E,MAAN,CAAaqE,aAAb,CAA2B,MAA3B,EAAmC;AAAEmC,MAAAA,SAAS,EAAE5G;AAAb,KAAnC,CAAd;AACA,QAAI6G,SAAS,GAAG3B,KAAK,CAAC9E,MAAN,CAAaqE,aAAb,CAA2B,MAA3B,EAAmC;AAAEmC,MAAAA,SAAS,EAAEtF,IAAI,CAACyD;AAAlB,KAAnC,CAAhB;AACAM,IAAAA,OAAO,CAACyB,WAAR,CAAoBD,SAApB;AACA,QAAI1B,QAAQ,GAAG,IAAItG,cAAJ,CAAmB;AAC9BmF,MAAAA,KAAK,EAAE1C,IAAI,CAAC0C,KADkB;AAE9Be,MAAAA,QAAQ,EAAEF,GAFoB;AAG9BQ,MAAAA,OAAO,EAAE/D,IAAI,CAAC+D,OAHgB;AAI9Bf,MAAAA,iBAAiB,EAAE,KAAKlE,MAAL,CAAYkE,iBAJD;AAK9BC,MAAAA,SAAS,EAAE,KAAKnE,MAAL,CAAYmE,SALO;AAM9Be,MAAAA,MAAM,EAAE,KAAK1D,gBAAL,CAAsBuC,IAAtB,CAA2B,IAA3B,CANsB;AAO9BoB,MAAAA,UAAU,EAAE,UAAUjE,IAAV,EAAgB;AACxB,YAAI4D,KAAK,CAAC9E,MAAN,CAAaoB,QAAb,IAAyB,CAAC0D,KAAK,CAAC9E,MAAN,CAAamB,OAA3C,EAAoD;AAChDD,UAAAA,IAAI,CAACkE,MAAL,GAAc,IAAd;AACA;AACH;;AACD,YAAIxD,OAAO,GAAIV,IAAI,CAACyF,KAAN,GAAezF,IAAI,CAACyF,KAAL,CAAWpD,MAA1B,GAAmC,IAAjD;AACAuB,QAAAA,KAAK,CAAC8B,cAAN,GAAuB7B,QAAQ,CAACnD,OAAhC;AACAkD,QAAAA,KAAK,CAAC+B,eAAN,GAAwB9B,QAAxB;;AACA,YAAI7D,IAAI,CAACyF,KAAL,IAAczF,IAAI,CAACyF,KAAL,CAAWG,IAAX,KAAoB,OAAlC,KAA8ClF,OAAO,CAACU,SAAR,CAAkBC,QAAlB,CAA2B3C,wBAA3B,KAC3CgC,OAAO,CAACC,aAAR,CAAsBS,SAAtB,CAAgCC,QAAhC,CAAyC3C,wBAAzC,CADH,CAAJ,EAC4E;AACxEsB,UAAAA,IAAI,CAACkE,MAAL,GAAc,IAAd;AACA;AACH;;AACDN,QAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAAC+G,kBAA3B,EAA+CzE,IAA/C;AACH,OArB6B;AAsB9B0E,MAAAA,KAAK,EAAE,KAAKjD,aAAL,CAAmBoB,IAAnB,CAAwB,IAAxB,CAtBuB;AAuB9B8B,MAAAA,IAAI,EAAE,KAAKlE,YAAL,CAAkBoC,IAAlB,CAAuB,IAAvB,CAvBwB;AAwB9B+B,MAAAA,gBAAgB,EAAE,KAAKpE,wBAAL,CAA8BqC,IAA9B,CAAmC,IAAnC;AAxBY,KAAnB,CAAf;AA0BAgB,IAAAA,QAAQ,CAACX,gBAAT,GAA4B,IAA5B;AACAW,IAAAA,QAAQ,CAACV,aAAT,GAAyBS,KAAK,CAAC9E,MAAN,CAAaqE,aAAtC;AACAU,IAAAA,QAAQ,CAACT,QAAT,CAAkBpD,IAAI,CAACU,OAAvB;AACAV,IAAAA,IAAI,CAACU,OAAL,CAAamE,QAAb,GAAwB,CAAC,CAAzB;AACA,QAAIC,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwBnB,QAAQ,CAACnD,OAAT,CAAiBuE,EAAjB,GAAsB,QAA9C,CAAnB;AACAH,IAAAA,YAAY,CAACI,YAAb,CAA0B,WAA1B,EAAuC,KAAKpG,MAAL,CAAYqG,KAAZ,EAAvC;;AACA,QAAInF,IAAI,CAACU,OAAL,CAAamF,iBAAb,KAAmC,CAAvC,EAA0C;AACtChC,MAAAA,QAAQ,CAACnD,OAAT,CAAiBoB,YAAjB,CAA8BiC,OAA9B,EAAuCF,QAAQ,CAACnD,OAAT,CAAiBI,aAAjB,CAA+B,UAA/B,CAAvC;AACH;;AACDd,IAAAA,IAAI,CAACU,OAAL,CAAamE,QAAb,GAAwB,CAAC,CAAzB;AACAhB,IAAAA,QAAQ,CAACnD,OAAT,CAAiBoF,eAAjB,CAAiC,MAAjC;AACA,WAAOjC,QAAP;AACH,GA9CD,CA9K6C,CA6N7C;;;AACAhF,EAAAA,eAAe,CAACG,SAAhB,CAA0BO,cAA1B,GAA2C,UAAUS,IAAV,EAAgB;AACvD,QAAI,CAAChD,iBAAiB,CAAC,KAAKqC,YAAN,CAAtB,EAA2C;AACvClC,MAAAA,OAAO,CAAC,KAAKkC,YAAN,EAAoB,oBAApB,CAAP,CAAiD2C,KAAjD,CAAuD+D,OAAvD,GAAiE,MAAjE;AACA,WAAK1G,YAAL,CAAkB2C,KAAlB,CAAwB+D,OAAxB,GAAkC,MAAlC;AACAlJ,MAAAA,WAAW,CAAC,CAAC,KAAKwC,YAAN,CAAD,EAAsB,iBAAtB,CAAX;AACH;AACJ,GAND;;AAOAR,EAAAA,eAAe,CAACG,SAAhB,CAA0BgH,UAA1B,GAAuC,UAAUtF,OAAV,EAAmB;AACtD,QAAI,CAACvD,OAAO,CAACuD,OAAD,EAAU,oBAAV,CAAZ,EAA6C;AACzC,WAAKiB,cAAL,GAAsB,KAAK7C,MAAL,CAAYqE,aAAZ,CAA0B,KAA1B,EAAiC;AACnDmC,QAAAA,SAAS,EAAE;AADwC,OAAjC,CAAtB;AAGA5E,MAAAA,OAAO,CAACmB,UAAR,CAAmBC,YAAnB,CAAgC,KAAKH,cAArC,EAAqDjB,OAArD;AACA,WAAKiB,cAAL,CAAoB6D,WAApB,CAAgC9E,OAAhC;AACA,WAAKiB,cAAL,CAAoBK,KAApB,CAA0BiE,MAA1B,GAAmCvF,OAAO,CAACsB,KAAR,CAAciE,MAAjD;AACA,WAAKtE,cAAL,CAAoBK,KAApB,CAA0B+D,OAA1B,GAAoC,MAApC;AACArF,MAAAA,OAAO,CAACsB,KAAR,CAAckE,QAAd,GAAyB,UAAzB;AACAvJ,MAAAA,QAAQ,CAAC,CAAC+D,OAAD,CAAD,EAAY,eAAZ,CAAR;AACA,WAAKrB,YAAL,GAAoB,KAAKP,MAAL,CAAYqE,aAAZ,CAA0B,KAA1B,EAAiC;AAAEmC,QAAAA,SAAS,EAAE;AAAb,OAAjC,CAApB,CAVyC,CAWzC;;AACA,WAAKjG,YAAL,CAAkB2C,KAAlB,CAAwBiE,MAAxB,GAAiC,CAACE,QAAQ,CAACzF,OAAO,CAACsB,KAAR,CAAciE,MAAf,EAAuB,IAAvB,CAAR,GAAuC,CAAxC,EAA2CG,QAA3C,EAAjC;AACA,WAAK/G,YAAL,CAAkB2C,KAAlB,CAAwB+D,OAAxB,GAAkC,OAAlC;AACA,WAAKpE,cAAL,CAAoB6D,WAApB,CAAgC,KAAKnG,YAArC;AACAvC,MAAAA,YAAY,CAAC0G,GAAb,CAAiB,KAAKnE,YAAtB,EAAoC,iBAApC,EAAuD,KAAKE,cAA5D,EAA4E,IAA5E;AACH,KAhBD,MAiBK;AACDmB,MAAAA,OAAO,CAACC,aAAR,CAAsBqB,KAAtB,CAA4B+D,OAA5B,GAAsC,MAAtC;AACA,WAAK1G,YAAL,GAAoBqB,OAAO,CAAC2F,kBAA5B;AACA,WAAKhH,YAAL,CAAkB2C,KAAlB,CAAwB+D,OAAxB,GAAkC,OAAlC;AACApJ,MAAAA,QAAQ,CAAC,CAAC,KAAK0C,YAAN,CAAD,EAAsB,iBAAtB,CAAR;AACH;AACJ,GAxBD;;AAyBAR,EAAAA,eAAe,CAACG,SAAhB,CAA0BsH,gBAA1B,GAA6C,UAAUC,YAAV,EAAwBb,cAAxB,EAAwC;AACjF,QAAIc,GAAG,GAAGD,YAAY,CAAC7F,OAAb,CAAqBI,aAArB,CAAmC,0BAAnC,CAAV;AACA,QAAI2F,QAAQ,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcvJ,SAAS,CAAC,SAAD,EAAYoJ,GAAG,CAAC7F,aAAhB,CAAvB,CAAf;AACA9D,IAAAA,WAAW,CAAC4J,QAAD,EAAW,YAAX,CAAX;AACA,QAAIzE,KAAK,GAAG0D,cAAc,CAAC5E,aAAf,CAA6B,MAAMjD,gBAAnC,EAAqDmE,KAArD,CAA2D4E,iBAAvE;AACCH,IAAAA,QAAQ,CAACI,MAAT,CAAgB,UAAUJ,QAAV,EAAoB;AACjC,UAAIA,QAAQ,CAACzE,KAAT,CAAe8E,eAAf,KAAmC9E,KAAvC,EAA8C;AAC1CrF,QAAAA,QAAQ,CAAC,CAAC8J,QAAD,CAAD,EAAa,YAAb,CAAR;AACH;AACJ,KAJA,CAAD;AAKH,GAVD;AAWA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEI5H,EAAAA,eAAe,CAACG,SAAhB,CAA0B+H,yBAA1B,GAAsD,UAAU/G,IAAV,EAAgBG,IAAhB,EAAsB6G,WAAtB,EAAmCC,YAAnC,EAAiD;AACnG,QAAI3D,KAAK,GAAG,IAAZ,CADmG,CAEnG;;;AACA,QAAIM,KAAK,GAAG,IAAZ;AACA,QAAIL,GAAG,GAAG1F,gBAAgB,GAAG,GAAnB,GAAyBC,UAAzB,IAAwC,KAAKgB,MAAL,CAAY4E,UAAb,GAA4B,MAAM3F,mBAAlC,GAAyD,EAAhG,CAAV;AACAwF,IAAAA,GAAG,IAAK,OAAQpD,IAAI,KAAK,iBAAV,GAA+BjC,6BAA/B,GAA+DD,uBAAtE,CAAR;AACA,QAAI8F,OAAO,GAAGH,KAAK,CAAC9E,MAAN,CAAaqE,aAAb,CAA2B,MAA3B,EAAmC;AAAEmC,MAAAA,SAAS,EAAEtH;AAAb,KAAnC,CAAd;AACA,QAAIuH,SAAS,GAAG3B,KAAK,CAAC9E,MAAN,CAAaqE,aAAb,CAA2B,MAA3B,EAAmC;AAAEmC,MAAAA,SAAS,EAAEtF,IAAI,CAACyD;AAAlB,KAAnC,CAAhB;AACA,QAAIyD,KAAJ;AACA,QAAIC,sBAAsB,GAAInK,iBAAiB,CAACiK,YAAD,CAAlB,GAAoCrD,KAAK,CAAC9E,MAAN,CAAagI,eAAb,CAA6BM,OAAjE,GAA2EH,YAAxG;AACA1B,IAAAA,SAAS,CAACvD,KAAV,CAAgB4E,iBAAhB,GAAqCzG,IAAI,KAAK,iBAAV,GAChCgH,sBADgC,GACPvD,KAAK,CAAC9E,MAAN,CAAauI,SAAb,CAAuBD,OADpD;AAEArD,IAAAA,OAAO,CAACyB,WAAR,CAAoBD,SAApB;AACA,QAAI1B,QAAQ,GAAG,IAAItG,cAAJ,CAAmB;AAC9B8E,MAAAA,MAAM,EAAE2E,WAAW,CAACtG,OAAZ,CAAoBC,aADE;AACa8C,MAAAA,QAAQ,EAAEF,GADvB;AAE9BP,MAAAA,iBAAiB,EAAE,KAAKlE,MAAL,CAAYkE,iBAFD;AAEoBC,MAAAA,SAAS,EAAE,KAAKnE,MAAL,CAAYmE,SAF3C;AAG9BgB,MAAAA,UAAU,EAAE,UAAUsC,YAAV,EAAwB;AAChC,YAAI3C,KAAK,CAAC9E,MAAN,CAAaoB,QAAb,IAAyB,CAAC0D,KAAK,CAAC9E,MAAN,CAAamB,OAA3C,EAAoD;AAChDsG,UAAAA,YAAY,CAACrC,MAAb,GAAsB,IAAtB;AACA;AACH;;AACD,YAAIxD,OAAO,GAAI6F,YAAY,CAACd,KAAd,GAAuBc,YAAY,CAACd,KAAb,CAAmBpD,MAA1C,GAAmD,IAAjE;AACAuB,QAAAA,KAAK,CAAC8B,cAAN,GAAuB7B,QAAQ,CAACnD,OAAhC;AACAkD,QAAAA,KAAK,CAAC+B,eAAN,GAAwB9B,QAAxB;AACAD,QAAAA,KAAK,CAAC0C,gBAAN,CAAuBC,YAAvB,EAAqC3C,KAAK,CAAC8B,cAA3C;;AACA,YAAIa,YAAY,CAACd,KAAb,IAAsBc,YAAY,CAACd,KAAb,CAAmBG,IAAnB,KAA4B,OAAlD,KAA8DlF,OAAO,CAACU,SAAR,CAAkBC,QAAlB,CAA2BrD,iBAA3B,KAC3D0C,OAAO,CAACC,aAAR,CAAsBS,SAAtB,CAAgCC,QAAhC,CAAyCrD,iBAAzC,CADH,CAAJ,EACqE;AACjEuI,UAAAA,YAAY,CAACrC,MAAb,GAAsB,IAAtB;AACA,cAAIoD,gBAAgB,GAAG5G,OAAO,CAACU,SAAR,CAAkBC,QAAlB,CAA2BxD,gBAA3B,IAA+C6C,OAAO,CAACsB,KAAR,CAAc4E,iBAA7D,GACnBlG,OAAO,CAACI,aAAR,CAAsB,MAAMjD,gBAA5B,EAA8CmE,KAA9C,CAAoD4E,iBADxD;AAEAhD,UAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAACgE,gBAA3B,EAA6C,EAA7C;AACAwF,UAAAA,KAAK,GAAGtD,KAAK,CAAC9E,MAAN,CAAayI,SAAb,CAAuBC,aAAvB,CAAqCC,aAArC,CAAmDC,QAAnD,CAA4D9D,KAAK,CAAC9E,MAAN,CAAa6I,aAAb,CAA2BC,WAA3B,EAA5D,CAAR;AACA,cAAI/F,UAAU,GAAGqF,KAAK,CAACW,cAAN,CAAqBhG,UAAtC;;AACA,cAAI,CAACqF,KAAK,CAACW,cAAN,CAAqBC,QAArB,KAAkC,IAAlC,IAA0CZ,KAAK,CAACW,cAAN,CAAqBC,QAArB,KAAkC,IAA5E,IACA3K,OAAO,CAAC+J,KAAK,CAACW,cAAN,CAAqBhG,UAAtB,EAAkC,OAAlC,CADP,IAEA+B,KAAK,CAAC9E,MAAN,CAAaiJ,cAAb,CAA4BpE,MAA5B,IAAsC,CAAC/E,QAAQ,CAACiD,UAAU,CAACmG,aAAX,CAAyBlH,aAAzB,CAAuC,MAAvC,CAAD,EAAiD,OAAjD,CAFhD,KAGGoG,KAAK,CAACe,SAHT,IAGsBjI,IAAI,CAACkI,UAAL,KAAoB,iBAH9C,EAGiE;AAC7DtE,YAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAACyK,uBAA3B,EAAoD;AAChDhI,cAAAA,IAAI,EAAE;AAAEiI,gBAAAA,OAAO,EAAEpI,IAAI,CAACoI,OAAhB;AAAyBF,gBAAAA,UAAU,EAAElI,IAAI,CAACkI,UAA1C;AACFG,gBAAAA,KAAK,EAAEf;AADL;AAD0C,aAApD;AAIH,WARD,MASK;AACD1D,YAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAAC4K,kBAA3B,EAA+C;AAAEnI,cAAAA,IAAI,EAAE;AAAEiI,gBAAAA,OAAO,EAAEpI,IAAI,CAACoI,OAAhB;AAAyBF,gBAAAA,UAAU,EAAElI,IAAI,CAACkI,UAA1C;AAC/CG,gBAAAA,KAAK,EAAEf;AADwC;AAAR,aAA/C;AAGH;;AACD;AACH,SAvBD,MAwBK;AACD,cAAId,GAAG,GAAGD,YAAY,CAAC7F,OAAb,CAAqBI,aAArB,CAAmC,0BAAnC,CAAV;AACA,cAAIyH,IAAI,GAAGrL,WAAW,CAACsJ,GAAD,EAAM7H,WAAN,CAAtB;AACA4J,UAAAA,IAAI,CAACC,WAAL,GAAoBjC,YAAY,CAAC7F,OAAb,CAAqBI,aAArB,CAAmC,kBAAnC,CAAD,GAA2D,KAA3D,GAAmE,IAAtF;AACAyH,UAAAA,IAAI,CAACE,QAAL;AACH;;AACDlC,QAAAA,YAAY,CAAC7F,OAAb,CAAqBgI,OAArB,GAA+B,UAAU1I,IAAV,EAAgB;AAC3C,cAAIA,IAAI,CAACqC,MAAL,CAAYjB,SAAZ,CAAsBC,QAAtB,CAA+B,UAA/B,CAAJ,EAAgD;AAC5CwC,YAAAA,QAAQ,CAAC8E,MAAT;AACH;AACJ,SAJD;AAKH,OA/C6B;AAgD9BhE,MAAAA,IAAI,EAAE,UAAU4B,YAAV,EAAwB;AAC1BjD,QAAAA,KAAK,CAACsF,0BAAN,CAAiC5B,WAAjC;;AACA,YAAI6B,QAAJ;AACA,YAAIrC,GAAG,GAAGD,YAAY,CAAC7F,OAAb,CAAqBI,aAArB,CAAmC,0BAAnC,CAAV;;AACA,YAAIyF,YAAY,CAAC7F,OAAb,CAAqBI,aAArB,CAAmC,kBAAnC,CAAJ,EAA4D;AACxD+H,UAAAA,QAAQ,GAAGrC,GAAG,CAAC7F,aAAJ,CAAkBG,aAAlB,CAAgC,YAAhC,CAAX;AACH,SAFD,MAGK;AACD+H,UAAAA,QAAQ,GAAGrC,GAAG,CAAC7F,aAAJ,CAAkBG,aAAlB,CAAgC,WAAhC,CAAX;AACH;;AACD,YAAI+H,QAAJ,EAAc;AACVA,UAAAA,QAAQ,CAACC,KAAT;AACH;;AACD,YAAIlM,OAAO,CAACuE,QAAZ,EAAsB;AAClBmC,UAAAA,KAAK,CAAC/B,UAAN,CAAiBgF,YAAY,CAAC7F,OAAb,CAAqBC,aAAtC;AACH;;AACD2C,QAAAA,KAAK,CAACyF,aAAN,CAAoBxC,YAApB;AACH,OAjE6B;AAkE9ByC,MAAAA,WAAW,EAAE,UAAUzC,YAAV,EAAwB;AACjC,YAAI7F,OAAO,GAAI6F,YAAY,CAACd,KAAd,GAAuBc,YAAY,CAACd,KAAb,CAAmBpD,MAA1C,GAAmD,IAAjE;;AACA,YAAIkE,YAAY,CAACd,KAAb,IAAsBc,YAAY,CAACd,KAAb,CAAmBG,IAAnB,KAA4B,OAAlD,KAA8DlF,OAAO,CAACU,SAAR,CAAkBC,QAAlB,CAA2BrD,iBAA3B,KAC3D0C,OAAO,CAACC,aAAR,CAAsBS,SAAtB,CAAgCC,QAAhC,CAAyCrD,iBAAzC,CADH,CAAJ,EACqE;AACjE,cAAIsJ,gBAAgB,GAAG5G,OAAO,CAACU,SAAR,CAAkBC,QAAlB,CAA2BxD,gBAA3B,IAA+C6C,OAAO,CAACsB,KAAR,CAAc4E,iBAA7D,GACnBlG,OAAO,CAACI,aAAR,CAAsB,MAAMjD,gBAA5B,EAA8CmE,KAA9C,CAAoD4E,iBADxD;AAEAM,UAAAA,KAAK,GAAGtD,KAAK,CAAC9E,MAAN,CAAayI,SAAb,CAAuBC,aAAvB,CAAqCC,aAArC,CAAmDC,QAAnD,CAA4D9D,KAAK,CAAC9E,MAAN,CAAa6I,aAAb,CAA2BC,WAA3B,EAA5D,CAAR;;AACA,cAAI,CAACV,KAAK,CAACW,cAAN,CAAqBC,QAArB,KAAkC,IAAlC,IAA0CZ,KAAK,CAACW,cAAN,CAAqBC,QAArB,KAAkC,IAA5E,IACD3K,OAAO,CAAC+J,KAAK,CAACW,cAAN,CAAqBhG,UAAtB,EAAkC,OAAlC,CADP,KACsDqF,KAAK,CAACe,SADhE,EAC2E;AACvErE,YAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAACyK,uBAA3B,EAAoD;AAAEhI,cAAAA,IAAI,EAAE;AACpDiI,gBAAAA,OAAO,EAAEpI,IAAI,CAACoI,OADsC;AAC7BF,gBAAAA,UAAU,EAAElI,IAAI,CAACkI,UADY;AAEpDG,gBAAAA,KAAK,EAAEf;AAF6C;AAAR,aAApD;AAKH,WAPD,MAQK;AACD1D,YAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAAC4K,kBAA3B,EAA+C;AAAEnI,cAAAA,IAAI,EAAE;AAAEiI,gBAAAA,OAAO,EAAEpI,IAAI,CAACoI,OAAhB;AAAyBF,gBAAAA,UAAU,EAAElI,IAAI,CAACkI,UAA1C;AAC/CG,gBAAAA,KAAK,EAAEf;AADwC;AAAR,aAA/C;AAGH;;AACD;AACH;AACJ,OAxF6B;AAyF9B5C,MAAAA,KAAK,EAAE,UAAU6B,YAAV,EAAwB;AAC3B3C,QAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAACgE,gBAA3B,EAA6C,EAA7C;AACA,YAAIuH,WAAW,GAAG9L,OAAO,CAACoJ,YAAY,CAAC7F,OAAb,CAAqBC,aAAtB,EAAqC,oBAArC,CAAzB;;AACA,YAAIsI,WAAJ,EAAiB;AACbA,UAAAA,WAAW,CAACjH,KAAZ,CAAkB+D,OAAlB,GAA4B,MAA5B;AACAkD,UAAAA,WAAW,CAACC,gBAAZ,CAA6BlH,KAA7B,CAAmC+D,OAAnC,GAA6C,MAA7C;AACAlJ,UAAAA,WAAW,CAAC,CAACoM,WAAW,CAACC,gBAAb,CAAD,EAAiC,iBAAjC,CAAX;AACH;;AACD,YAAItM,OAAO,CAACuE,QAAR,IAAoB,CAACnE,iBAAiB,CAACiM,WAAD,CAA1C,EAAyD;AACrD,cAAIrH,QAAQ,GAAGqH,WAAW,CAACnI,aAAZ,CAA0B,wCAA1B,CAAf;;AACA,cAAIc,QAAJ,EAAc;AACVqH,YAAAA,WAAW,CAACpH,UAAZ,CAAuBC,YAAvB,CAAoCF,QAApC,EAA8CqH,WAAW,CAAClH,WAA1D;AACAH,YAAAA,QAAQ,CAACI,KAAT,CAAeC,cAAf,CAA8B,UAA9B;AACApF,YAAAA,WAAW,CAAC,CAAC+E,QAAD,CAAD,EAAa,eAAb,CAAX;AACH;;AACDvE,UAAAA,MAAM,CAAC4L,WAAD,CAAN;AACArF,UAAAA,KAAK,CAACjC,cAAN,GAAuBO,SAAvB;AACH;AACJ;AA3G6B,KAAnB,CAAf;AA6GA2B,IAAAA,QAAQ,CAACX,gBAAT,GAA4B,IAA5B;AACAW,IAAAA,QAAQ,CAACV,aAAT,GAAyBS,KAAK,CAAC9E,MAAN,CAAaqE,aAAtC;AACAnD,IAAAA,IAAI,CAACU,OAAL,CAAawE,YAAb,CAA0B,MAA1B,EAAkC,QAAlC;AACArB,IAAAA,QAAQ,CAACT,QAAT,CAAkBpD,IAAI,CAACU,OAAvB;AACA,QAAIoE,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwBnB,QAAQ,CAACnD,OAAT,CAAiBuE,EAAjB,GAAsB,QAA9C,CAAnB;AACAH,IAAAA,YAAY,CAACI,YAAb,CAA0B,WAA1B,EAAuC,KAAKpG,MAAL,CAAYqG,KAAZ,EAAvC;AACAtB,IAAAA,QAAQ,CAACnD,OAAT,CAAiBoB,YAAjB,CAA8BiC,OAA9B,EAAuCF,QAAQ,CAACnD,OAAT,CAAiBI,aAAjB,CAA+B,UAA/B,CAAvC;AACAd,IAAAA,IAAI,CAACU,OAAL,CAAamE,QAAb,GAAwB,CAAC,CAAzB;AACAhB,IAAAA,QAAQ,CAACnD,OAAT,CAAiBoF,eAAjB,CAAiC,MAAjC;;AACAjC,IAAAA,QAAQ,CAACnD,OAAT,CAAiByI,WAAjB,GAA+B,YAAY;AACvCvF,MAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAAC8D,aAA3B,EAA0C,EAA1C;AACH,KAFD;;AAGAqC,IAAAA,QAAQ,CAACnD,OAAT,CAAiB0I,SAAjB,GAA6B,YAAY;AACrCxF,MAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAAC8D,aAA3B,EAA0C,EAA1C;AACH,KAFD;;AAGA,WAAOqC,QAAP;AACH,GA1ID;;AA2IAhF,EAAAA,eAAe,CAACG,SAAhB,CAA0B+J,aAA1B,GAA0C,UAAUxC,YAAV,EAAwB;AAC9D,QAAI,KAAKzH,MAAL,CAAYgI,eAAZ,CAA4BnH,IAA5B,KAAqC,QAAzC,EAAmD;AAC/C,UAAI0J,SAAS,GAAG9C,YAAY,CAAC7F,OAAb,CAAqBC,aAArC;AACA0I,MAAAA,SAAS,CAACrH,KAAV,CAAgBW,KAAhB,GAAwB,CAAC0G,SAAS,CAACC,WAAV,GAAwB,CAAzB,EAA4BlD,QAA5B,KAAyC,IAAjE;AACAlJ,MAAAA,WAAW,CAACmM,SAAD,EAAY7L,KAAZ,CAAX,CAA8B+L,eAA9B,CAA8CF,SAA9C;AACAA,MAAAA,SAAS,CAACrH,KAAV,CAAgBW,KAAhB,GAAwB,CAAC0G,SAAS,CAACC,WAAV,GAAwB,CAAzB,EAA4BlD,QAA5B,KAAyC,IAAjE;AACH;AACJ,GAPD;;AAQAvH,EAAAA,eAAe,CAACG,SAAhB,CAA0BuC,UAA1B,GAAuC,UAAUb,OAAV,EAAmB;AACtD,QAAI8I,SAAS,GAAGtM,WAAW,CAACwD,OAAD,EAAUlD,KAAV,CAA3B;AACAgM,IAAAA,SAAS,CAACC,QAAV,GAAqB1E,QAAQ,CAAC2E,IAA9B;AACAF,IAAAA,SAAS,CAACtD,QAAV,GAAqB;AAAEyD,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,CAAC,EAAE;AAAX,KAArB;AACAJ,IAAAA,SAAS,CAACK,UAAV,GAAuB,WAAvB;AACAL,IAAAA,SAAS,CAACM,SAAV,GAAsB;AAAEH,MAAAA,CAAC,EAAE,KAAL;AAAYC,MAAAA,CAAC,EAAE;AAAf,KAAtB;AACAJ,IAAAA,SAAS,CAACO,OAAV,GAAoB,CAApB;AACAP,IAAAA,SAAS,CAACf,QAAV;AACA,SAAKzC,UAAL,CAAgBtF,OAAhB;AACH,GATD;;AAUA7B,EAAAA,eAAe,CAACG,SAAhB,CAA0B4J,0BAA1B,GAAuD,UAAU5B,WAAV,EAAuB;AAC1E,QAAIgD,kBAAkB,GAAGhD,WAAW,CAACtG,OAAZ,CAAoBqB,WAA7C;;AACA,QAAIiI,kBAAkB,CAAChI,KAAnB,CAAyBW,KAAzB,KAAmC,KAAvC,EAA8C;AAC1CqH,MAAAA,kBAAkB,CAAChI,KAAnB,CAAyBW,KAAzB,GAAiC,EAAjC;AACA,UAAIsH,WAAW,GAAG9D,QAAQ,CAAC+D,gBAAgB,CAACF,kBAAD,CAAhB,CAAqCG,iBAAtC,EAAyD,EAAzD,CAA1B;AACAH,MAAAA,kBAAkB,CAAChI,KAAnB,CAAyBW,KAAzB,GAAiC5F,UAAU,CAACiN,kBAAkB,CAACI,QAAnB,CAA4B,CAA5B,EAA+Bd,WAA/B,GACtCW,WADsC,GACxBA,WADuB,CAA3C;AAEH;AACJ,GARD;AASA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEIpL,EAAAA,eAAe,CAACG,SAAhB,CAA0BqL,iBAA1B,GAA8C,UAAUrK,IAAV,EAAgBG,IAAhB,EAAsB;AAChE;AACA,QAAIyD,KAAK,GAAG,IAAZ;AACA,QAAIyE,KAAJ;AACA,QAAIrB,WAAW,GAAG,IAAIrI,WAAJ,CAAgB;AAC9BqE,MAAAA,iBAAiB,EAAE,KAAKlE,MAAL,CAAYkE,iBADD;AAE9BC,MAAAA,SAAS,EAAE,KAAKnE,MAAL,CAAYmE,SAFO;AAG9BqH,MAAAA,MAAM,EAAE,IAHsB;AAI9BjC,MAAAA,KAAK,EAAE,MAJuB;AAK9BvF,MAAAA,OAAO,EAAE,YAAY;AACjB,YAAIuF,KAAK,GAAIlI,IAAI,KAAK,iBAAV,GAA+ByD,KAAK,CAAC9E,MAAN,CAAagI,eAAb,CAA6BM,OAA5D,GAAsExD,KAAK,CAAC9E,MAAN,CAAauI,SAAb,CAAuBD,OAAzG;AACAJ,QAAAA,WAAW,CAACuD,aAAZ,CAA0B;AAAElC,UAAAA,KAAK,EAAEA;AAAT,SAA1B;AACH,OAR6B;AAS9B1I,MAAAA,IAAI,EAAIQ,IAAI,KAAK,iBAAV,GAA+ByD,KAAK,CAAC9E,MAAN,CAAagI,eAAb,CAA6BnH,IAA5D,GAAmEiE,KAAK,CAAC9E,MAAN,CAAauI,SAAb,CAAuB1H,IATnE;AAU9B6K,MAAAA,YAAY,EAAIrK,IAAI,KAAK,iBAAV,GAA+ByD,KAAK,CAAC9E,MAAN,CAAagI,eAAb,CAA6B0D,YAA5D,GAA2E5G,KAAK,CAAC9E,MAAN,CAAauI,SAAb,CAAuBmD,YAVnF;AAW9BC,MAAAA,gBAAgB,EAAE,UAAUzK,IAAV,EAAgB;AAC9BA,QAAAA,IAAI,CAACU,OAAL,CAAaU,SAAb,CAAuBoC,GAAvB,CAA2BrF,iBAA3B;AACA6B,QAAAA,IAAI,CAACU,OAAL,CAAaU,SAAb,CAAuBoC,GAAvB,CAA2BlF,eAA3B;;AACA,YAAI0B,IAAI,CAACqI,KAAL,KAAe,EAAnB,EAAuB;AACnBrI,UAAAA,IAAI,CAACU,OAAL,CAAaU,SAAb,CAAuBoC,GAAvB,CAA2BjF,gBAA3B;AACH;AACJ,OAjB6B;AAkB9BmM,MAAAA,MAAM,EAAE,UAAUC,eAAV,EAA2B;AAC/B,YAAIrD,gBAAgB,GAAGqD,eAAe,CAACC,YAAhB,CAA6BC,IAApD;AACAF,QAAAA,eAAe,CAACxK,IAAhB,GAAuB;AACnBiI,UAAAA,OAAO,EAAEpI,IAAI,CAACoI,OADK;AAEnBF,UAAAA,UAAU,EAAElI,IAAI,CAACkI,UAFE;AAGnBG,UAAAA,KAAK,EAAEf;AAHY,SAAvB;AAKA1D,QAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAACgE,gBAA3B,EAA6C,EAA7C;AACAkC,QAAAA,KAAK,CAAC8B,cAAN,CAAqB5E,aAArB,CAAmC,MAAMjD,gBAAzC,EAA2DmE,KAA3D,CAAiE4E,iBAAjE,GAAqFU,gBAArF;AACA,YAAIJ,KAAK,GAAGtD,KAAK,CAAC9E,MAAN,CAAayI,SAAb,CAAuBC,aAAvB,CAAqCC,aAArC,CAAmDC,QAAnD,CAA4D9D,KAAK,CAAC9E,MAAN,CAAa6I,aAAb,CAA2BC,WAA3B,EAA5D,CAAZ;;AACA,YAAI,CAACV,KAAK,CAACW,cAAN,CAAqBC,QAArB,KAAkC,IAAlC,IAA0CZ,KAAK,CAACW,cAAN,CAAqBC,QAArB,KAAkC,IAA5E,IAAoFZ,KAAK,CAACW,cAAN,CAAqBC,QAArB,KAAkC,MAAtH,IACD3K,OAAO,CAAC+J,KAAK,CAACW,cAAN,CAAqBhG,UAAtB,EAAkC,OAAlC,CADP,KACsDqF,KAAK,CAACe,SAD5D,IACyEjI,IAAI,CAACkI,UAAL,KAAoB,iBADjG,EACoH;AAChHtE,UAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAACyK,uBAA3B,EAAoDwC,eAApD;AACH,SAHD,MAIK;AACD/G,UAAAA,KAAK,CAAC9E,MAAN,CAAagB,MAAb,CAAoBpC,MAAM,CAAC4K,kBAA3B,EAA+CqC,eAA/C;AACH;;AACD/G,QAAAA,KAAK,CAAC+B,eAAN,CAAsBgD,MAAtB;AACH,OApC6B;AAqC9BmC,MAAAA,gBAAgB,EAAE,UAAU9K,IAAV,EAAgB;AAC9BqI,QAAAA,KAAK,GAAGrB,WAAW,CAACqB,KAApB;;AACA,YAAIA,KAAK,KAAK,EAAd,EAAkB;AACdrB,UAAAA,WAAW,CAACuD,aAAZ,CAA0B;AAAElC,YAAAA,KAAK,EAAIrI,IAAI,CAACL,IAAL,KAAc,QAAf,GAA2B,WAA3B,GAAyC;AAAnD,WAA1B,EAAoF,IAApF;AACH;;AACDqH,QAAAA,WAAW,CAACwB,WAAZ,GAA0BxI,IAAI,CAACL,IAAL,KAAc,SAAd,GAA0B,KAA1B,GAAkC,IAA5D;AACH;AA3C6B,KAAhB,CAAlB;AA6CAqH,IAAAA,WAAW,CAAC9D,gBAAZ,GAA+B,IAA/B;AACA8D,IAAAA,WAAW,CAAC+D,OAAZ,GAAuB5K,IAAI,KAAK,iBAAV,GAA+B,KAAKrB,MAAL,CAAYgI,eAAZ,CAA4BiE,OAA3D,GAAqE,KAAKjM,MAAL,CAAYuI,SAAZ,CAAsB0D,OAAjH;AACA/D,IAAAA,WAAW,CAACgE,YAAZ,GAA4B7K,IAAI,KAAK,iBAAV,GAA+B,KAAKrB,MAAL,CAAYgI,eAAZ,CAA4BmE,SAA3D,GACvB,KAAKnM,MAAL,CAAYuI,SAAZ,CAAsB4D,SAD1B;AAEAjE,IAAAA,WAAW,CAACvD,QAAZ,GAAwBtD,IAAI,KAAK,iBAAV,GAA+B9B,2BAA/B,GAA6DD,qBAApF;AACA4I,IAAAA,WAAW,CAAC7D,aAAZ,GAA4B,KAAKrE,MAAL,CAAYqE,aAAxC;AACA6D,IAAAA,WAAW,CAAC5D,QAAZ,CAAqB2B,QAAQ,CAACC,cAAT,CAAwBhF,IAAI,CAACqC,MAA7B,CAArB;AACA,WAAO2E,WAAP;AACH,GAzDD;AA0DA;AACJ;AACA;AACA;AACA;AACA;;;AAEInI,EAAAA,eAAe,CAACG,SAAhB,CAA0BsD,WAA1B,GAAwC,YAAY;AAChD,SAAK4I,QAAL,GAAgB9J,SAAhB,CAA0BoC,GAA1B,CAA8B7F,WAA9B;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;;;AAEIkB,EAAAA,eAAe,CAACG,SAAhB,CAA0BkM,QAA1B,GAAqC,YAAY;AAC7C,WAAO,KAAKC,YAAZ;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEItM,EAAAA,eAAe,CAACG,SAAhB,CAA0BoD,QAA1B,GAAqC,UAAUgJ,KAAV,EAAiB;AAClD,SAAKD,YAAL,GAAoBC,KAApB;AACH,GAFD;;AAGA,SAAOvM,eAAP;AACH,CA5hBoC,EAArC;;AA6hBA,SAASA,eAAT","sourcesContent":["import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll, detach } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     */\n    function ToolbarRenderer(parent) {\n        this.parent = parent;\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n        if (this.popupOverlay) {\n            EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n        }\n        this.removePopupContainer();\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (!this.parent.enabled) {\n            return;\n        }\n        if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n            this.parent.notify(events.toolbarClick, args);\n        }\n        this.parent.trigger('toolbarClick', args);\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.onPopupOverlay();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) &&\n            (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n            var listEle = args.element.querySelectorAll('li');\n            if (this.parent.inputElement.querySelectorAll('.e-cell-select').length === 1) {\n                addClass([listEle[0]], 'e-disabled');\n                removeClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n            else if (this.parent.inputElement.querySelectorAll('.e-cell-select').length > 1) {\n                removeClass([listEle[0]], 'e-disabled');\n                addClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n        }\n        if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n            this.popupModal(args.element.parentElement);\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.removePopupContainer();\n        this.parent.notify(events.selectionRestore, args);\n    };\n    ToolbarRenderer.prototype.removePopupContainer = function () {\n        if (Browser.isDevice && !isNullOrUndefined(this.popupContainer)) {\n            var popupEle = this.popupContainer.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n            if (popupEle) {\n                this.popupContainer.parentNode.insertBefore(popupEle, this.popupContainer.nextSibling);\n                popupEle.style.removeProperty('position');\n                removeClass([popupEle], 'e-popup-modal');\n            }\n            detach(this.popupContainer);\n            this.popupContainer = undefined;\n        }\n    };\n    /**\n     * renderToolbar method\n     *\n     * @param {IToolbarOptions} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl\n        });\n        args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    };\n    /**\n     * renderDropDownButton method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        // eslint-disable-next-line\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                // eslint-disable-next-line\n                for (var index = 0; index < args.element.childNodes.length; index++) {\n                    var divNode = _this.parent.createElement('div');\n                    divNode.innerHTML = dropDown.content.trim();\n                    if (divNode.textContent.trim() !== ''\n                        && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                        if (!args.element.childNodes[index].classList.contains('e-active')) {\n                            addClass([args.element.childNodes[index]], 'e-active');\n                        }\n                    }\n                    else {\n                        removeClass([args.element.childNodes[index]], 'e-active');\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    /**\n     * renderListDropDown method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderListDropDown = function (args) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((args.itemName === 'NumberFormatList') ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN));\n        var content = proxy.parent.createElement('span', { className: CLS_LIST_PRIMARY_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            items: args.items,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                var element = (args.event) ? args.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT)\n                    || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        if (args.element.childElementCount === 1) {\n            dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        }\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        return dropDown;\n    };\n    // eslint-disable-next-line\n    ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n        if (!isNullOrUndefined(this.popupOverlay)) {\n            closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n            this.popupOverlay.style.display = 'none';\n            removeClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.setIsModel = function (element) {\n        if (!closest(element, '.e-popup-container')) {\n            this.popupContainer = this.parent.createElement('div', {\n                className: 'e-rte-modal-popup e-popup-container e-center'\n            });\n            element.parentNode.insertBefore(this.popupContainer, element);\n            this.popupContainer.appendChild(element);\n            this.popupContainer.style.zIndex = element.style.zIndex;\n            this.popupContainer.style.display = 'flex';\n            element.style.position = 'relative';\n            addClass([element], 'e-popup-modal');\n            this.popupOverlay = this.parent.createElement('div', { className: 'e-popup-overlay' });\n            // eslint-disable-next-line\n            this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n            this.popupOverlay.style.display = 'block';\n            this.popupContainer.appendChild(this.popupOverlay);\n            EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n        }\n        else {\n            element.parentElement.style.display = 'flex';\n            this.popupOverlay = element.nextElementSibling;\n            this.popupOverlay.style.display = 'block';\n            addClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    /**\n     * renderColorPickerDropDown method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments.\n     * @param {string} item - specifies the item.\n     * @param {ColorPicker} colorPicker - specifies the colorpicker.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        var initialBackgroundColor = (isNullOrUndefined(defaultColor)) ? proxy.parent.backgroundColor.default : defaultColor;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            initialBackgroundColor : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement, cssClass: css,\n            enablePersistence: this.parent.enablePersistence, enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    proxy.parent.notify(events.selectionRestore, {});\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    var parentNode = range.startContainer.parentNode;\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        (closest(range.startContainer.parentNode, 'td,th')) ||\n                        (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')))\n                        && range.collapsed && args.subCommand === 'BackgroundColor') {\n                        proxy.parent.notify(events.tableColorPickerChanged, {\n                            item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var focusEle;\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                if (Browser.isDevice) {\n                    _this.popupModal(dropDownArgs.element.parentElement);\n                }\n                _this.pickerRefresh(dropDownArgs);\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: {\n                                command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue\n                            }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n                var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n                if (dropElement) {\n                    dropElement.style.display = 'none';\n                    dropElement.lastElementChild.style.display = 'none';\n                    removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n                }\n                if (Browser.isDevice && !isNullOrUndefined(dropElement)) {\n                    var popupEle = dropElement.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n                    if (popupEle) {\n                        dropElement.parentNode.insertBefore(popupEle, dropElement.nextSibling);\n                        popupEle.style.removeProperty('position');\n                        removeClass([popupEle], 'e-popup-modal');\n                    }\n                    detach(dropElement);\n                    proxy.popupContainer = undefined;\n                }\n            }\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        args.element.setAttribute('role', 'button');\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n        if (this.parent.backgroundColor.mode === 'Picker') {\n            var popupElem = dropDownArgs.element.parentElement;\n            popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n            getInstance(popupElem, Popup).refreshPosition(popupElem);\n            popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n        }\n    };\n    ToolbarRenderer.prototype.popupModal = function (element) {\n        var popupInst = getInstance(element, Popup);\n        popupInst.relateTo = document.body;\n        popupInst.position = { X: 0, Y: 0 };\n        popupInst.targetType = 'container';\n        popupInst.collision = { X: 'fit', Y: 'fit' };\n        popupInst.offsetY = 4;\n        popupInst.dataBind();\n        this.setIsModel(element);\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    /**\n     * renderColorPicker method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments\n     * @param {string} item - specifies the string values\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var value;\n        var colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: true,\n            value: '#fff',\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n                args.element.classList.add(CLS_CUSTOM_TILE);\n                if (args.value === '') {\n                    args.element.classList.add(CLS_NOCOLOR_ITEM);\n                }\n            },\n            change: function (colorPickerArgs) {\n                var colorpickerValue = colorPickerArgs.currentValue.rgba;\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.parent.notify(events.selectionRestore, {});\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                value = colorPicker.value;\n                if (value === '') {\n                    colorPicker.setProperties({ value: ((args.mode === 'Picker') ? '#008000ff' : '') }, true);\n                }\n                colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        colorPicker.isStringTemplate = true;\n        colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        colorPicker.cssClass = (item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n        colorPicker.createElement = this.parent.createElement;\n        colorPicker.appendTo(document.getElementById(args.target));\n        return colorPicker;\n    };\n    /**\n     * The function is used to render Rich Text Editor toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     *\n     * @returns {void}\n     * @param  {Element} panel - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n"]},"metadata":{},"sourceType":"module"}